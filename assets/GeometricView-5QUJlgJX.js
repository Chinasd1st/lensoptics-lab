import{r as c,j as e,R as k}from"./index-DLsEVmbJ.js";import{g as v,c as w,O as f,C as s,a as t}from"./optics-BJr8qzqd.js";import{S as j,T as S}from"./Controls-DMfyOkjL.js";import{I as N}from"./info-BqEpTAUr.js";import{S as F}from"./settings-DRV82mNd.js";const E=({initialTab:C})=>{const[x,g]=c.useState(100),[d,b]=c.useState(250),[i,p]=c.useState(60),[m,u]=c.useState(!0),a=-d,l=w(x,a),h=l/a,n=i*Math.abs(h),r=l<0,y=c.useMemo(()=>v(x,a,i),[x,a,i]);return e.jsxs("div",{className:"flex flex-col lg:flex-row h-full",children:[e.jsxs("div",{className:"flex-1 bg-slate-900 relative border-b lg:border-r border-slate-700 overflow-hidden",children:[e.jsxs("div",{className:"absolute top-4 left-4 z-10 bg-slate-800/80 backdrop-blur p-2 rounded border border-slate-600",children:[e.jsxs("h2",{className:"text-cyan-400 font-bold flex items-center gap-2",children:[e.jsx(N,{size:16})," 几何光学基础 (Geometric Optics)"]}),e.jsxs("div",{className:"text-xs text-slate-400 mt-1 space-y-1",children:[e.jsxs("p",{children:["物距 (u): ",d,"mm"]}),e.jsxs("p",{children:["像距 (v): ",Math.abs(l).toFixed(1),"mm ",r?"(虚像)":"(实像)"]}),e.jsxs("p",{children:["放大倍率 (m): ",h.toFixed(2),"x"]})]})]}),e.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 800 500",children:[e.jsx("defs",{children:e.jsx("pattern",{id:"grid",width:"50",height:"50",patternUnits:"userSpaceOnUse",children:e.jsx("path",{d:"M 50 0 L 0 0 0 50",fill:"none",stroke:"#1e293b",strokeWidth:"1"})})}),e.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"}),e.jsx("line",{x1:"0",y1:f,x2:"800",y2:f,stroke:"#475569",strokeDasharray:"5,5"}),e.jsxs("g",{transform:`translate(${s}, ${t})`,children:[e.jsx("path",{d:"M0,-90 Q20,0 0,90 Q-20,0 0,-90",fill:"rgba(6, 182, 212, 0.1)",stroke:"#06b6d4",strokeWidth:"2"}),e.jsx("text",{x:"-5",y:"-100",fill:"#06b6d4",fontSize:"12",children:"L1"}),e.jsx("circle",{cx:"0",cy:"0",r:"2",fill:"#06b6d4"})]}),e.jsxs("g",{children:[e.jsx("circle",{cx:s-x,cy:t,r:"3",fill:"#F87171"}),e.jsx("text",{x:s-x-5,y:t+15,fill:"#F87171",fontSize:"10",children:"F"}),e.jsx("circle",{cx:s+x,cy:t,r:"3",fill:"#F87171"}),e.jsx("text",{x:s+x-5,y:t+15,fill:"#F87171",fontSize:"10",children:"F'"})]}),e.jsxs("g",{children:[e.jsx("line",{x1:s+a,y1:t,x2:s+a,y2:t-i,stroke:"white",strokeWidth:"3"}),e.jsx("polygon",{points:`${s+a},${t-i-5} ${s+a-5},${t-i+5} ${s+a+5},${t-i+5}`,fill:"white"}),e.jsx("text",{x:s+a-10,y:t+20,fill:"white",fontSize:"12",children:"物 (Object)"})]}),e.jsxs("g",{opacity:r&&!m?.2:1,children:[e.jsx("line",{x1:s+l,y1:t,x2:s+l,y2:t-(r?i*Math.abs(h):-n),stroke:r?"#94a3b8":"#4ade80",strokeWidth:"3",strokeDasharray:r?"5,5":""}),r?e.jsx("polygon",{points:`${s+l},${t-n-5} ${s+l-5},${t-n+5} ${s+l+5},${t-n+5}`,fill:"#94a3b8"}):e.jsx("polygon",{points:`${s+l},${t+n+5} ${s+l-5},${t+n-5} ${s+l+5},${t+n-5}`,fill:"#4ade80"}),e.jsx("text",{x:s+l-10,y:t+20,fill:r?"#94a3b8":"#4ade80",fontSize:"12",children:r?"虚像 (Virtual Image)":"实像 (Real Image)"})]}),y.map((o,$)=>e.jsxs(k.Fragment,{children:[e.jsx("line",{x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2,stroke:o.color,strokeWidth:"1.5",opacity:"0.8"}),r&&o.x2>s&&e.jsx("line",{x1:s,y1:o.x1===s?o.y1:t-i,x2:s+l,y2:t-n,stroke:o.color,strokeWidth:"1",strokeDasharray:"4,4",opacity:"0.4"})]},$))]})]}),e.jsxs("div",{className:"w-full lg:w-80 bg-slate-800 p-6 flex flex-col overflow-y-auto",children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[e.jsx(F,{className:"text-cyan-400"})," 参数控制"]}),e.jsx(j,{label:"焦距 (Focal Length)",value:x,min:50,max:200,onChange:g,unit:"mm"}),e.jsx(j,{label:"物距 (Object Dist)",value:d,min:50,max:400,onChange:b,unit:"mm"}),e.jsx(j,{label:"物体高度 (Height)",value:i,min:20,max:100,onChange:p,unit:"mm"}),e.jsx(S,{label:"显示虚像辅助线",checked:m,onChange:u}),e.jsxs("div",{className:"mt-8 p-4 bg-slate-700/50 rounded-lg text-sm text-slate-300",children:[e.jsx("h4",{className:"font-bold text-cyan-400 mb-2",children:"教学提示"}),e.jsxs("ul",{className:"list-disc pl-4 space-y-1",children:[e.jsxs("li",{children:["当 ",e.jsx("strong",{children:"物距 < 焦距"})," 时，形成正立放大的虚像（放大镜原理）。"]}),e.jsxs("li",{children:["当 ",e.jsx("strong",{children:"物距 > 2倍焦距"})," 时，形成倒立缩小的实像（照相机原理）。"]}),e.jsx("li",{children:"三条特殊光线帮助定位像的位置。"})]})]})]})]})};export{E as GeometricView};
