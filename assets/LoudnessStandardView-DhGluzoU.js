import{c as J,r as a,j as e,h as Xe,T as ke,W as _e,f as je,C as xt}from"./index-CTtSJEL_.js";import{T as ht,S as Qe}from"./target-DL5D187s.js";import{A as xe}from"./activity-BOoBaOP-.js";import{C as Je,U as et,P as tt,L as mt,F as bt}from"./LoudnessAnalyzerModule-BYvwqAO7.js";import{G as st}from"./globe-CNazNZBG.js";import{S as Ve,T as ut}from"./Controls-DLnIcH0n.js";import{S as lt}from"./scissors-B6_YtGSL.js";import{S as We}from"./settings-2-CJ4Fenip.js";import{A as be,S as qe}from"./square-check-big-BASWALxT.js";import{L as at}from"./layers-DoBu-Zdf.js";import{S as rt}from"./settings-DhblPQg3.js";import{C as me}from"./circle-check-big-bH5LYJBZ.js";import{C as ft}from"./circle-x-D0YtPx3C.js";import{B as pt}from"./book-open-a6BFo-r3.js";import{S as jt}from"./star-CKvKvZZX.js";import{L as gt}from"./lightbulb-rUR0YAo9.js";import{M as nt}from"./move-horizontal-BHiz-LyW.js";import{B as Se,M as Nt}from"./mouse-pointer-2-BmIqDH9m.js";import{I as Ce}from"./info-C7kyZFvl.js";import{P as Ee}from"./play-C3B_Rl-k.js";import{T as vt}from"./TabNavigation-_lN_CZle.js";import{E as wt}from"./eye-BH18dt0u.js";import"./zoom-in-Y8n8nSTF.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]],St=J("arrow-down-to-line",yt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=[["path",{d:"M5 3h14",key:"7usisc"}],["path",{d:"m18 13-6-6-6 6",key:"1kf1n9"}],["path",{d:"M12 7v14",key:"1akyts"}]],Rt=J("arrow-up-to-line",kt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=[["path",{d:"M6 8.5a6.5 6.5 0 1 1 13 0c0 6-6 6-6 10a3.5 3.5 0 1 1-7 0",key:"1dfaln"}],["path",{d:"M15 8.5a2.5 2.5 0 0 0-5 0v1a2 2 0 1 1 0 4",key:"1qnva7"}]],ot=J("ear",Tt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Mt=J("funnel",Lt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Ke=J("image",At);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],Re=J("mic",Et);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]],it=J("move-right",Ct);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m8 18 4 4 4-4",key:"bh5tu3"}],["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}]],Gt=J("move-vertical",Dt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Ft=J("radio",zt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=[["path",{d:"M18 7V5a1 1 0 0 0-1-1H6.5a.5.5 0 0 0-.4.8l4.5 6a2 2 0 0 1 0 2.4l-4.5 6a.5.5 0 0 0 .4.8H17a1 1 0 0 0 1-1v-2",key:"wuwx1p"}]],ct=J("sigma",It);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],Ye=J("sliders-vertical",Ut);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Bt=J("smartphone",Pt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]],dt=J("waves",$t),Ht=()=>{const[t,l]=a.useState("LUFS");return e.jsxs("div",{className:"h-full flex flex-col lg:flex-row gap-6 p-2 lg:p-4 overflow-hidden",children:[e.jsxs("div",{className:"w-full lg:w-[380px] flex flex-col gap-4 shrink-0 lg:h-full overflow-y-auto no-scrollbar",children:[e.jsx("div",{className:"w-full aspect-[16/10] bg-black rounded-2xl border border-slate-800 overflow-hidden relative shadow-2xl shrink-0",children:e.jsx(Ot,{mode:t})}),e.jsxs("div",{className:"flex flex-col gap-2 bg-slate-900 rounded-xl p-3 border border-slate-800 shrink-0",children:[e.jsx("div",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1 px-2",children:"Select Concept"}),e.jsx(Be,{isActive:t==="LUFS",onClick:()=>l("LUFS"),icon:e.jsx(ht,{size:18}),label:"LUFS",sub:"目标响度 (Target)",color:"text-cyan-400"}),e.jsx(Be,{isActive:t==="DBTP",onClick:()=>l("DBTP"),icon:e.jsx(Rt,{size:18}),label:"dBTP",sub:"真峰值 (Ceiling)",color:"text-red-400"}),e.jsx(Be,{isActive:t==="LU",onClick:()=>l("LU"),icon:e.jsx(Gt,{size:18}),label:"LU",sub:"相对差值 (Distance)",color:"text-yellow-400"})]}),e.jsx("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-800 text-[10px] text-slate-400 leading-relaxed italic mt-auto hidden lg:block",children:'"响度不是音量旋钮，而是对声音能量的积分。它更像是在测量‘水流量’而不是‘水位高度’。"'})]}),e.jsx("div",{className:"flex-1 h-full min-h-0 overflow-y-auto bg-slate-900/30 rounded-2xl border border-slate-800/50 p-4 lg:p-6 custom-scrollbar",children:e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6 pb-12",children:[e.jsx(Me,{title:"LUFS",sub:"Loudness Units Full Scale",icon:e.jsx(Xe,{size:20,className:"text-cyan-400"}),desc:"视频音频的核心标准。加入了 K-weighting 加权（模拟人耳对高频更敏感）和门限控制（自动忽略静音段）。",highlight:"源自 ITU-R BS.1770 / GY/T 262-2012",source:"[GY/T 262-2012]",details:[{label:"Integrated",val:"全片平均响度 (最重要)"},{label:"Short-term",val:"3秒滑动窗口"},{label:"Momentary",val:"400毫秒瞬时"}],active:t==="LUFS"}),e.jsx(Me,{title:"dBTP (真峰值)",sub:"True Peak",icon:e.jsx(ke,{size:20,className:"text-red-400"}),desc:"通过 4倍过采样 (Oversampling) 预测采样点之间的模拟波形峰值。普通 Peak 表可能会漏掉采样点间的‘隐形’峰值。",highlight:"它是最后的“保险丝”",source:"[GY/T 262-2012 附录B]",details:[{label:"Sample Peak",val:"仅测量数字采样点"},{label:"True Peak",val:"模拟还原后的真实电平"},{label:"安全限制",val:"≤ -1.0 dBTP"}],active:t==="DBTP"}),e.jsx(Me,{title:"LU (响度单位)",sub:"Loudness Unit",icon:e.jsx(xe,{size:20,className:"text-yellow-400"}),desc:"相对变化的单位。数值上 1 LU = 1 dB。它用于描述“距离达标还需要调大多少”。",highlight:"LU 是“相对差值”，LUFS 是“绝对刻度”",details:[{label:"目标",val:"-23 LUFS"},{label:"当前",val:"-21 LUFS"},{label:"差值 (LU)",val:"+2 LU"}],active:t==="LU"}),e.jsx(Me,{title:"dB (分贝)",sub:"Decibel",icon:e.jsx(Je,{size:20,className:"text-slate-400"}),desc:"基础物理单位，表示对数比率。本身没有绝对意义，必须指定参考值才有物理意义。",details:[{label:"dBFS",val:"相对于数字满刻度"},{label:"dBSPL",val:"相对于空气声压"}],active:!1})]})})]})},Be=({isActive:t,onClick:l,icon:r,label:c,sub:d,color:s})=>e.jsxs("button",{onClick:l,className:`flex items-center gap-3 p-3 rounded-lg border transition-all text-left group
         ${t?"bg-slate-700 border-slate-500 shadow-md ring-1 ring-white/10":"bg-transparent border-transparent hover:bg-slate-800/50 hover:border-slate-700"}
      `,children:[e.jsx("div",{className:`${t?s:"text-slate-500 group-hover:text-slate-300"}`,children:r}),e.jsxs("div",{children:[e.jsx("div",{className:`text-sm font-bold ${t?"text-white":"text-slate-400 group-hover:text-slate-200"}`,children:c}),e.jsx("div",{className:"text-[10px] text-slate-500 font-mono",children:d})]})]}),Me=({title:t,sub:l,icon:r,desc:c,highlight:d,limitations:s,details:h,source:g,active:v})=>e.jsxs("div",{className:`bg-slate-900 border rounded-xl p-5 transition-all flex flex-col shadow-sm
      ${v?"border-cyan-500/50 shadow-[0_0_15px_rgba(6,182,212,0.1)] ring-1 ring-cyan-500/20":"border-slate-800 hover:border-slate-600"}
   `,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-bold ${v?"text-white":"text-slate-300"}`,children:t}),e.jsx("div",{className:"text-[10px] font-mono text-slate-500 uppercase",children:l})]}),e.jsx("div",{className:"p-2 bg-slate-800 rounded-lg shadow-inner",children:r})]}),e.jsx("p",{className:"text-xs text-slate-400 leading-relaxed mb-4 min-h-[40px]",children:c}),g&&e.jsx("div",{className:"text-[9px] text-slate-600 font-mono mb-2 text-right",children:g}),d&&e.jsx("div",{className:"bg-cyan-900/20 border-l-2 border-cyan-500 px-3 py-2 rounded-r text-[10px] text-cyan-300 mb-3",children:d}),h&&e.jsx("div",{className:"space-y-1 mt-auto pt-3 border-t border-slate-800/50",children:h.map((w,D)=>e.jsxs("div",{className:"flex justify-between text-[10px]",children:[e.jsx("span",{className:"text-slate-500",children:w.label}),e.jsx("span",{className:"text-slate-300 font-medium text-right",children:w.val})]},D))})]}),Ot=({mode:t})=>{const l=a.useRef(null),r=a.useRef(null);return a.useEffect(()=>{const c=l.current,d=r.current;if(!c||!d)return;const s=c.getContext("2d");if(!s)return;let h;const g=()=>{const D=window.devicePixelRatio||1,y=d.getBoundingClientRect();c.width=y.width*D,c.height=y.height*D},v=new ResizeObserver(g);v.observe(d),g();const w=()=>{const D=performance.now()/1e3,y=c.width,f=c.height,C=window.devicePixelRatio||1;if(y===0||f===0){h=requestAnimationFrame(w);return}s.setTransform(1,0,0,1,0,0),s.fillStyle="#000000",s.fillRect(0,0,y,f),s.scale(C,C);const b=y/C,p=f/C;s.strokeStyle="#334155",s.lineWidth=1,s.setLineDash([4,4]);const M=t==="DBTP"?p*.3:p*.5;if(t==="LUFS"){s.beginPath(),s.moveTo(0,M),s.lineTo(b,M),s.stroke(),s.fillStyle="#22d3ee",s.font="bold 12px monospace",s.fillText("TARGET (-14 LUFS)",10,M-10),s.fillStyle="rgba(34, 211, 238, 0.15)",s.strokeStyle="#22d3ee",s.lineWidth=2,s.setLineDash([]),s.beginPath(),s.moveTo(0,p);const G=D*1.5;for(let z=0;z<=b;z+=2){const T=Math.sin(z*.015+G)*12+Math.sin(z*.03-G*1.2)*6+Math.sin(z*.005+G*.5)*15,S=M+35+T;s.lineTo(z,S)}s.lineTo(b,p),s.fill(),s.stroke(),s.fillStyle="#94a3b8",s.font="12px monospace",s.textAlign="center",s.fillText("比喻: 河流的水位 (平均能量)",b/2,p-20),s.textAlign="left"}if(t==="DBTP"){s.strokeStyle="#f87171",s.lineWidth=2,s.setLineDash([]),s.beginPath(),s.moveTo(0,M),s.lineTo(b,M),s.stroke(),s.fillStyle="#f87171",s.font="bold 12px monospace",s.fillText("CEILING (-1.0 dBTP)",10,M-10);const G=p*.65,z=D*120;s.strokeStyle="#f87171",s.lineWidth=2,s.beginPath();for(let S=0;S<=b;S++){const E=z%(b+300)-150,F=Math.abs(S-E);let P=0;F<100&&(P=Math.max(0,1-F/40)*Math.cos(F*.12));const m=G-P*(p*.4);S===0?s.moveTo(S,m):s.lineTo(S,m)}s.stroke();const T=30;for(let S=0;S<=b;S+=T){const E=z%(b+300)-150,F=Math.abs(S-E);let P=0;F<100&&(P=Math.max(0,1-F/40)*Math.cos(F*.12));const m=G-P*(p*.4);s.beginPath(),s.moveTo(S,p),s.lineTo(S,m),s.strokeStyle="#334155",s.lineWidth=1,s.stroke(),s.beginPath(),s.arc(S,m,3,0,Math.PI*2),s.fillStyle="white",s.fill()}s.fillStyle="#94a3b8",s.font="12px monospace",s.textAlign="center",s.fillText("比喻: 触碰天花板 (防削波)",b/2,p-20),s.textAlign="left"}if(t==="LU"){const T=p*.5+Math.sin(D*2.5)*(p*.15);s.fillStyle="#334155",s.fillRect(b/2-60-40,M,40,p-M),s.fillStyle="#22d3ee",s.fillRect(b/2-60-40-10,M,60,2),s.font="bold 12px monospace",s.fillText("Target",b/2-60-40,M-10),s.fillStyle="#eab308",s.fillRect(b/2+60,T,40,p-T),s.fillText("Current",b/2+60,T-10);const S=b/2;s.strokeStyle="white",s.lineWidth=1,s.setLineDash([2,2]),s.beginPath(),s.moveTo(b/2-60,M),s.lineTo(b/2+60,M),s.moveTo(b/2+60,T),s.lineTo(b/2+60+40,T),s.stroke(),s.setLineDash([]),s.beginPath(),s.moveTo(S,M),s.lineTo(S,T),s.stroke();const F=-((T-M)/5).toFixed(1);s.fillStyle="white",s.font="bold 16px monospace",s.textAlign="left",s.fillText(`${F>0?"+":""}${F} LU`,S+10,(M+T)/2+5),s.fillStyle="#94a3b8",s.font="12px monospace",s.textAlign="center",s.fillText("比喻: 两个高度的差值 (相对距离)",b/2,p-20),s.textAlign="left"}h=requestAnimationFrame(w)};return w(),()=>{cancelAnimationFrame(h),v.disconnect()}},[t]),e.jsx("div",{ref:r,className:"w-full h-full bg-black relative",children:e.jsx("canvas",{ref:l,className:"block w-full h-full"})})},_t=()=>e.jsxs("div",{className:"max-w-5xl mx-auto space-y-10 pb-12",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"交付标准速查表"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"选择错误的响度标准会导致平台强制压缩音量（惩罚性衰减），或因电平过低导致用户听不清。"})]}),e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl overflow-hidden shadow-lg",children:[e.jsxs("div",{className:"bg-slate-800/50 p-4 border-b border-slate-700 flex items-center gap-2",children:[e.jsx(Ft,{className:"text-green-400"}),e.jsx("h3",{className:"font-bold text-white",children:"1. 影视 / 广播 (最严格)"})]}),e.jsx("div",{className:"p-0",children:e.jsxs("table",{className:"w-full text-left text-xs text-slate-400",children:[e.jsx("thead",{className:"bg-slate-800 text-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"平台/规范"}),e.jsx("th",{className:"p-4",children:"目标响度"}),e.jsx("th",{className:"p-4",children:"真峰值 (dBTP)"}),e.jsx("th",{className:"p-4",children:"备注"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-800",children:[e.jsxs("tr",{className:"hover:bg-slate-800/30",children:[e.jsx("td",{className:"p-4 font-bold text-white",children:"EBU R128 (欧洲)"}),e.jsx("td",{className:"p-4 font-mono text-green-400 font-bold",children:"-23 LUFS"}),e.jsx("td",{className:"p-4 font-mono",children:"-1.0 dBTP"}),e.jsx("td",{className:"p-4",children:"绝对红线，误差通常只允许 ±0.5 LU"})]}),e.jsxs("tr",{className:"hover:bg-slate-800/30",children:[e.jsx("td",{className:"p-4 font-bold text-white",children:"中国广电 (GY/T 262)"}),e.jsx("td",{className:"p-4 font-mono text-green-400 font-bold",children:"-23 LUFS"}),e.jsx("td",{className:"p-4 font-mono",children:"-1.0 dBTP"}),e.jsx("td",{className:"p-4",children:"源自 ITU-R BS.1770"})]}),e.jsxs("tr",{className:"hover:bg-slate-800/30",children:[e.jsx("td",{className:"p-4 font-bold text-white",children:"日本电视 (TR-B32)"}),e.jsx("td",{className:"p-4 font-mono text-green-400 font-bold",children:"-24 LUFS"}),e.jsx("td",{className:"p-4 font-mono",children:"-1.0 dBTP"}),e.jsx("td",{className:"p-4",children:"比欧洲标准略低"})]}),e.jsxs("tr",{className:"hover:bg-slate-800/30",children:[e.jsx("td",{className:"p-4 font-bold text-white",children:"Netflix / Disney+"}),e.jsx("td",{className:"p-4 font-mono text-green-400 font-bold",children:"-27 LUFS"}),e.jsx("td",{className:"p-4 font-mono",children:"-2.0 dBTP"}),e.jsx("td",{className:"p-4",children:"基于对话门限 (Dialogue-gated) 测量"})]})]})]})})]}),e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl overflow-hidden shadow-lg",children:[e.jsxs("div",{className:"bg-slate-800/50 p-4 border-b border-slate-700 flex items-center gap-2",children:[e.jsx(st,{className:"text-cyan-400"}),e.jsx("h3",{className:"font-bold text-white",children:"2. 网络视频 (最常用)"})]}),e.jsx("div",{className:"p-0",children:e.jsxs("table",{className:"w-full text-left text-xs text-slate-400",children:[e.jsx("thead",{className:"bg-slate-800 text-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"平台"}),e.jsx("th",{className:"p-4",children:"推荐目标"}),e.jsx("th",{className:"p-4",children:"真峰值 (dBTP)"}),e.jsx("th",{className:"p-4",children:"处理机制"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-800",children:[e.jsxs("tr",{className:"hover:bg-slate-800/30",children:[e.jsx("td",{className:"p-4 font-bold text-white",children:"YouTube"}),e.jsx("td",{className:"p-4 font-mono text-cyan-400 font-bold",children:"-14 LUFS"}),e.jsx("td",{className:"p-4 font-mono",children:"-1.0 dBTP"}),e.jsx("td",{className:"p-4 text-orange-400",children:"超过 -14 会被强制拉低，低于不拉高"})]}),e.jsxs("tr",{className:"hover:bg-slate-800/30",children:[e.jsx("td",{className:"p-4 font-bold text-white",children:"Bilibili (B站)"}),e.jsx("td",{className:"p-4 font-mono text-cyan-400 font-bold",children:"-16 ~ -14 LUFS"}),e.jsx("td",{className:"p-4 font-mono",children:"-1.0 dBTP"}),e.jsx("td",{className:"p-4",children:"近期标准趋向于 -14 LUFS"})]}),e.jsxs("tr",{className:"hover:bg-slate-800/30",children:[e.jsx("td",{className:"p-4 font-bold text-white",children:"Spotify / Apple Music"}),e.jsx("td",{className:"p-4 font-mono text-cyan-400 font-bold",children:"-14 LUFS"}),e.jsx("td",{className:"p-4 font-mono",children:"-1.0 dBTP"}),e.jsx("td",{className:"p-4",children:"开启“音量标准化”时生效"})]})]})]})})]}),e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-2xl overflow-hidden shadow-lg",children:[e.jsxs("div",{className:"bg-slate-800/50 p-4 border-b border-slate-700 flex items-center gap-2",children:[e.jsx(Bt,{className:"text-purple-400"}),e.jsx("h3",{className:"font-bold text-white",children:"3. 短视频 / 手机端"})]}),e.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-4xl font-black text-purple-400 mb-2 font-mono",children:["-13 ~ -15 ",e.jsx("span",{className:"text-base text-slate-500 font-bold",children:"LUFS"})]}),e.jsxs("p",{className:"text-xs text-slate-400 leading-relaxed",children:["抖音、快手、Instagram Reels 等竖屏平台。",e.jsx("br",{}),"由于主要在手机外放或嘈杂环境下观看，音量通常做得比较“满”。"]})]}),e.jsxs("div",{className:"bg-slate-800 p-4 rounded border border-slate-700",children:[e.jsx("h4",{className:"text-xs font-bold text-white mb-2",children:"混音建议："}),e.jsxs("ul",{className:"list-disc pl-4 text-[10px] text-slate-400 space-y-1",children:[e.jsx("li",{children:"不要保留太大的动态范围（Dynamic Range），稍微压得平一点。"}),e.jsx("li",{children:"切除 80Hz 以下的超低频（手机喇叭放不出来，不仅浪费能量还会导致破音）。"}),e.jsx("li",{children:"人声频率（1kHz - 4kHz）要稍微突出。"})]})]})]})]})]}),Wt=()=>{const[t,l]=a.useState("K_WEIGHT");return e.jsxs("div",{className:"max-w-5xl mx-auto h-full flex flex-col",children:[e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsxs("button",{onClick:()=>l("K_WEIGHT"),className:`flex-1 p-4 rounded-xl border text-left transition-all ${t==="K_WEIGHT"?"bg-cyan-900/20 border-cyan-500 ring-1 ring-cyan-500/50":"bg-slate-900 border-slate-700 hover:border-slate-600"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ot,{size:20,className:t==="K_WEIGHT"?"text-cyan-400":"text-slate-500"}),e.jsx("span",{className:`font-bold ${t==="K_WEIGHT"?"text-white":"text-slate-400"}`,children:"K-加权 (K-Weighting)"})]}),e.jsx("p",{className:"text-[10px] text-slate-500",children:"模拟人头声学效应。为什么低频很响但读数却很低？"})]}),e.jsxs("button",{onClick:()=>l("GATING"),className:`flex-1 p-4 rounded-xl border text-left transition-all ${t==="GATING"?"bg-emerald-900/20 border-emerald-500 ring-1 ring-emerald-500/50":"bg-slate-900 border-slate-700 hover:border-slate-600"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(lt,{size:20,className:t==="GATING"?"text-emerald-400":"text-slate-500"}),e.jsx("span",{className:`font-bold ${t==="GATING"?"text-white":"text-slate-400"}`,children:"门限模拟 (Gating Sim)"})]}),e.jsx("p",{className:"text-[10px] text-slate-500",children:"实时演示静音片段如何影响平均读数。"})]})]}),e.jsx("div",{className:"flex-1 bg-slate-900 rounded-2xl border border-slate-800 p-6 relative overflow-hidden",children:t==="K_WEIGHT"?e.jsx(Kt,{}):e.jsx(Yt,{})})]})},Kt=()=>{const[t,l]=a.useState(100),[r,c]=a.useState(-20),d=f=>{let C=0;return f<100&&(C-=(100-f)*.15),f>1e3&&(C+=Math.min(4,Math.log10(f/1e3)*4)),C},s=d(t),h=r+s,g=600,v=200,w=f=>Math.log10(f/20)/Math.log10(2e4/20)*g,D=f=>v/2-f*5;let y=`M ${w(20)} ${D(d(20))}`;for(let f=20;f<=2e4;f+=f<100?10:f<1e3?100:1e3)y+=` L ${w(f)} ${D(d(f))}`;return e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8 h-full",children:[e.jsxs("div",{className:"flex-1 relative flex flex-col",children:[e.jsxs("div",{className:"absolute top-0 right-0 text-[10px] text-slate-500 font-mono text-right",children:["Standard Source:",e.jsx("br",{}),"ITU-R BS.1770-4 Annex 1",e.jsx("br",{}),"GY/T 262-2012"]}),e.jsxs("div",{className:"relative border border-slate-700 bg-slate-950/50 rounded-lg h-64 mt-8 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 flex flex-col justify-between pointer-events-none p-4 opacity-20",children:[e.jsx("div",{className:"border-b border-slate-500 h-1/4"}),e.jsx("div",{className:"border-b border-slate-500 h-1/4"}),e.jsx("div",{className:"border-b border-slate-500 h-1/4"}),e.jsx("div",{className:"border-b border-slate-500 h-1/4"})]}),e.jsxs("svg",{className:"w-full h-full p-4 overflow-visible",preserveAspectRatio:"none",viewBox:`0 0 ${g} ${v}`,children:[e.jsx("line",{x1:"0",y1:v/2,x2:g,y2:v/2,stroke:"#475569",strokeDasharray:"4,4"}),e.jsx("text",{x:"5",y:v/2-5,fontSize:"10",fill:"#64748b",children:"0 dB"}),e.jsx("path",{d:y,fill:"none",stroke:"#22d3ee",strokeWidth:"2",vectorEffect:"non-scaling-stroke"}),e.jsx("circle",{cx:w(t),cy:D(s),r:"6",fill:"white",stroke:"#22d3ee",strokeWidth:"2",className:"transition-all duration-75 shadow-lg"}),e.jsx("line",{x1:w(t),y1:v,x2:w(t),y2:D(s),stroke:"#22d3ee",strokeDasharray:"2,2",opacity:"0.5"})]}),e.jsxs("div",{className:"absolute bottom-1 left-4 right-4 flex justify-between text-[9px] text-slate-500 font-mono",children:[e.jsx("span",{children:"20Hz"}),e.jsx("span",{children:"100Hz"}),e.jsx("span",{children:"1kHz"}),e.jsx("span",{children:"10kHz"})]})]}),e.jsxs("div",{className:"mt-8 flex gap-8",children:[e.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg flex-1 text-center border border-slate-700",children:[e.jsx("div",{className:"text-xs text-slate-400 mb-1",children:"物理电平 (RMS)"}),e.jsxs("div",{className:"text-2xl font-mono font-bold text-slate-200",children:[r.toFixed(1)," ",e.jsx("span",{className:"text-xs",children:"dBFS"})]})]}),e.jsx("div",{className:"flex items-center text-slate-500",children:e.jsx(it,{})}),e.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg flex-1 text-center border border-cyan-500/30 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-cyan-900/20"}),e.jsx("div",{className:"text-xs text-cyan-400 mb-1 font-bold relative z-10",children:"感知响度 (LKFS)"}),e.jsx("div",{className:"text-2xl font-mono font-bold text-cyan-300 relative z-10",children:h.toFixed(1)}),e.jsxs("div",{className:"text-[10px] text-cyan-500/70 mt-1 relative z-10",children:["K-Weighting Gain: ",s>0?"+":"",s.toFixed(1)," dB"]})]})]})]}),e.jsxs("div",{className:"w-full lg:w-72 bg-slate-800 p-6 rounded-xl border border-slate-700 flex flex-col justify-center",children:[e.jsxs("h4",{className:"text-sm font-bold text-white mb-6 flex items-center gap-2",children:[e.jsx(We,{size:16})," 信号发生器"]}),e.jsx(Ve,{label:"频率 (Frequency)",value:t,min:20,max:2e4,step:10,onChange:l,unit:" Hz"}),e.jsx("div",{className:"text-[10px] text-slate-400 mb-6 italic bg-slate-900 p-3 rounded",children:t<100?"低频区域：人耳不敏感。K-加权会大幅衰减低频，防止低频能量（如隆隆声）导致响度读数虚高。":t>2e3?"高频区域：模拟头部声学效应（Head Transfer Function）。人耳对 2k-5kHz 最敏感，K-加权给予正增益。":"中频区域：接近线性。"}),e.jsx(Ve,{label:"输入电平 (Level)",value:r,min:-60,max:0,step:1,onChange:c,unit:" dB"})]})]})},Yt=()=>{const[t,l]=a.useState(!0),r=[{id:1,val:-20,width:30,type:"Dialogue"},{id:2,val:-80,width:20,type:"Silence"},{id:3,val:-18,width:40,type:"Action"},{id:4,val:-75,width:10,type:"Breath"}],c=t?r.filter(s=>s.val>-70):r,d=c.reduce((s,h)=>s+h.val*h.width,0)/c.reduce((s,h)=>s+h.width,0);return e.jsxs("div",{className:"flex flex-col h-full justify-center",children:[e.jsxs("div",{className:"absolute top-4 right-4 text-[10px] text-slate-500 font-mono text-right",children:["Standard Source:",e.jsx("br",{}),"ITU-R BS.1770-2 (Gating added)",e.jsx("br",{}),"GY/T 262-2012"]}),e.jsxs("div",{className:"flex items-end h-40 gap-1 mb-8 relative border-b border-slate-600",children:[r.map(s=>e.jsxs("div",{className:"relative h-full flex items-end group",style:{width:`${s.width}%`},children:[e.jsx("div",{className:`w-full transition-all duration-300 ${s.val<=-70?"bg-slate-700":"bg-emerald-500"}`,style:{height:`${(s.val+80)*1.5}%`,opacity:t&&s.val<=-70?.2:1}}),e.jsxs("div",{className:"absolute bottom-2 left-1 text-[9px] text-white font-bold bg-black/50 px-1 rounded backdrop-blur-sm truncate max-w-full",children:[s.type," (",s.val,"dB)"]}),t&&s.val<=-70&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(lt,{className:"text-red-500 w-6 h-6 opacity-80"})})]},s.id)),e.jsx("div",{className:"absolute w-full border-t border-dashed border-red-500/50 flex items-center",style:{bottom:`${10*1.5}%`},children:e.jsx("span",{className:"text-[9px] text-red-400 bg-slate-900 px-1 ml-auto",children:"-70 LKFS (Abs Threshold)"})})]}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8 bg-slate-800 p-6 rounded-xl border border-slate-700",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-bold text-white mb-2",children:"算法控制"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ut,{label:"启用门限 (Gating)",checked:t,onChange:l}),e.jsx("div",{className:"text-[10px] text-slate-400 leading-tight flex-1",children:t?"算法会忽略低于 -70 LKFS 的片段。这防止了有人通过加入大量静音段来作弊（拉低平均数值），从而在有声部分做得极响。":"计算所有片段的平均值。大量的静音段会严重拉低整体读数，导致最终结果不准确。"})]})]}),e.jsx("div",{className:"w-px h-16 bg-slate-700 hidden md:block"}),e.jsxs("div",{className:"text-center w-full md:w-auto",children:[e.jsx("div",{className:"text-xs text-slate-400 mb-1",children:"Integrated Loudness (全片平均)"}),e.jsxs("div",{className:`text-4xl font-mono font-bold transition-all ${t?"text-emerald-400":"text-yellow-500"}`,children:[d.toFixed(1)," ",e.jsx("span",{className:"text-sm font-normal text-slate-500",children:"LKFS"})]}),!t&&e.jsx("div",{className:"text-[9px] text-yellow-500 mt-1",children:"⚠️ 读数虚低 (被静音拉低)"})]})]})]})},Vt=()=>{const[t,l]=a.useState("CHAIN");return e.jsxs("div",{className:"max-w-6xl mx-auto h-full flex flex-col",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs("button",{onClick:()=>l("CHAIN"),className:`flex-1 p-4 rounded-xl border text-left transition-all ${t==="CHAIN"?"bg-blue-900/20 border-blue-500 ring-1 ring-blue-500/50":"bg-slate-900 border-slate-700 hover:border-slate-600"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(_e,{size:20,className:t==="CHAIN"?"text-blue-400":"text-slate-500"}),e.jsx("span",{className:`font-bold ${t==="CHAIN"?"text-white":"text-slate-400"}`,children:"1. 信号处理链路"})]}),e.jsx("p",{className:"text-[10px] text-slate-500",children:"GY/T 262 图1：多声道响度客观测量算法方框图可视化。"})]}),e.jsxs("button",{onClick:()=>l("GATING"),className:`flex-1 p-4 rounded-xl border text-left transition-all ${t==="GATING"?"bg-emerald-900/20 border-emerald-500 ring-1 ring-emerald-500/50":"bg-slate-900 border-slate-700 hover:border-slate-600"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Mt,{size:20,className:t==="GATING"?"text-emerald-400":"text-slate-500"}),e.jsx("span",{className:`font-bold ${t==="GATING"?"text-white":"text-slate-400"}`,children:"2. 门限与积分逻辑"})]}),e.jsx("p",{className:"text-[10px] text-slate-500",children:"GY/T 262 核心：如何剔除静音段以计算 Integrated Loudness。"})]})]}),e.jsxs("div",{className:"flex-1 bg-slate-900 rounded-2xl border border-slate-800 p-4 lg:p-8 relative overflow-hidden flex flex-col",children:[e.jsx("div",{className:"absolute top-4 right-4 text-[10px] text-slate-600 font-mono text-right z-10 bg-slate-900/80 backdrop-blur-sm px-2 rounded",children:"ITU-R BS.1770-4"}),e.jsx("div",{className:"flex-1 overflow-x-auto custom-scrollbar pb-4 -mx-4 px-4 lg:mx-0 lg:px-0",children:e.jsx("div",{className:"min-w-max h-full flex flex-col justify-center",children:t==="CHAIN"?e.jsx(qt,{}):e.jsx(Zt,{})})}),e.jsxs("div",{className:"lg:hidden text-center mt-2 text-[10px] text-slate-500 flex items-center justify-center gap-1 animate-pulse",children:[e.jsx(it,{size:10})," 滑动查看完整流程"]})]})]})},qt=()=>e.jsxs("div",{className:"flex flex-col items-center justify-center gap-8 py-8",children:[e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx("div",{className:"flex flex-col gap-2",children:["L","R","C","Ls","Rs"].map((t,l)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-12 h-10 bg-slate-800 border border-slate-600 rounded flex items-center justify-center text-xs font-bold text-slate-300 shadow-sm",children:t}),e.jsx(je,{size:14,className:"text-slate-600"})]},t))}),e.jsxs("div",{className:"flex flex-col gap-2 relative p-4 border-2 border-dashed border-cyan-500/30 rounded-xl bg-cyan-900/5",children:[e.jsx("div",{className:"absolute -top-3 left-4 bg-slate-900 px-2 text-[10px] text-cyan-500 font-bold whitespace-nowrap",children:"K-Weighting (预滤波)"}),["L","R","C","Ls","Rs"].map((t,l)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"w-24 h-10 bg-cyan-900/40 border border-cyan-600 rounded flex flex-col items-center justify-center text-[9px] text-cyan-200 shadow-sm",children:[e.jsx("span",{children:"Pre-Filter"}),e.jsx("span",{className:"opacity-50 text-[8px]",children:"+ RLB"})]}),e.jsx(je,{size:14,className:"text-slate-600"})]},l))]}),e.jsx("div",{className:"flex flex-col gap-2",children:["L","R","C","Ls","Rs"].map((t,l)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 h-10 bg-indigo-900/40 border border-indigo-500 rounded flex items-center justify-center text-[10px] text-indigo-200 font-mono",children:"Mean Sq"}),e.jsx(je,{size:14,className:"text-slate-600"})]},l))}),e.jsx("div",{className:"flex flex-col gap-2",children:["L","R","C","Ls","Rs"].map((t,l)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-16 h-10 border rounded flex items-center justify-center text-[10px] font-bold 
                        ${t.includes("s")?"bg-orange-900/40 border-orange-500 text-orange-200":"bg-slate-800 border-slate-600 text-slate-400"}`,children:t.includes("s")?"+1.5dB":"0dB"}),e.jsx(je,{size:14,className:"text-slate-600"})]},l))}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"w-16 h-64 bg-slate-800 border-2 border-slate-500 rounded-full flex items-center justify-center relative",children:[e.jsx("span",{className:"text-4xl text-white font-serif",children:"Σ"}),e.jsx("div",{className:"absolute -left-4 top-[10%] w-4 h-px bg-slate-600"}),e.jsx("div",{className:"absolute -left-4 top-[30%] w-4 h-px bg-slate-600"}),e.jsx("div",{className:"absolute -left-4 top-[50%] w-4 h-px bg-slate-600"}),e.jsx("div",{className:"absolute -left-4 top-[70%] w-4 h-px bg-slate-600"}),e.jsx("div",{className:"absolute -left-4 top-[90%] w-4 h-px bg-slate-600"})]}),e.jsx(je,{size:14,className:"text-slate-600 mx-2"})]}),e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsxs("div",{className:"w-32 h-16 bg-emerald-900/40 border-2 border-emerald-500 rounded-lg flex flex-col items-center justify-center relative",children:[e.jsx("div",{className:"text-xs font-bold text-emerald-400",children:"Gating Block"}),e.jsx("div",{className:"text-[9px] text-emerald-300",children:"-70LKFS / -10LU"}),e.jsx("div",{className:"absolute -bottom-8",children:e.jsx(be,{size:14,className:"text-emerald-500"})})]}),e.jsx("div",{className:"mt-4 w-32 h-12 bg-white text-black font-bold rounded-lg flex items-center justify-center shadow-[0_0_20px_rgba(255,255,255,0.2)]",children:"LKFS Output"})]})]}),e.jsx("div",{className:"text-[10px] text-slate-500 bg-slate-900/50 p-2 rounded border border-slate-800 text-center max-w-2xl mt-8",children:"* LFE (低频效果声道) 不参与响度计算。环绕声道 (Ls, Rs) 需要增加 1.5dB (~1.41倍) 的权重以模拟包围感对响度感知的影响。"})]}),Zt=()=>e.jsxs("div",{className:"flex gap-12 justify-center py-8 px-4",children:[e.jsxs("div",{className:"w-64 flex flex-col justify-center shrink-0",children:[e.jsxs("h4",{className:"text-sm font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(at,{size:16,className:"text-purple-400"})," 滑动窗口 (Windowing)"]}),e.jsxs("div",{className:"relative h-48 border-l border-slate-700 ml-4",children:[e.jsx("div",{className:"absolute -left-1 top-0 w-2 h-2 bg-slate-500 rounded-full"}),e.jsx("div",{className:"absolute -left-1 bottom-0 w-2 h-2 bg-slate-500 rounded-full"}),e.jsx("div",{className:"absolute top-0 left-4 w-40 h-12 bg-purple-900/40 border border-purple-500 rounded flex items-center justify-center text-[10px] text-purple-200 shadow-lg",children:"Block N (400ms)"}),e.jsx("div",{className:"absolute top-4 left-8 w-40 h-12 bg-purple-900/40 border border-purple-500 rounded flex items-center justify-center text-[10px] text-purple-200 opacity-80 shadow-lg",children:"Block N+1"}),e.jsx("div",{className:"absolute top-8 left-12 w-40 h-12 bg-purple-900/40 border border-purple-500 rounded flex items-center justify-center text-[10px] text-purple-200 opacity-60 shadow-lg",children:"Block N+2"}),e.jsx("div",{className:"absolute bottom-0 left-4 text-[10px] text-slate-500 w-48 leading-relaxed",children:"每个测量块长度 400ms，重叠 75% (即每 100ms 移动一次)。这确保了对瞬态声音的捕捉。"})]})]}),e.jsx("div",{className:"w-px bg-slate-800 shrink-0"}),e.jsxs("div",{className:"flex-1 flex flex-col items-center max-w-lg min-w-[200px]",children:[e.jsx("div",{className:"text-[10px] text-slate-500 mb-4 font-mono",children:"FLOWCHART: 2-STAGE GATING"}),e.jsx("div",{className:"w-48 h-10 bg-slate-800 border border-slate-600 rounded flex items-center justify-center text-xs text-white shadow-sm",children:"输入信号 (经过K加权)"}),e.jsx(be,{size:16,className:"text-slate-600 my-1"}),e.jsxs("div",{className:"w-48 h-12 bg-purple-900/20 border border-purple-500 rounded flex flex-col items-center justify-center text-xs text-purple-200",children:[e.jsx("span",{className:"font-bold",children:"分割为 400ms 块"}),e.jsx("span",{className:"text-[9px]",children:"75% 重叠"})]}),e.jsx(be,{size:16,className:"text-slate-600 my-1"}),e.jsxs("div",{className:"relative w-48 h-24 flex items-center justify-center my-2",children:[e.jsx("div",{className:"absolute w-20 h-20 bg-slate-900 border-2 border-orange-500 transform rotate-45 z-0"}),e.jsxs("div",{className:"relative z-10 text-center flex flex-col items-center justify-center gap-1 pointer-events-none",children:[e.jsx("div",{className:"text-[9px] text-orange-400 font-bold bg-slate-900/80 px-1",children:"绝对门限"}),e.jsx("div",{className:"text-[10px] text-white font-mono bg-slate-900/80 px-1",children:"> -70 LKFS?"})]}),e.jsx("div",{className:"absolute -right-8 top-1/2 text-[10px] text-red-500 font-bold",children:"No"}),e.jsx("div",{className:"absolute bottom-[-20px] text-[10px] text-green-500 font-bold",children:"Yes"})]}),e.jsx(be,{size:16,className:"text-slate-600 my-1"}),e.jsx("div",{className:"w-48 h-10 bg-slate-800 border border-slate-600 rounded flex items-center justify-center text-xs text-slate-300",children:"计算临时平均响度 (L_rel)"}),e.jsx(be,{size:16,className:"text-slate-600 my-1"}),e.jsxs("div",{className:"relative w-48 h-24 flex items-center justify-center my-2",children:[e.jsx("div",{className:"absolute w-20 h-20 bg-slate-900 border-2 border-cyan-500 transform rotate-45 z-0"}),e.jsxs("div",{className:"relative z-10 text-center flex flex-col items-center justify-center gap-1 pointer-events-none",children:[e.jsx("div",{className:"text-[9px] text-cyan-400 font-bold bg-slate-900/80 px-1",children:"相对门限"}),e.jsx("div",{className:"text-[10px] text-white font-mono bg-slate-900/80 px-1",children:"> (L_rel - 10) ?"})]}),e.jsx("div",{className:"absolute -right-8 top-1/2 text-[10px] text-red-500 font-bold",children:"No"}),e.jsx("div",{className:"absolute bottom-[-20px] text-[10px] text-green-500 font-bold",children:"Yes"})]}),e.jsx(be,{size:16,className:"text-slate-600 my-1"}),e.jsx("div",{className:"w-48 h-12 bg-emerald-600 text-white font-bold rounded-lg flex items-center justify-center shadow-[0_0_20px_rgba(16,185,129,0.3)]",children:"Integrated Loudness"})]})]}),Xt=()=>{const[t,l]=a.useState(1);return e.jsxs("div",{className:"max-w-6xl mx-auto space-y-12 pb-12",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-900 to-slate-900 p-6 rounded-2xl border border-indigo-500/30 shadow-2xl flex flex-col md:flex-row items-center gap-6",children:[e.jsx("div",{className:"p-4 bg-indigo-600 rounded-full shadow-lg shrink-0",children:e.jsx(Xe,{size:32,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"后期响度一句话口诀"}),e.jsx("div",{className:"text-lg md:text-2xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-emerald-400 italic",children:'"对白定地基，音乐做气氛。不顶峰值，不凑数字，最后一次看 LUFS。"'})]})]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2 mb-8",children:[e.jsx(_e,{className:"text-orange-400"})," 标准后期响度工作流 (实操版)"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx(Ne,{number:"01",title:"声音设计",icon:e.jsx(at,{size:20}),isActive:t===1,onClick:()=>l(1),summary:"先别开响度表"}),e.jsx(Ne,{number:"02",title:"对白定基准",icon:e.jsx(Ye,{size:20}),isActive:t===2,onClick:()=>l(2),summary:"确定全片地基"}),e.jsx(Ne,{number:"03",title:"音乐平衡",icon:e.jsx(xe,{size:20}),isActive:t===3,onClick:()=>l(3),summary:"不抢中频"}),e.jsx(Ne,{number:"04",title:"整体测量",icon:e.jsx(xt,{size:20}),isActive:t===4,onClick:()=>l(4),summary:"看 Integrated"}),e.jsx(Ne,{number:"05",title:"统一交付",icon:e.jsx(be,{size:20}),isActive:t===5,onClick:()=>l(5),summary:"Limiter 收尾"})]}),e.jsxs("div",{className:"mt-6 bg-slate-900 border border-slate-800 rounded-xl p-8 min-h-[200px] relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5",children:e.jsx("span",{className:"text-9xl font-black text-white",children:t})}),t===1&&e.jsxs("div",{className:"animate-in fade-in slide-in-from-right-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Step 1: 声音设计与编辑"}),e.jsxs("div",{className:"text-slate-300 space-y-4",children:[e.jsxs("p",{children:["在这一步，",e.jsx("span",{className:"text-red-400 font-bold",children:"不要打开响度表"}),"。忘掉参数，用耳朵去听。"]}),e.jsxs("ul",{className:"list-disc pl-5 space-y-2 text-sm text-slate-400",children:[e.jsx("li",{children:"关注对白是否自然清楚。"}),e.jsx("li",{children:"关注音乐的情绪起伏是否到位。"}),e.jsx("li",{children:"关注音效（SFX）是否突兀。"})]}),e.jsx("div",{className:"bg-yellow-900/20 p-3 rounded border border-yellow-500/30 text-xs text-yellow-200 inline-block mt-2",children:"⚠️ 警告：过早关注数据会破坏艺术判断。"})]})]}),t===2&&e.jsxs("div",{className:"animate-in fade-in slide-in-from-right-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Step 2: 对白定基准 (最关键)"}),e.jsxs("div",{className:"text-slate-300 space-y-4",children:[e.jsxs("p",{children:["调整对白音量，使其成为整个片子的“锚点”。此时主要看 ",e.jsx("span",{className:"font-mono text-cyan-400",children:"Short-term LUFS"}),"。"]}),e.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg border border-slate-700",children:[e.jsx("h4",{className:"text-sm font-bold text-white mb-2",children:"网络视频推荐目标 (Short-term)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-slate-900 p-3 rounded text-center",children:[e.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"普通对白"}),e.jsx("div",{className:"text-lg font-mono font-bold text-emerald-400",children:"-18 ~ -20 LUFS"})]}),e.jsxs("div",{className:"bg-slate-900 p-3 rounded text-center",children:[e.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"情绪爆发/争吵"}),e.jsx("div",{className:"text-lg font-mono font-bold text-yellow-400",children:"-16 LUFS 左右"})]})]})]})]})]}),t===3&&e.jsxs("div",{className:"animate-in fade-in slide-in-from-right-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Step 3: 音乐压在对白下面"}),e.jsxs("div",{className:"text-slate-300 space-y-4",children:[e.jsx("p",{children:"根据对白基准，调整背景音乐 (BGM) 的电平。确保音乐不抢占人声频段（中频）。"}),e.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg border border-slate-700",children:[e.jsx("h4",{className:"text-sm font-bold text-white mb-2",children:"经验法则 (非死规矩)"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex justify-between border-b border-slate-700 pb-2",children:[e.jsx("span",{className:"text-slate-400",children:"有人说话时"}),e.jsxs("span",{className:"text-white",children:["音乐比对白低 ",e.jsx("span",{className:"text-cyan-400 font-bold",children:"6 ~ 10 LU"})]})]}),e.jsxs("li",{className:"flex justify-between pt-2",children:[e.jsx("span",{className:"text-slate-400",children:"无对白/转场时"}),e.jsx("span",{className:"text-white",children:"音乐可拉高接近对白响度"})]})]})]})]})]}),t===4&&e.jsxs("div",{className:"animate-in fade-in slide-in-from-right-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Step 4: 开表测量"}),e.jsxs("div",{className:"text-slate-300 space-y-4",children:[e.jsxs("p",{children:["现在才需要从头到尾播放一遍，查看 ",e.jsx("span",{className:"font-mono text-emerald-400",children:"Integrated LUFS"})," (全片平均) 和 ",e.jsx("span",{className:"font-mono text-red-400",children:"True Peak"}),"。"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"bg-slate-800 p-3 rounded",children:[e.jsx("span",{className:"block text-slate-500 text-xs mb-1",children:"目标 (Web)"}),e.jsx("span",{className:"font-mono font-bold text-white",children:"-14 LUFS"})]}),e.jsxs("div",{className:"bg-slate-800 p-3 rounded",children:[e.jsx("span",{className:"block text-slate-500 text-xs mb-1",children:"目标 (Broadcast)"}),e.jsx("span",{className:"font-mono font-bold text-white",children:"-23 LUFS"})]})]})]})]}),t===5&&e.jsxs("div",{className:"animate-in fade-in slide-in-from-right-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Step 5: 统一响度 (收尾)"}),e.jsxs("div",{className:"text-slate-300 space-y-4",children:[e.jsx("p",{children:"如果读数不达标，请按以下优先级进行调整："}),e.jsxs("ol",{className:"list-decimal pl-5 space-y-2 text-sm text-slate-400",children:[e.jsxs("li",{children:[e.jsx("strong",{className:"text-white",children:"Clip Gain / Track Gain:"})," 最推荐。整体推拉音量推子。"]}),e.jsxs("li",{children:[e.jsx("strong",{className:"text-white",children:"轻度压缩 (Compression):"})," 压低动态过大的部分。"]}),e.jsxs("li",{children:[e.jsx("strong",{className:"text-white",children:"限制器 (Limiter):"})," 挂在总线 (Master) 上的最后一道防线。"]})]}),e.jsxs("div",{className:"bg-slate-800 p-3 rounded border border-slate-600 mt-2",children:[e.jsx("div",{className:"text-xs font-bold text-cyan-400 mb-1",children:"推荐 Limiter 设置："}),e.jsxs("div",{className:"font-mono text-xs text-slate-300",children:["Ceiling: ",e.jsx("span",{className:"text-white",children:"-1.0 dBTP"}),e.jsx("br",{}),"Lookahead: ",e.jsx("span",{className:"text-white",children:"ON (开启)"}),e.jsx("br",{}),"Release: ",e.jsx("span",{className:"text-white",children:"Auto / 100ms+"})]})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[e.jsx(ke,{className:"text-red-500"})," 典型错误 (避坑指南)"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx($e,{title:"用 Limiter 硬顶响度",desc:"试图只靠压低阈值 (Threshold) 把 LUFS 从 -20 顶到 -14。",result:"声音变得干硬、甚至破音。就像把一张大照片硬塞进小相框。"}),e.jsx($e,{title:"盯着 Momentary 做混音",desc:"时刻看着瞬时响度表跳动，试图让它保持在 -14。",result:"完全错误。Momentary 只是给你看瞬态防爆的，不是用来做平衡的。"}),e.jsx($e,{title:"用 RMS 判断响度",desc:"还在用老式的 RMS 表头。",result:"RMS 反应不出人耳对中频的敏感度。可能 RMS 读数很高（低频多），但人耳听起来依然很轻。"})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[e.jsx(rt,{className:"text-cyan-500"})," 推荐工具箱"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-slate-900 p-4 rounded-xl border border-slate-800",children:[e.jsx("div",{className:"text-sm font-bold text-white mb-2",children:"免费 / 内置"}),e.jsxs("ul",{className:"text-xs text-slate-400 space-y-2",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(me,{size:12,className:"text-emerald-500"})," DaVinci Resolve Fairlight (自带 Loudness Meter)"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(me,{size:12,className:"text-emerald-500"})," Premiere Pro (Loudness Radar)"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(me,{size:12,className:"text-emerald-500"})," Youlean Loudness Meter (Free Version)"]})]})]}),e.jsxs("div",{className:"bg-slate-900 p-4 rounded-xl border border-slate-800",children:[e.jsx("div",{className:"text-sm font-bold text-white mb-2",children:"行业标准 (付费)"}),e.jsxs("ul",{className:"text-xs text-slate-400 space-y-2",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(me,{size:12,className:"text-purple-500"})," iZotope Insight 2"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(me,{size:12,className:"text-purple-500"})," Nugen VisLM (广电首选)"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(me,{size:12,className:"text-purple-500"})," Waves WLM Plus"]})]})]})]})]})]})]})},Ne=({number:t,title:l,icon:r,isActive:c,onClick:d,summary:s})=>e.jsxs("button",{onClick:d,className:`relative p-4 rounded-xl border text-left transition-all duration-300 group ${c?"bg-cyan-900/30 border-cyan-500 ring-1 ring-cyan-500/50":"bg-slate-900 border-slate-700 hover:border-slate-600"}`,children:[e.jsx("div",{className:`text-4xl font-black absolute top-2 right-2 opacity-10 ${c?"text-cyan-400":"text-slate-500"}`,children:t}),e.jsx("div",{className:`mb-3 ${c?"text-cyan-400":"text-slate-500 group-hover:text-slate-300"}`,children:r}),e.jsx("div",{className:`font-bold text-sm mb-1 ${c?"text-white":"text-slate-300"}`,children:l}),e.jsx("div",{className:"text-[10px] text-slate-500",children:s})]}),$e=({title:t,desc:l,result:r})=>e.jsxs("div",{className:"bg-slate-900 p-4 rounded-lg border border-slate-800 hover:border-red-900/50 transition-colors group",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ft,{size:16,className:"text-red-500"}),e.jsx("span",{className:"font-bold text-slate-200 text-sm",children:t})]}),e.jsx("p",{className:"text-xs text-slate-400 mb-2 pl-6",children:l}),e.jsxs("div",{className:"pl-6 text-[10px] text-red-400 flex gap-2",children:[e.jsx("span",{className:"font-bold shrink-0",children:"后果:"}),e.jsx("span",{children:r})]})]}),Qt=()=>e.jsx("div",{className:"h-full flex flex-col items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-2xl bg-slate-900 border border-slate-700 rounded-2xl overflow-hidden shadow-2xl",children:[e.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-900 p-6 border-b border-slate-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[e.jsx(pt,{size:20,className:"text-cyan-400"})," 响度速查手册"]}),e.jsx("div",{className:"text-[10px] text-slate-500",children:"Based on GY/T 377 & 262"})]}),e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-indigo-500/30 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-10",children:e.jsx(jt,{size:64})}),e.jsx("div",{className:"text-xs font-bold text-indigo-300 uppercase tracking-widest mb-2",children:"GOLDEN RULE"}),e.jsxs("p",{className:"text-sm font-medium text-slate-200 italic leading-relaxed",children:['"对白定地基，音乐做气氛。',e.jsx("br",{}),'不顶峰值，不凑数字，最后一次看 LUFS。"']})]})]}),e.jsxs("div",{className:"divide-y divide-slate-800",children:[e.jsx(ve,{q:"会不会炸麦/爆音?",a:"dBTP (真峰值)",val:"≤ -1.0 dBTP",color:"text-red-400",desc:"最后一道防线，防止DAC转换时削波。"}),e.jsx(ve,{q:"网络视频 (B站/油管)",a:"Web Standard",val:"-14 LUFS",color:"text-blue-400",desc:"超过 -14 会被强制拉低。低于不拉高。"}),e.jsx(ve,{q:"影视/广播 (最严)",a:"EBU R128",val:"-23 LUFS",color:"text-green-400",desc:"动态范围大。如果不达标会被电视台拒收。"}),e.jsx(ve,{q:"手机短视频 (抖音)",a:"Mobile",val:"-13 ~ -15 LUFS",color:"text-purple-400",desc:"稍微响一点，但不要太满。"}),e.jsx(ve,{q:"还差多少达标?",a:"LU (相对单位)",val:"+/- 0",color:"text-yellow-400",desc:"1 LU = 1 dB。用于描述与目标的差值。"})]})]})}),ve=({q:t,a:l,val:r,color:c,desc:d})=>e.jsxs("div",{className:"flex items-center p-5 hover:bg-slate-800/50 transition-colors group",children:[e.jsx("div",{className:"w-1/4 text-sm text-slate-400 font-medium",children:t}),e.jsx("div",{className:`w-1/4 text-sm font-bold font-mono ${c}`,children:l}),e.jsx("div",{className:"w-1/4 text-right text-xs font-mono text-slate-200 bg-slate-800/80 py-1 px-2 rounded inline-block border border-slate-700",children:r}),e.jsx("div",{className:"w-1/4 pl-4 text-[10px] text-slate-500 leading-tight opacity-50 group-hover:opacity-100 transition-opacity",children:d})]}),Jt=()=>e.jsxs("div",{className:"max-w-5xl mx-auto space-y-12 pb-12",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-900 to-slate-900 p-8 rounded-2xl border border-indigo-500/30 shadow-2xl",children:[e.jsxs("h2",{className:"text-3xl font-bold text-white mb-4 flex items-center gap-3",children:[e.jsx(ct,{size:32,className:"text-indigo-400"})," 为什么 LUFS ≠ RMS？"]}),e.jsxs("p",{className:"text-sm text-slate-300 leading-relaxed max-w-2xl",children:["LUFS = ",e.jsx("strong",{children:"加权能量"})," + ",e.jsx("strong",{children:"时间积分"})," + ",e.jsx("strong",{children:"门限筛选"}),"。",e.jsx("br",{}),"它解决了传统 RMS 电平无法反应人耳真实听感（对中频敏感、对低频迟钝）以及静音段拉低平均值的问题。"]})]}),e.jsxs("div",{className:"bg-slate-900 rounded-xl border border-slate-700 overflow-hidden",children:[e.jsx("div",{className:"bg-slate-800 p-4 border-b border-slate-700 flex justify-between items-center",children:e.jsx("h3",{className:"font-bold text-white flex items-center gap-2",children:"ITU-R BS.1770 总纲公式"})}),e.jsxs("div",{className:"p-10 flex flex-col items-center justify-center bg-slate-900",children:[e.jsx(es,{expression:"\\text{LUFS} = 10\\log_{10}\\left( \\frac{1}{T} \\int_0^T [K(x(t))]^2 \\cdot G(t) \\,dt \\right)",className:"text-xl md:text-3xl mb-8"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-slate-400 w-full max-w-3xl",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 border border-slate-700 rounded-lg bg-slate-800/50",children:[e.jsx("div",{className:"mt-1",children:e.jsx(Ze,{expression:"K(\\cdot)"})}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-cyan-400 block mb-1",children:"K-weighting 滤波"}),e.jsx("span",{children:"模拟人头声学效应。提升高频，衰减低频。让电信号能量接近听觉响度。"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 border border-slate-700 rounded-lg bg-slate-800/50",children:[e.jsx("div",{className:"mt-1",children:e.jsx(Ze,{expression:"G(t)"})}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-emerald-400 block mb-1",children:"Gating 门限函数"}),e.jsx("span",{children:"非线性筛选。剔除低于阈值（如 -70 LUFS）的静音片段，防止平均值被稀释。"})]})]})]})]})]}),e.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-2xl overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-900/30 to-slate-900 p-6 border-b border-slate-800",children:e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(gt,{size:24,className:"text-orange-400"})," 后期实操视角：这公式意味着什么？"]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 divide-y md:divide-y-0 md:divide-x divide-slate-800",children:[e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h4",{className:"text-lg font-bold text-cyan-400",children:"关于 K-Weighting"}),e.jsxs("div",{className:"text-sm text-slate-300 space-y-3",children:[e.jsx("p",{children:"你不需要自己设置 K-weighting，但你需要知道它的脾气："}),e.jsxs("ul",{className:"list-disc pl-5 space-y-2 text-slate-400",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"低频很多 ≠ 响度大："})," 轰鸣的低音（Bass/Sub）在 LUFS 算法里会被大幅衰减。"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"对白决定响度："})," 人声所在的中高频（1k-4kHz）在算法里权重最高。"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"结论："})," 如果觉得 LUFS 读数上不去，不要盲目加低频，试着提升中频清晰度。"]})]})]})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h4",{className:"text-lg font-bold text-emerald-400",children:"关于 Gating (门限)"}),e.jsxs("div",{className:"text-sm text-slate-300 space-y-3",children:[e.jsxs("p",{children:["Gating 对后期来说意味着 ",e.jsx("strong",{className:"text-white",children:"“安静不算数”"}),"。"]}),e.jsxs("ul",{className:"list-disc pl-5 space-y-2 text-slate-400",children:[e.jsx("li",{children:"黑场、空镜、环境静音段、片头前的空白，统统会被算法忽略。"}),e.jsxs("li",{children:[e.jsx("strong",{children:"误区："})," “我片子里有很多安静的留白，所以响度做不到 -14？”"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"正解："})," 错。Integrated LUFS 会自动剔除这些安静段，只计算有“有效声音”的部分。"]})]})]})]})]})]}),e.jsxs("div",{className:"bg-slate-800 rounded-xl border border-slate-700 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-slate-700 bg-slate-800",children:e.jsx("h3",{className:"font-bold text-white",children:"RMS vs LUFS 核心差异"})}),e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-900 text-slate-400",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"维度"}),e.jsx("th",{className:"p-4",children:"RMS (电平)"}),e.jsx("th",{className:"p-4 text-cyan-400",children:"LUFS (响度)"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-700 text-slate-300",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"p-4 font-bold",children:"频率感知"}),e.jsx("td",{className:"p-4 text-red-400",children:"❌ 无 (低频占优)"}),e.jsx("td",{className:"p-4 text-emerald-400",children:"✅ K-weighting (人耳曲线)"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"p-4 font-bold",children:"安静段处理"}),e.jsx("td",{className:"p-4 text-red-400",children:"❌ 平均值被拉低"}),e.jsx("td",{className:"p-4 text-emerald-400",children:"✅ Gating (自动剔除)"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"p-4 font-bold",children:"主观听感"}),e.jsx("td",{className:"p-4",children:"差"}),e.jsx("td",{className:"p-4 text-emerald-400",children:"高度一致"})]})]})]})]})]}),es=({expression:t,className:l})=>{const r=a.useRef(null);return a.useEffect(()=>{if(r.current&&window.katex)try{window.katex.render(t,r.current,{displayMode:!0,throwOnError:!1})}catch(c){console.error("KaTeX Error:",c),r.current.innerText=t}},[t]),e.jsx("div",{ref:r,className:l})},Ze=({expression:t,className:l})=>{const r=a.useRef(null);return a.useEffect(()=>{if(r.current&&window.katex)try{window.katex.render(t,r.current,{displayMode:!1,throwOnError:!1})}catch(c){console.error("KaTeX Error:",c),r.current.innerText=t}},[t]),e.jsx("span",{ref:r,className:l})},ts=()=>{const[t,l]=a.useState(0),r=[{id:0,title:"相位 (Phase)",icon:e.jsx(dt,{size:18}),color:"text-red-400"},{id:1,title:"声场 (Soundstage)",icon:e.jsx(nt,{size:18}),color:"text-blue-400"},{id:2,title:"影视 EQ",icon:e.jsx(Ye,{size:18}),color:"text-yellow-400"},{id:3,title:"动态控制",icon:e.jsx(xe,{size:18}),color:"text-emerald-400"},{id:4,title:"空间感",icon:e.jsx(Qe,{size:18}),color:"text-purple-400"},{id:5,title:"底噪管理",icon:e.jsx(Re,{size:18}),color:"text-slate-400"},{id:6,title:"监听与交付",icon:e.jsx(ot,{size:18}),color:"text-cyan-400"}];return e.jsxs("div",{className:"max-w-6xl mx-auto h-full flex flex-col lg:flex-row gap-6",children:[e.jsxs("div",{className:"w-full lg:w-64 flex flex-col gap-2 shrink-0",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-r from-slate-900 to-slate-800 rounded-xl border border-slate-700 mb-4",children:[e.jsxs("h3",{className:"font-bold text-white text-lg leading-tight",children:["第二层",e.jsx("br",{}),"质量指标"]}),e.jsxs("p",{className:"text-[10px] text-slate-400 mt-2",children:["响度只是及格线。",e.jsx("br",{}),"这些决定是否“专业”。"]})]}),e.jsx("div",{className:"flex flex-col gap-1 overflow-y-auto",children:r.map((c,d)=>e.jsxs("button",{onClick:()=>l(d),className:`p-3 rounded-lg border text-left flex items-center gap-3 transition-all ${t===d?"bg-slate-800 border-cyan-500 shadow-md":"bg-transparent border-transparent hover:bg-slate-800 hover:border-slate-700"}`,children:[e.jsx("div",{className:`${t===d?c.color:"text-slate-500"}`,children:c.icon}),e.jsx("span",{className:`text-xs font-bold ${t===d?"text-white":"text-slate-400"}`,children:c.title}),t===d&&e.jsx(je,{size:12,className:"ml-auto text-cyan-500"})]},d))})]}),e.jsxs("div",{className:"flex-1 bg-slate-900 rounded-2xl border border-slate-800 p-6 lg:p-8 relative overflow-hidden flex flex-col",children:[t===0&&e.jsx(ss,{}),t===1&&e.jsx(ls,{}),t===2&&e.jsx(as,{}),t===3&&e.jsx(rs,{}),t===4&&e.jsx(ns,{}),t===5&&e.jsx(os,{}),t===6&&e.jsx(is,{})]})]})},ss=()=>{const[t,l]=a.useState("GOOD"),[r,c]=a.useState(0),d=a.useRef(null);a.useEffect(()=>{const y=()=>{c(f=>(f+.1)%(Math.PI*2)),d.current=requestAnimationFrame(y)};return d.current=requestAnimationFrame(y),()=>{d.current&&cancelAnimationFrame(d.current)}},[]);const s=300,h=80,g=100,v=(y,f,C)=>{let b=`M 0 ${h/2}`;for(let p=0;p<=g;p++){const M=p/g*s,G=p/g*Math.PI*4,z=h/2-Math.sin(G+y-r)*f;b+=` L ${M} ${z}`}return e.jsx("path",{d:b,fill:"none",stroke:C,strokeWidth:"2",opacity:"0.6"})},w=t==="GOOD"?0:Math.PI,D=()=>{let y=`M 0 ${h/2}`;for(let f=0;f<=g;f++){const C=f/g*s,b=f/g*Math.PI*4,p=Math.sin(b-r),M=Math.sin(b+w-r),G=p+M,z=h/2-G*15;y+=` L ${C} ${z}`}return e.jsx("path",{d:y,fill:"none",stroke:t==="GOOD"?"#10b981":"#ef4444",strokeWidth:"3"})};return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"mb-6 border-b border-slate-800 pb-4",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-2 flex items-center gap-2",children:[e.jsx(dt,{className:"text-red-400"})," 相位 (Phase)"]}),e.jsx("p",{className:"text-sm text-slate-400",children:"最容易毁片的隐形杀手。相位抵消会导致声音变薄、低频消失。"})]}),e.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row gap-8",children:[e.jsxs("div",{className:"flex-1 flex flex-col gap-4",children:[e.jsxs("div",{className:"flex-1 bg-black/40 rounded-xl p-4 border border-slate-700 flex flex-col items-center justify-center relative min-h-[160px]",children:[e.jsxs("div",{className:"relative w-64 h-32 overflow-hidden",children:[e.jsx("div",{className:"absolute bottom-0 w-full h-full border-t-[20px] border-slate-700 rounded-t-full"}),e.jsx("div",{className:"absolute bottom-0 w-full h-full border-t-[20px] border-emerald-500 rounded-t-full clip-safe"}),e.jsx("div",{className:"absolute bottom-0 w-full h-full border-t-[20px] border-red-500 rounded-t-full clip-danger"}),e.jsx("div",{className:"absolute bottom-0 left-1/2 w-1 h-[90%] bg-white origin-bottom transition-transform duration-500 ease-out shadow-[0_0_10px_white]",style:{transform:`translateX(-50%) rotate(${t==="GOOD"?"45deg":"-45deg"})`}}),e.jsx("div",{className:"absolute bottom-2 left-4 text-xs font-bold text-red-500",children:"-1 (反相)"}),e.jsx("div",{className:"absolute bottom-2 right-4 text-xs font-bold text-emerald-500",children:"+1 (同相)"}),e.jsx("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 text-xs font-bold text-slate-500",children:"0 (90°)"})]}),e.jsx("style",{children:".clip-safe { clip-path: polygon(50% 0, 100% 0, 100% 100%, 50% 100%); } .clip-danger { clip-path: polygon(0 0, 50% 0, 50% 100%, 0 100%); }"})]}),e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-xl p-4 relative h-32 flex flex-col justify-center",children:[e.jsx("div",{className:"absolute top-2 left-2 text-[9px] text-slate-500 font-mono uppercase tracking-wider",children:"Mono Sum Check (L+R)"}),e.jsxs("svg",{width:"100%",height:"100%",viewBox:`0 0 ${s} ${h}`,className:"overflow-visible",children:[e.jsx("line",{x1:"0",y1:h/2,x2:s,y2:h/2,stroke:"#334155",strokeDasharray:"4,4"}),v(0,15,"#60a5fa")," ",v(w,15,"#f472b6")," ",D()," "]}),e.jsx("div",{className:"absolute bottom-2 right-2 text-[10px] font-bold",children:t==="GOOD"?e.jsx("span",{className:"text-emerald-400",children:"叠加增强 (Constructive)"}):e.jsx("span",{className:"text-red-500",children:"完全抵消 (Destructive)"})})]})]}),e.jsxs("div",{className:"lg:w-80 space-y-6",children:[e.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg border border-slate-700",children:[e.jsx("h4",{className:"text-sm font-bold text-white mb-4",children:"信号测试"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>l("GOOD"),className:`flex-1 px-4 py-3 rounded text-xs font-bold border transition-all ${t==="GOOD"?"bg-emerald-900/50 border-emerald-500 text-white":"border-slate-600 text-slate-400 hover:bg-slate-700"}`,children:"正常信号"}),e.jsx("button",{onClick:()=>l("BAD"),className:`flex-1 px-4 py-3 rounded text-xs font-bold border transition-all ${t==="BAD"?"bg-red-900/50 border-red-500 text-white":"border-slate-600 text-slate-400 hover:bg-slate-700"}`,children:"反相信号"})]})]}),e.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg border border-slate-700",children:[e.jsx("h4",{className:"text-sm font-bold text-cyan-400 mb-2",children:"后果演示"}),e.jsxs("p",{className:"text-xs text-slate-400 leading-relaxed mb-4",children:["观察左侧下方的波形图：",e.jsx("br",{}),e.jsx("br",{}),e.jsx("span",{className:"text-blue-400",children:"蓝色 (L)"})," 和 ",e.jsx("span",{className:"text-pink-400",children:"粉色 (R)"})," 是原始声道。",e.jsx("br",{}),e.jsx("span",{className:t==="GOOD"?"text-emerald-400":"text-red-500",children:"粗线"})," 是单声道叠加后的结果。"]}),t==="BAD"&&e.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-500/30 rounded text-xs text-red-300",children:[e.jsx("strong",{children:"⚠️ 灾难现场："}),e.jsx("br",{}),"当波峰遇到波谷，能量互相抵消为 0。在手机或蓝牙音箱（单声道）播放时，声音会完全消失或变得极空。"]})]})]})]})]})},ls=()=>e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"mb-6 border-b border-slate-800 pb-4",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-2 flex items-center gap-2",children:[e.jsx(nt,{className:"text-blue-400"})," 声像与声场 (Soundstage)"]}),e.jsx("p",{className:"text-sm text-slate-400",children:"原则：对白居中，音乐左右，环境包围。"})]}),e.jsxs("div",{className:"flex-1 flex flex-col justify-center items-center relative",children:[e.jsxs("div",{className:"relative w-full max-w-lg aspect-video bg-slate-950 border border-slate-800 rounded-xl overflow-hidden shadow-2xl flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"radial-gradient(#475569 1px, transparent 1px)",backgroundSize:"20px 20px"}}),e.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex flex-col items-center z-20",children:[e.jsx("div",{className:"w-12 h-12 bg-slate-700 rounded-full border-4 border-slate-600"}),e.jsx("span",{className:"text-[9px] text-slate-500 mt-1",children:"Audience"})]}),e.jsxs("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex flex-col items-center animate-pulse z-30",children:[e.jsx("div",{className:"w-4 h-4 bg-yellow-400 rounded-full shadow-[0_0_15px_yellow]"}),e.jsx("span",{className:"text-[9px] font-bold text-yellow-400 mt-1 bg-black/50 px-1 rounded",children:"对白 (C)"})]}),e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-3/4 h-32 border-x-4 border-blue-500/30 rounded-full opacity-50"}),e.jsx("div",{className:"absolute top-[40%] left-[15%] text-[9px] text-blue-400 font-bold",children:"Music L"}),e.jsx("div",{className:"absolute top-[40%] right-[15%] text-[9px] text-blue-400 font-bold",children:"Music R"}),e.jsx("div",{className:"absolute inset-4 border-2 border-dashed border-emerald-500/20 rounded-full"}),e.jsx("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 text-[9px] text-emerald-600 font-bold",children:"Ambience (环境声)"})]}),e.jsxs("div",{className:"flex gap-6 mt-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-400 rounded-full"}),e.jsx("span",{className:"text-xs text-slate-300",children:"对白: 必须 Center"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 border-2 border-blue-500 rounded-full"}),e.jsx("span",{className:"text-xs text-slate-300",children:"音乐: 铺满左右"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 border border-dashed border-emerald-500 rounded-full"}),e.jsx("span",{className:"text-xs text-slate-300",children:"环境: 包围感"})]})]}),e.jsxs("div",{className:"mt-6 bg-red-900/20 border border-red-500/50 p-3 rounded text-center w-full max-w-lg",children:[e.jsx("span",{className:"text-red-400 font-bold text-xs",children:"❌ 常见错误:"}),e.jsx("span",{className:"text-slate-400 text-xs ml-2",children:"千万不要给对白加 Stereo Widener (立体声扩展) 插件，这会导致对白发虚且相位混乱。"})]})]})]}),as=()=>{const[t,l]=a.useState("DIALOGUE");return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"mb-6 border-b border-slate-800 pb-4",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-2 flex items-center gap-2",children:[e.jsx(Ye,{className:"text-yellow-400"})," 影视 EQ 策略"]}),e.jsx("p",{className:"text-sm text-slate-400",children:"核心逻辑：影视 EQ 是为了“让人听懂”，不是为了“还原真实”。"})]}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("button",{onClick:()=>l("DIALOGUE"),className:`flex-1 py-2 rounded text-xs font-bold border ${t==="DIALOGUE"?"bg-yellow-900/40 border-yellow-500 text-white":"border-slate-700 text-slate-500"}`,children:"对白 (Dialogue)"}),e.jsx("button",{onClick:()=>l("MUSIC"),className:`flex-1 py-2 rounded text-xs font-bold border ${t==="MUSIC"?"bg-blue-900/40 border-blue-500 text-white":"border-slate-700 text-slate-500"}`,children:"背景音乐 (BGM)"})]}),e.jsxs("div",{className:"flex-1 bg-slate-950 rounded-xl border border-slate-800 p-6 relative flex flex-col justify-center",children:[e.jsxs("div",{className:"relative w-full h-48 bg-slate-900 border border-slate-700 rounded overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 grid grid-cols-4 pointer-events-none opacity-20",children:[e.jsx("div",{className:"border-r border-slate-500"}),e.jsx("div",{className:"border-r border-slate-500"}),e.jsx("div",{className:"border-r border-slate-500"})]}),e.jsxs("div",{className:"absolute bottom-0 w-full flex justify-between px-2 text-[9px] text-slate-600 font-mono",children:[e.jsx("span",{children:"20Hz"}),e.jsx("span",{children:"100Hz"}),e.jsx("span",{children:"1kHz"}),e.jsx("span",{children:"10kHz"}),e.jsx("span",{children:"20kHz"})]}),e.jsxs("svg",{className:"w-full h-full overflow-visible",preserveAspectRatio:"none",viewBox:"0 0 400 100",children:[e.jsx("line",{x1:"0",y1:"50",x2:"400",y2:"50",stroke:"#334155",strokeWidth:"1",strokeDasharray:"2,2"}),t==="DIALOGUE"?e.jsx("path",{d:"M0,100 L20,100 C40,100 60,50 80,50 L120,50 C140,50 160,60 180,60 C200,60 220,50 240,50 L280,50 C300,50 320,40 340,40 L400,40",fill:"none",stroke:"#eab308",strokeWidth:"3",className:"drop-shadow-lg"}):e.jsx("path",{d:"M0,50 L150,50 C180,50 200,70 240,70 C280,70 300,50 320,50 L400,50",fill:"none",stroke:"#3b82f6",strokeWidth:"3",strokeDasharray:"4,4",className:"drop-shadow-lg"})]}),t==="DIALOGUE"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute bottom-10 left-10 text-[9px] text-red-400 font-bold",children:"HPF (切低频)"}),e.jsx("div",{className:"absolute bottom-8 left-[40%] text-[9px] text-orange-400 font-bold",children:"Cut 浑浊 (300Hz)"}),e.jsx("div",{className:"absolute top-8 right-[20%] text-[9px] text-yellow-400 font-bold",children:"Boost 清晰 (3kHz)"})]}),t==="MUSIC"&&e.jsx("div",{className:"absolute bottom-6 left-[60%] text-[9px] text-blue-400 font-bold bg-slate-900 px-1",children:"Dip 让路 (2kHz-4kHz)"})]}),e.jsx("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4 text-xs text-slate-400",children:t==="DIALOGUE"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-slate-800 p-3 rounded",children:[e.jsx("strong",{className:"text-yellow-400 block mb-1",children:"HPF: 70-100Hz"}),"切除低频隆隆声和空调声，这些频率对人声理解无帮助。"]}),e.jsxs("div",{className:"bg-slate-800 p-3 rounded",children:[e.jsx("strong",{className:"text-yellow-400 block mb-1",children:"Boost: 2kHz-4kHz"}),"人耳对该频段最敏感，提升它可以显著增加对白的清晰度（Presence）。"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-slate-800 p-3 rounded",children:[e.jsx("strong",{className:"text-blue-400 block mb-1",children:"避让法则 (Carving)"}),"音乐不必追求全频段饱满。必须在 2k-4k 频段做衰减（Dip），把这块宝贵的空间留给对白。"]}),e.jsxs("div",{className:"bg-slate-800 p-3 rounded",children:[e.jsx("strong",{className:"text-white block mb-1",children:"Result:"}),"这样即使音乐音量较大，观众依然能清晰听清每一句台词。"]})]})})]})]})},rs=()=>e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"mb-6 border-b border-slate-800 pb-4",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-2 flex items-center gap-2",children:[e.jsx(xe,{className:"text-emerald-400"})," 动态与压缩 (Dynamics)"]}),e.jsx("p",{className:"text-sm text-slate-400",children:"哲学：有控制 (Controlled)，而不是无起伏 (Flattened)。"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-slate-900 border border-slate-800 p-6 rounded-xl",children:[e.jsx("h3",{className:"text-sm font-bold text-white mb-4",children:"对白压缩推荐参数"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Ae,{label:"Ratio",val:"2:1 ~ 3:1",desc:"温和压缩，不要超过 4:1"}),e.jsx(Ae,{label:"Attack",val:"10 ~ 30 ms",desc:"保留一点瞬态，太快会吃掉字头"}),e.jsx(Ae,{label:"Release",val:"80 ~ 150 ms",desc:"自然回复，太慢会产生抽吸感"}),e.jsx(Ae,{label:"Gain Reduction",val:"3 ~ 6 dB",desc:"表头指针只需轻微跳动"})]})]}),e.jsxs("div",{className:"bg-slate-900 border border-slate-800 p-6 rounded-xl flex flex-col justify-center items-center",children:[e.jsxs("div",{className:"relative w-full h-32 flex items-end gap-1 mb-4",children:[[40,90,50,80,20,60,100,30].map((t,l)=>e.jsxs("div",{className:"flex-1 bg-slate-700 rounded-t relative group",children:[e.jsx("div",{className:"absolute bottom-0 w-full bg-emerald-500/80 rounded-t transition-all duration-500",style:{height:`${t>60?60+(t-60)/3:t}%`}}),e.jsx("div",{className:"absolute top-0 w-full bg-red-500/30 h-full opacity-0 group-hover:opacity-100 transition-opacity"})]},l)),e.jsx("div",{className:"absolute top-[40%] left-0 w-full border-t border-dashed border-white/50 text-[9px] text-white",children:"Threshold"})]}),e.jsx("p",{className:"text-xs text-slate-400 text-center",children:"压缩器的作用是把过大的音量（红色部分）压下来，然后整体提升音量（Makeup Gain），从而让小声的细节（如耳语）也能被听见。"})]})]})]}),Ae=({label:t,val:l,desc:r})=>e.jsxs("div",{className:"flex justify-between items-center border-b border-slate-800 pb-2 last:border-0",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-bold text-emerald-400",children:t}),e.jsx("div",{className:"text-[10px] text-slate-500",children:r})]}),e.jsx("div",{className:"text-sm font-mono text-white bg-slate-800 px-2 py-1 rounded border border-slate-700",children:l})]}),ns=()=>e.jsxs("div",{className:"h-full flex flex-col justify-center items-center text-center p-8",children:[e.jsx("div",{className:"w-24 h-24 bg-purple-900/20 rounded-full border-4 border-purple-500 flex items-center justify-center mb-6 shadow-[0_0_40px_rgba(168,85,247,0.3)]",children:e.jsx(Qe,{size:40,className:"text-purple-400"})}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"空间感原则：隐形"}),e.jsxs("p",{className:"text-sm text-slate-400 max-w-md leading-relaxed mb-8",children:["“好的影视混响是看不见的。”",e.jsx("br",{}),"它的作用是让对白“站在画面中的空间里”，而不是为了好听。"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 w-full max-w-2xl text-left",children:[e.jsxs("div",{className:"bg-slate-800 p-4 rounded border-l-4 border-emerald-500",children:[e.jsx("h4",{className:"text-sm font-bold text-white mb-1",children:"✅ 正确做法"}),e.jsx("p",{className:"text-xs text-slate-400",children:"使用短混响 (Short Plate / Room)。只需极少量 (Wet < 10%)，刚好能感觉到“不干”即可。"})]}),e.jsxs("div",{className:"bg-slate-800 p-4 rounded border-l-4 border-red-500",children:[e.jsx("h4",{className:"text-sm font-bold text-white mb-1",children:"❌ 常见错误"}),e.jsx("p",{className:"text-xs text-slate-400",children:"使用唱歌用的大混响 (Hall / Church)。会导致对白含糊不清，且与画面（如小卧室场景）严重违和。"})]})]})]}),os=()=>e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"mb-6 border-b border-slate-800 pb-4",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-2 flex items-center gap-2",children:[e.jsx(Re,{className:"text-slate-400"})," 噪声与底噪"]}),e.jsx("p",{className:"text-sm text-slate-400",children:"目标：安静 ≠ 死寂。干净 ≠ 消毒。"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 bg-slate-800 p-4 rounded-lg border border-slate-700",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-red-900/50 flex items-center justify-center text-red-400 font-bold shrink-0",children:"必修"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-white",children:"电流声 / 风噪"}),e.jsx("p",{className:"text-xs text-slate-400",children:"这些是技术失误，必须使用 RX De-noise 或类似工具彻底去除。"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 bg-slate-800 p-4 rounded-lg border border-slate-700",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-emerald-900/50 flex items-center justify-center text-emerald-400 font-bold shrink-0",children:"保留"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-white",children:"房间底噪 (Room Tone) / 环境声"}),e.jsxs("p",{className:"text-xs text-slate-400",children:["不要把对白间隙的底噪剪成“绝对静音”，那会让声音听起来像断气一样难受。",e.jsx("br",{}),"专业的做法是录一段空环境声，铺在整个轨道最底层，作为“粘合剂”。"]})]})]})]})]}),is=()=>{const[t,l]=a.useState(new Array(8).fill(!1)),r=["Integrated LUFS 合规 (如 -14)","True Peak ≤ -1 dBTP","Mono (单声道) 播放无明显相位抵消","对白始终清晰，不被音乐掩盖","环境声有包围感但不抢戏","无明显技术噪声 (电流/爆音)","片头片尾留白正常","在手机/耳机/音箱上试听均正常"],c=s=>{const h=[...t];h[s]=!h[s],l(h)},d=t.every(Boolean);return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-cyan-900/30 to-slate-900 p-6 rounded-xl border border-cyan-500/30 mb-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-1",children:"交付前质量检查清单"}),e.jsx("p",{className:"text-xs text-cyan-400",children:"Quality Control (QC) Checklist"})]}),d&&e.jsx("div",{className:"bg-emerald-500 text-white px-4 py-2 rounded-lg font-bold shadow-lg animate-bounce",children:"READY TO DELIVER! 🚀"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map((s,h)=>e.jsxs("button",{onClick:()=>c(h),className:`p-4 rounded-lg border text-left flex items-center gap-3 transition-all ${t[h]?"bg-emerald-900/20 border-emerald-500/50":"bg-slate-800 border-slate-700 hover:border-slate-500"}`,children:[t[h]?e.jsx(qe,{className:"text-emerald-400 shrink-0"}):e.jsx(qe,{className:"text-slate-600 shrink-0"}),e.jsx("span",{className:`text-sm ${t[h]?"text-white line-through decoration-slate-500 opacity-50":"text-slate-200"}`,children:s})]},h))}),e.jsx("div",{className:"mt-auto pt-8 text-center",children:e.jsx("div",{className:"inline-block bg-slate-800 px-6 py-3 rounded-full border border-slate-700",children:e.jsx("span",{className:"text-xs text-slate-400 italic",children:'"业余在凑指标，专业在为播放环境负责。"'})})})]})},cs=()=>{const[t,l]=a.useState("INTEGRATED"),[r,c]=a.useState(!1),[d,s]=a.useState(!1),h=new URL("/lensoptics-lab/assets/1_insight2-GTzUw9o3.png",import.meta.url).href,v={INTEGRATED:{title:"Integrated Loudness",subtitle:"全片平均响度 (I)",desc:"这是最重要的交付指标。它计算了从开始播放到结束的整体平均响度（自动剔除了静音段）。",tip:"流媒体平台（如B站、YouTube）主要根据这个数值进行音量标准化。目标通常是 -14 LUFS (Web) 或 -23 LUFS (TV)。",color:"text-emerald-400"},SHORT_TERM:{title:"Short-term Loudness",subtitle:"短期响度 (S)",desc:"过去 3 秒的滑动平均值。它反应了当前的“听感”音量。",tip:"做混音时主要看它。用来平衡对白（通常控制在 -18 ~ -20 LUFS）和音乐的比例。",color:"text-cyan-400"},MOMENTARY:{title:"Momentary Loudness",subtitle:"瞬时响度 (M)",desc:"过去 400ms 的瞬时电平。反应极快，指针跳动剧烈。",tip:"主要用于检查突发的大动态声音（如爆炸、枪声）是否过响。不适合作为整体平衡的参考。",color:"text-yellow-400"},LRA:{title:"Loudness Range",subtitle:"响度范围 (LRA)",desc:"统计学指标，描述了最响部分和最轻部分之间的差距（以 LU 为单位）。",tip:"LRA 越大，动态越大（如电影）；LRA 越小，声音越平（如电视广告）。网络视频建议 LRA < 6 LU，以便在嘈杂环境也能听清。",color:"text-purple-400"},TRUE_PEAK:{title:"True Peak",subtitle:"真峰值 (dBTP)",desc:"通过 4 倍过采样预测的模拟波形峰值。它能检测到普通数字 Peak 表检测不到的“采样间峰值”。",tip:"这是最后的防线。必须控制在 -1.0 dBTP (Web) 或 -2.0 dBTP (TV) 以下，否则转码成 MP3/AAC 时会产生削波失真。",color:"text-red-400"},LEVELS:{title:"Levels / True Peak Meters",subtitle:"实时电平表",desc:"显示当前左右声道的瞬时电平和保持峰值。",tip:"如果红灯亮起（Clip），说明信号已经爆音。Insight 的表头通常结合了 True Peak 检测，比传统 DAW 的推子更灵敏。",color:"text-blue-400"},SOUND_FIELD:{title:"Sound Field / Phase",subtitle:"声场与相位 (Lissajous)",desc:"显示立体声的宽度和相位相关性。垂直线代表单声道(Mono)，水平线代表反相，圆形/椭圆代表良好的立体声。",tip:"必须保持图形主要在垂直方向延伸（+1 相关性）。如果图形变得扁平甚至水平（-1），说明出现了严重的相位抵消，单声道播放时声音会消失。",color:"text-green-400"}}[t];return e.jsxs("div",{className:"h-full flex flex-col lg:flex-row gap-6 p-4",children:[e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center bg-black/50 rounded-2xl border border-slate-800 p-8 select-none relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-4 right-4 z-20",children:e.jsxs("button",{onClick:()=>c(!r),className:"flex items-center gap-2 px-3 py-1.5 bg-slate-800 hover:bg-slate-700 text-white rounded-lg border border-slate-600 text-xs font-bold transition-all shadow-lg",children:[r?e.jsx(Se,{size:14}):e.jsx(Ke,{size:14}),r?"返回交互模式":"查看真实截图"]})}),r?e.jsx("div",{className:"w-full h-full flex items-center justify-center animate-in fade-in zoom-in duration-300",children:d?e.jsxs("div",{className:"flex flex-col items-center justify-center text-slate-500 p-8 border-2 border-dashed border-slate-700 rounded-lg bg-black/20 max-w-md text-center",children:[e.jsx(ke,{size:32,className:"text-red-500 mb-3"}),e.jsx("p",{className:"font-bold text-red-400 mb-2",children:"Image Not Found (404)"}),e.jsxs("div",{className:"text-xs space-y-1 bg-black/40 p-4 rounded border border-slate-800 text-left font-mono text-slate-400",children:[e.jsx("p",{children:"Expected path:"}),e.jsx("p",{className:"text-white",children:"../../img/loudness/1_insight2.png"}),e.jsx("p",{className:"mt-2 text-[10px] text-slate-500",children:"Troubleshooting:"}),e.jsxs("ul",{className:"list-disc pl-4 space-y-1",children:[e.jsxs("li",{children:["Ensure ",e.jsx("code",{children:"img"})," folder is in the project root."]}),e.jsx("li",{children:"Check if the file exists."})]})]})]}):e.jsx("img",{src:h,alt:"iZotope Insight 2 Screenshot",className:"max-w-full max-h-full object-contain rounded-lg shadow-2xl border border-slate-700",onError:()=>s(!0)})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-[10px] text-slate-500 mb-4 flex items-center gap-2",children:[e.jsx(Nt,{size:12})," 鼠标悬停查看参数含义"]}),e.jsxs("div",{className:"w-full max-w-lg bg-[#1a1a1a] border border-[#333] rounded-lg shadow-2xl overflow-hidden flex flex-col font-sans animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"bg-[#111] px-3 py-1 flex justify-between items-center border-b border-[#333]",children:[e.jsx("span",{className:"text-[10px] text-slate-400 font-bold tracking-widest",children:"Insight 2 (Simulation)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-slate-700"}),e.jsx("div",{className:"w-2 h-2 rounded-full bg-slate-700"})]})]}),e.jsxs("div",{className:"p-4 grid grid-cols-3 gap-1 border-b border-[#333]",children:[e.jsxs("div",{className:`col-span-3 bg-[#0a0a0a] border border-[#333] p-4 flex justify-between items-end rounded hover:border-emerald-500 cursor-help transition-colors group ${t==="INTEGRATED"?"border-emerald-500 bg-emerald-900/10":""}`,onMouseEnter:()=>l("INTEGRATED"),children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-slate-500 font-bold uppercase mb-1 group-hover:text-emerald-400",children:"Integrated"}),e.jsx("span",{className:"text-5xl font-black text-emerald-400 font-mono leading-none",children:"-14.1"})]}),e.jsx("span",{className:"text-xs text-slate-600 font-mono mb-1",children:"LUFS"})]}),e.jsxs("div",{className:`bg-[#0a0a0a] border border-[#333] p-2 rounded hover:border-cyan-500 cursor-help transition-colors group ${t==="SHORT_TERM"?"border-cyan-500 bg-cyan-900/10":""}`,onMouseEnter:()=>l("SHORT_TERM"),children:[e.jsx("span",{className:"text-[9px] text-slate-500 block mb-1 group-hover:text-cyan-400",children:"Short Term"}),e.jsx("span",{className:"text-xl font-bold text-cyan-400 font-mono",children:"-13.8"}),e.jsx("span",{className:"text-[8px] text-slate-600 ml-1",children:"LUFS"})]}),e.jsxs("div",{className:`bg-[#0a0a0a] border border-[#333] p-2 rounded hover:border-yellow-500 cursor-help transition-colors group ${t==="MOMENTARY"?"border-yellow-500 bg-yellow-900/10":""}`,onMouseEnter:()=>l("MOMENTARY"),children:[e.jsx("span",{className:"text-[9px] text-slate-500 block mb-1 group-hover:text-yellow-400",children:"Momentary"}),e.jsx("span",{className:"text-xl font-bold text-yellow-400 font-mono",children:"-10.2"}),e.jsx("span",{className:"text-[8px] text-slate-600 ml-1",children:"LUFS"})]}),e.jsxs("div",{className:`bg-[#0a0a0a] border border-[#333] p-2 rounded hover:border-purple-500 cursor-help transition-colors group ${t==="LRA"?"border-purple-500 bg-purple-900/10":""}`,onMouseEnter:()=>l("LRA"),children:[e.jsx("span",{className:"text-[9px] text-slate-500 block mb-1 group-hover:text-purple-400",children:"LRA"}),e.jsx("span",{className:"text-xl font-bold text-purple-400 font-mono",children:"5.4"}),e.jsx("span",{className:"text-[8px] text-slate-600 ml-1",children:"LU"})]})]}),e.jsxs("div",{className:"p-4 grid grid-cols-4 gap-4 border-b border-[#333] h-40",children:[e.jsxs("div",{className:`col-span-3 bg-[#0a0a0a] border border-[#333] rounded p-2 flex flex-col justify-between hover:border-blue-500 cursor-help transition-colors group ${t==="LEVELS"?"border-blue-500 bg-blue-900/10":""}`,onMouseEnter:()=>l("LEVELS"),children:[e.jsx("span",{className:"text-[9px] text-slate-500 font-bold group-hover:text-blue-400",children:"Levels"}),e.jsxs("div",{className:"flex-1 flex gap-2 justify-center items-end py-2",children:[e.jsx("div",{className:"w-4 h-[80%] bg-gradient-to-t from-green-500 via-yellow-500 to-red-500 rounded-t-sm opacity-80"}),e.jsx("div",{className:"w-4 h-[75%] bg-gradient-to-t from-green-500 via-yellow-500 to-red-500 rounded-t-sm opacity-80"})]}),e.jsxs("div",{className:"flex justify-around text-[9px] text-slate-600 font-mono",children:[e.jsx("span",{children:"L"}),e.jsx("span",{children:"R"})]})]}),e.jsxs("div",{className:`col-span-1 bg-[#0a0a0a] border border-[#333] rounded p-2 flex flex-col justify-center items-center hover:border-red-500 cursor-help transition-colors group ${t==="TRUE_PEAK"?"border-red-500 bg-red-900/10":""}`,onMouseEnter:()=>l("TRUE_PEAK"),children:[e.jsxs("span",{className:"text-[9px] text-slate-500 font-bold mb-2 text-center group-hover:text-red-400",children:["True Peak",e.jsx("br",{}),"Max"]}),e.jsx("span",{className:"text-xl font-bold text-red-400 font-mono",children:"-1.2"}),e.jsx("span",{className:"text-[8px] text-slate-600",children:"dBTP"})]})]}),e.jsxs("div",{className:`h-32 bg-[#0a0a0a] border-t border-[#333] relative flex items-center justify-center hover:border-green-500 cursor-help transition-colors group ${t==="SOUND_FIELD"?"bg-green-900/10":""}`,onMouseEnter:()=>l("SOUND_FIELD"),children:[e.jsx("div",{className:"absolute top-2 left-2 text-[9px] text-slate-500 font-bold group-hover:text-green-400",children:"Sound Field (Lissajous)"}),e.jsxs("svg",{className:"w-24 h-24 opacity-80",viewBox:"0 0 100 100",children:[e.jsx("path",{d:"M50,10 Q80,50 50,90 Q20,50 50,10",fill:"none",stroke:"#22c55e",strokeWidth:"1"}),e.jsx("path",{d:"M50,20 Q70,50 50,80 Q30,50 50,20",fill:"none",stroke:"#22c55e",strokeWidth:"1",opacity:"0.6"}),e.jsx("line",{x1:"50",y1:"0",x2:"50",y2:"100",stroke:"#333",strokeWidth:"1",strokeDasharray:"2"}),e.jsx("line",{x1:"0",y1:"50",x2:"100",y2:"50",stroke:"#333",strokeWidth:"1",strokeDasharray:"2"})]}),e.jsxs("div",{className:"absolute right-4 bottom-4 flex flex-col items-end",children:[e.jsx("span",{className:"text-[9px] text-slate-500",children:"Correlation"}),e.jsx("div",{className:"w-20 h-1 bg-slate-800 rounded mt-1 overflow-hidden",children:e.jsx("div",{className:"w-[80%] h-full bg-green-500 ml-[10%]"})}),e.jsx("span",{className:"text-[9px] text-green-400 font-mono",children:"+0.8"})]})]})]})]})]}),e.jsx("div",{className:"w-full lg:w-96 bg-slate-900 border-l border-slate-800 flex flex-col p-6 lg:p-8 rounded-2xl shadow-xl transition-colors duration-300 border-t lg:border-t-0",children:e.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[e.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-bold w-fit mb-6 bg-slate-800 border ${v.color.replace("text-","border-")}`,children:[e.jsx(xe,{size:14,className:v.color}),e.jsx("span",{className:v.color,children:v.subtitle})]}),e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:v.title}),e.jsx("div",{className:`h-1 w-20 rounded mb-6 ${v.color.replace("text-","bg-")}`}),e.jsx("p",{className:"text-sm text-slate-300 leading-7 mb-8 text-justify",children:v.desc}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-5 border border-slate-700",children:[e.jsxs("h4",{className:"text-xs font-bold text-white mb-2 flex items-center gap-2",children:[e.jsx(Ce,{size:14,className:"text-yellow-400"})," 实战应用"]}),e.jsx("p",{className:"text-xs text-slate-400 leading-relaxed",children:v.tip})]})]})})]})};let He=class{constructor(l){this.size=l,this.buffer=new Float32Array(l).fill(-90),this.head=0}push(l){this.buffer[this.head]=l,this.head=(this.head+1)%this.size}getAll(){const l=new Float32Array(this.size),r=this.buffer.subarray(this.head),c=this.buffer.subarray(0,this.head);return l.set(r,0),l.set(c,r.length),l}clear(l=-90){this.buffer.fill(l),this.head=0}};const ds=()=>{const[t,l]=a.useState("VISUALIZER"),[r,c]=a.useState(!1),[d,s]=a.useState(!1),h=new URL("/lensoptics-lab/assets/2_prog-fR4yCwbm.png",import.meta.url).href,[g,v]=a.useState(-30),[w,D]=a.useState(-60),[y,f]=a.useState(5),[C,b]=a.useState(300),[p,M]=a.useState(50),[G,z]=a.useState("DRUMS"),[T,S]=a.useState("SYNTH"),[E,F]=a.useState(!1),[P,m]=a.useState(""),B=a.useRef(null),K=a.useRef(null),le=a.useRef(null),q=a.useRef(null),Z=a.useRef(null),O=a.useRef(0),oe=a.useRef({threshold:g,range:w,attack:y,release:C,hold:p,signalType:G});a.useEffect(()=>{oe.current={threshold:g,range:w,attack:y,release:C,hold:p,signalType:G}},[g,w,y,C,p,G]);const ge=a.useRef(null),ue=a.useRef(null),he=a.useRef(null),fe=512,re=a.useRef({inputRb:new He(fe),outputRb:new He(fe),grRb:new He(fe),gateState:"CLOSED",currentGain:-60,holdCounterTime:0,lastTime:0,totalTime:0}),V={VISUALIZER:{title:"Real-time Display",subtitle:"可视化面板",desc:"深色实心波形为输入信号(Input)，绿色线条为输出信号(Output)。顶部的红色曲线代表增益衰减(Gain Reduction)。",tip:"红线向下掉落表示门正在关闭（压低底噪）；红线回到顶部表示门完全打开（信号通过）。",color:"text-blue-300"},THRESHOLD:{title:"Threshold",subtitle:"阈值 / 门限",desc:"噪声门工作的“及格线”。信号必须超过此线才能把门“撞开”。",tip:"调节技巧：找到底噪的最高点，将阈值设在底噪之上约 3-6dB 处。设太高会吃掉有用信号，设太低关不住噪音。",color:"text-cyan-400"},RANGE:{title:"Range / Floor",subtitle:"衰减深度",desc:"门关上时，要把声音压低多少？-80dB 是完全静音（硬闸门），-10dB 只是让背景音变轻（软扩展）。",tip:"人声处理建议设为 -15dB ~ -25dB，保留一点环境声会听起来更自然，不会有那种真空般的窒息感。",color:"text-indigo-400"},ATTACK:{title:"Attack",subtitle:"启动时间 (开门)",desc:"当信号超过阈值，门完全打开需要多久？",tip:"打击乐和人声字头需要极快 Attack (<10ms)，否则瞬态会被切掉，声音变软。环境音效可以稍慢。",color:"text-emerald-400"},RELEASE:{title:"Release",subtitle:"释放时间 (关门)",desc:"信号低于阈值后，门完全关闭需要多久？",tip:"最关键参数。太快会造成声音“抽搐”(Chatter)，太慢会将尾音后的底噪放进来。通常在 100ms - 500ms。",color:"text-yellow-400"},HOLD:{title:"Hold",subtitle:"保持时间",desc:"信号跌落阈值后，强行保持开门状态的时间。",tip:"防抽搐神器。对于军鼓或句间呼吸，加 50-100ms Hold 可以防止门误判关闭，保证尾音完整。",color:"text-orange-400"}}[t],De=()=>(K.current||(K.current=new(window.AudioContext||window.webkitAudioContext)),K.current),ae=async L=>{var o;const W=(o=L.target.files)==null?void 0:o[0];if(W){pe();try{const R=De(),n=await W.arrayBuffer(),k=await R.decodeAudioData(n);Z.current=k,m(W.name),S("FILE"),re.current.inputRb.clear(),re.current.outputRb.clear(),re.current.grRb.clear()}catch(R){console.error("Error loading audio:",R),alert("无法加载音频文件，请重试")}}},Le=()=>{const L=De();if(E)pe();else{if(!Z.current)return;L.state==="suspended"&&L.resume();const W=L.createBufferSource();W.buffer=Z.current,W.loop=!0;const o=L.createScriptProcessor(2048,1,1);o.onaudioprocess=R=>{const n=R.inputBuffer.getChannelData(0),k=R.outputBuffer.getChannelData(0),i=oe.current,x=re.current,N=L.sampleRate;for(let A=0;A<n.length;A++){const X=n[A],$=Math.abs(X),H=$>1e-6?20*Math.log10($):-90,_=2,Y=i.threshold,Q=i.threshold-_;H>Y?(x.gateState="OPEN",x.holdCounterTime=i.hold/1e3):H<Q&&x.gateState==="OPEN"&&(x.gateState="HOLD"),x.gateState==="HOLD"&&(x.holdCounterTime-=1/N,x.holdCounterTime<=0&&(x.gateState="RELEASE"));let ee=0;(x.gateState==="RELEASE"||x.gateState==="CLOSED")&&(ee=i.range);const ne=Math.max(.001,i.attack/1e3),ie=Math.max(.001,i.release/1e3),te=1-Math.exp(-1/(N*ne)),ce=1-Math.exp(-1/(N*ie));ee<x.currentGain?x.currentGain+=(ee-x.currentGain)*ce:x.currentGain+=(ee-x.currentGain)*te,x.currentGain<i.range&&(x.currentGain=i.range),x.currentGain>0&&(x.currentGain=0);const u=Math.pow(10,x.currentGain/20);k[A]=X*u,A%600===0&&(x.inputRb.push(H),x.outputRb.push(20*Math.log10(Math.abs(k[A])+1e-6)),x.grRb.push(x.currentGain))}},W.connect(o),o.connect(L.destination),W.start(),O.current=L.currentTime,le.current=W,q.current=o,F(!0)}},pe=()=>{if(le.current){try{le.current.stop()}catch{}le.current.disconnect()}q.current&&q.current.disconnect(),F(!1)};a.useEffect(()=>()=>{pe(),K.current&&K.current.close()},[]);const Ge=(L,W)=>{let o=-60+Math.random()*6,R=-90;if(W==="DRUMS"){const n=L%2;if(n>=0&&n<.2||n>=1&&n<1.2){const k=n%1*5;R=-6+Math.log10(1-k)*20}else if(n>=.5&&n<.8||n>=1.5&&n<1.8){const k=(n-.5)%1*3.33;R=-8+Math.log10(1-k)*20,o+=Math.random()*12*(1-k)}}else{const n=L%3;n>.2&&n<.6||n>1.2&&n<1.5||n>2&&n<2.5?R=-12+Math.sin(L*20)*3:n>1.8&&n<1.9&&(R=-45)}return Math.max(o,R)};return a.useEffect(()=>{if(r)return;const L=ge.current,W=ue.current;if(!L||!W)return;const o=L.getContext("2d",{alpha:!1});if(!o)return;const R=new ResizeObserver(()=>{const k=window.devicePixelRatio||1,i=W.getBoundingClientRect();L.width=i.width*k,L.height=i.height*k});R.observe(W);const n=k=>{const i=re.current,x=oe.current,N=L.width,A=L.height,X=window.devicePixelRatio||1;if(T==="SYNTH"){i.lastTime===0&&(i.lastTime=k);let u=(k-i.lastTime)/1e3;u>.1&&(u=.016),i.lastTime=k,i.totalTime+=u;const I=Ge(i.totalTime,x.signalType),j=2,U=x.threshold,se=x.threshold-j;I>U?(i.gateState="OPEN",i.holdCounterTime=x.hold/1e3):I<se&&i.gateState==="OPEN"&&(i.gateState="HOLD"),i.gateState==="HOLD"&&(i.holdCounterTime-=u,i.holdCounterTime<=0&&(i.gateState="RELEASE"));let de=0;(i.gateState==="RELEASE"||i.gateState==="CLOSED")&&(de=x.range);const ze=Math.max(.001,x.attack/1e3),Fe=Math.max(.001,x.release/1e3),Ie=1-Math.exp(-u/ze),Ue=1-Math.exp(-u/Fe);de<i.currentGain?i.currentGain+=(de-i.currentGain)*Ue:i.currentGain+=(de-i.currentGain)*Ie,i.currentGain<x.range&&(i.currentGain=x.range),i.currentGain>0&&(i.currentGain=0);const Pe=I+i.currentGain;i.inputRb.push(I),i.outputRb.push(Pe),i.grRb.push(i.currentGain)}o.setTransform(1,0,0,1,0,0),o.fillStyle="#0f172a",o.fillRect(0,0,N,A),o.scale(X,X);const $=N/X,H=A/X,_=u=>H*.1+u/-90*(H*.8);o.lineWidth=1,o.strokeStyle="#334155",o.beginPath(),[-20,-40,-60,-80].forEach(u=>{const I=_(u);o.moveTo(0,I),o.lineTo($,I),o.fillStyle="#64748b",o.font="10px monospace",o.fillText(`${u}`,4,I-2)}),o.stroke();const Y=i.inputRb.getAll(),Q=i.outputRb.getAll(),ee=i.grRb.getAll(),ne=Y.length,ie=$/ne;o.fillStyle="#1e293b",o.beginPath(),o.moveTo(0,H);for(let u=0;u<ne;u++)o.lineTo(u*ie,_(Y[u]));o.lineTo($,H),o.fill();const te=_(x.threshold);o.strokeStyle="#22d3ee",o.lineWidth=1.5,o.setLineDash([4,4]),o.beginPath(),o.moveTo(0,te),o.lineTo($,te),o.stroke(),o.setLineDash([]),o.fillStyle="#22d3ee",o.fillText("THR",$-25,te-4),o.strokeStyle="#4ade80",o.lineWidth=2,o.beginPath();for(let u=0;u<ne;u++){const I=u*ie,j=_(Q[u]);u===0?o.moveTo(I,j):o.lineTo(I,j)}o.stroke();const ce=H*.1;o.strokeStyle="#ef4444",o.lineWidth=2,o.beginPath();for(let u=0;u<ne;u++){const I=ee[u],j=ce+Math.abs(I)*(H*.8/90),U=u*ie;u===0?o.moveTo(U,j):o.lineTo(U,j)}if(o.stroke(),T==="FILE"&&E&&Z.current){const u=K.current;if(u){const I=Z.current.duration,U=(u.currentTime-O.current)%I/I;o.fillStyle="rgba(255, 255, 255, 0.2)",o.fillRect(0,H-4,$,4),o.fillStyle="#22d3ee",o.fillRect(0,H-4,$*U,4)}}he.current=requestAnimationFrame(n)};return he.current=requestAnimationFrame(n),()=>{R.disconnect(),he.current&&cancelAnimationFrame(he.current)}},[r,T,E]),e.jsxs("div",{className:"h-full flex flex-col lg:flex-row gap-6 p-4",children:[e.jsxs("div",{className:"flex-1 flex flex-col bg-slate-950 rounded-2xl border border-slate-800 p-6 select-none relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-4 right-4 z-20 flex gap-2",children:e.jsxs("button",{onClick:()=>c(!r),className:"flex items-center gap-2 px-3 py-1.5 bg-slate-800 hover:bg-slate-700 text-white rounded-lg border border-slate-600 text-xs font-bold transition-all shadow-lg",children:[r?e.jsx(Se,{size:14}):e.jsx(Ke,{size:14}),r?"返回交互模式":"查看真实截图"]})}),r?e.jsx("div",{className:"w-full h-full flex items-center justify-center animate-in fade-in zoom-in duration-300",children:d?e.jsxs("div",{className:"flex flex-col items-center justify-center text-slate-500 p-8 border-2 border-dashed border-slate-700 rounded-lg bg-black/20 max-w-md text-center",children:[e.jsx(ke,{size:32,className:"text-red-500 mb-3"}),e.jsx("p",{className:"font-bold text-red-400 mb-2",children:"Image Not Found (404)"}),e.jsxs("div",{className:"text-xs space-y-1 bg-black/40 p-4 rounded border border-slate-800 text-left font-mono text-slate-400",children:[e.jsx("p",{children:"Expected path:"}),e.jsx("p",{className:"text-white",children:"../../img/loudness/2_prog.png"})]})]}):e.jsx("img",{src:h,alt:"FabFilter Pro-G Screenshot",className:"max-w-full max-h-full object-contain rounded-lg shadow-2xl border border-slate-700",onError:()=>s(!0)})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-4 pr-36",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("div",{className:"text-[10px] text-slate-500 font-mono font-bold tracking-wider uppercase",children:"Pro-G Simulator (Gate)"})}),e.jsxs("div",{className:"flex items-center gap-2 bg-slate-900 border border-slate-700 rounded-lg p-1",children:[e.jsxs("div",{className:"flex bg-slate-800 rounded p-0.5 mr-2",children:[e.jsx("button",{onClick:()=>{S("SYNTH"),pe()},className:`px-2 py-1 text-[10px] rounded font-bold transition-colors ${T==="SYNTH"?"bg-cyan-600 text-white":"text-slate-400 hover:text-white"}`,children:"Synth"}),e.jsxs("button",{onClick:()=>{var L;return(L=B.current)==null?void 0:L.click()},className:`px-2 py-1 text-[10px] rounded font-bold transition-colors flex items-center gap-1 ${T==="FILE"?"bg-cyan-600 text-white":"text-slate-400 hover:text-white"}`,children:[e.jsx(et,{size:10})," File"]}),e.jsx("input",{type:"file",ref:B,className:"hidden",accept:"audio/*",onChange:ae})]}),T==="SYNTH"?e.jsxs("div",{className:"flex bg-slate-800 rounded p-0.5",children:[e.jsxs("button",{onClick:()=>z("DRUMS"),className:`px-2 py-1 text-[10px] rounded flex items-center gap-1 transition-colors ${G==="DRUMS"?"bg-slate-600 text-white":"text-slate-400 hover:text-white"}`,children:[e.jsx(We,{size:10})," Drums"]}),e.jsxs("button",{onClick:()=>z("VOCAL"),className:`px-2 py-1 text-[10px] rounded flex items-center gap-1 transition-colors ${G==="VOCAL"?"bg-slate-600 text-white":"text-slate-400 hover:text-white"}`,children:[e.jsx(Re,{size:10})," Vocal"]})]}):e.jsxs("div",{className:"flex items-center gap-2 px-2",children:[e.jsx("span",{className:"text-[10px] text-slate-400 max-w-[100px] truncate",children:P||"No File"}),e.jsx("button",{onClick:Le,disabled:!P,className:`p-1 rounded-full ${E?"bg-yellow-500 text-black":"bg-green-600 text-white"} disabled:opacity-50`,children:E?e.jsx(tt,{size:12}):e.jsx(Ee,{size:12})})]})]})]}),e.jsxs("div",{ref:ue,className:"flex-1 w-full bg-[#111] rounded-lg border border-slate-700 relative overflow-hidden shadow-inner",onMouseEnter:()=>l("VISUALIZER"),children:[e.jsx("canvas",{ref:ge,className:"block w-full h-full"}),T==="FILE"&&!E&&P&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm pointer-events-none",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-700 px-4 py-2 rounded-full text-xs font-bold text-white flex items-center gap-2",children:[e.jsx(Ee,{size:12,className:"fill-white"})," Click Play to Start DSP"]})})]}),e.jsxs("div",{className:"mt-6 h-32 bg-[#1a1a1a] rounded-xl border border-[#333] px-6 py-4 flex items-center justify-between gap-2 lg:gap-6",children:[e.jsx(we,{label:"Threshold",value:g,min:-60,max:0,step:.5,unit:"dB",onChange:v,color:"#22d3ee",onFocus:()=>l("THRESHOLD")}),e.jsx(we,{label:"Range",value:w,min:-80,max:0,step:1,unit:"dB",onChange:D,color:"#818cf8",onFocus:()=>l("RANGE")}),e.jsx("div",{className:"w-px h-12 bg-[#333]"}),e.jsx(we,{label:"Attack",value:y,min:0,max:100,step:1,unit:"ms",onChange:f,color:"#34d399",onFocus:()=>l("ATTACK")}),e.jsx(we,{label:"Release",value:C,min:10,max:1e3,step:10,unit:"ms",onChange:b,color:"#facc15",onFocus:()=>l("RELEASE")}),e.jsx(we,{label:"Hold",value:p,min:0,max:500,step:10,unit:"ms",onChange:M,color:"#fb923c",onFocus:()=>l("HOLD")})]})]})]}),e.jsx("div",{className:"w-full lg:w-96 bg-slate-900 border-l border-slate-800 flex flex-col p-6 lg:p-8 rounded-2xl shadow-xl transition-colors duration-300 border-t lg:border-t-0",children:e.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[e.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-bold w-fit mb-6 bg-slate-800 border ${V.color.replace("text-","border-")}`,children:[t==="VISUALIZER"?e.jsx(Se,{size:14,className:V.color}):e.jsx(xe,{size:14,className:V.color}),e.jsx("span",{className:V.color,children:V.subtitle})]}),e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:V.title}),e.jsx("div",{className:`h-1 w-20 rounded mb-6 ${V.color.replace("text-","bg-")}`}),e.jsx("p",{className:"text-sm text-slate-300 leading-7 mb-8 text-justify",children:V.desc}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-5 border border-slate-700",children:[e.jsxs("h4",{className:"text-xs font-bold text-white mb-2 flex items-center gap-2",children:[e.jsx(Ce,{size:14,className:"text-yellow-400"})," 混音师笔记"]}),e.jsx("p",{className:"text-xs text-slate-400 leading-relaxed",children:V.tip})]})]})})]})},we=({label:t,value:l,min:r,max:c,step:d,unit:s,color:h,onChange:g,onFocus:v})=>{const[w,D]=a.useState(!1),y=a.useRef(0),f=a.useRef(0),C=m=>{m.preventDefault(),D(!0),y.current=m.clientY,f.current=l,v(),document.body.style.cursor="ns-resize",window.addEventListener("mousemove",b),window.addEventListener("mouseup",p)},b=a.useCallback(m=>{const B=y.current-m.clientY,K=c-r,le=200,q=m.shiftKey?.1:1,Z=B/le*K*q;let O=f.current+Z;d>0&&(O=Math.round(O/d)*d),O=Math.max(r,Math.min(c,O)),g(Number(O.toFixed(d<1?2:0)))},[r,c,d,g]),p=a.useCallback(()=>{D(!1),document.body.style.cursor="default",window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",p)},[b]),M=m=>{let B=0;if((m.key==="ArrowUp"||m.key==="ArrowRight")&&(B=d),(m.key==="ArrowDown"||m.key==="ArrowLeft")&&(B=-d),B!==0){m.preventDefault();const K=Math.max(r,Math.min(c,l+B));g(Number(K.toFixed(d<1?2:0)))}},G=()=>{let m=r+(c-r)/2;t==="Threshold"&&(m=-30),t==="Range"&&(m=-60),g(m)},z=(l-r)/(c-r),T=-135+z*270,S=24,E=2*Math.PI*S,F=E*.75,P=`${z*F} ${E}`;return e.jsxs("div",{className:"flex flex-col items-center gap-2 group cursor-ns-resize select-none outline-none",onMouseDown:C,onDoubleClick:G,onKeyDown:M,tabIndex:0,role:"slider","aria-label":t,"aria-valuenow":l,"aria-valuemin":r,"aria-valuemax":c,onFocus:v,children:[e.jsxs("div",{className:"relative w-14 h-14",children:[e.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 64 64",className:"overflow-visible",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:`grad-${t}`,x1:"0%",y1:"100%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:h,stopOpacity:"0.5"}),e.jsx("stop",{offset:"100%",stopColor:h,stopOpacity:"1"})]})}),e.jsxs("g",{transform:"rotate(135, 32, 32)",children:[e.jsx("circle",{cx:"32",cy:"32",r:S,fill:"none",stroke:"#333",strokeWidth:"4",strokeDasharray:`${F} ${E}`,strokeLinecap:"round"}),e.jsx("circle",{cx:"32",cy:"32",r:S,fill:"none",stroke:h,strokeWidth:"4",strokeDasharray:P,strokeLinecap:"round",className:"transition-all duration-75 ease-out"})]})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsx("div",{className:`w-10 h-10 rounded-full bg-[#2a2a2a] border border-[#444] shadow-lg flex items-center justify-center transform transition-transform duration-75 ${w?"scale-95 border-white":""}`,style:{transform:`rotate(${T}deg)`},children:e.jsx("div",{className:"w-1 h-3 bg-white mb-5 rounded-full shadow-[0_0_5px_white]"})})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-[10px] font-bold uppercase transition-colors ${w?"text-white":"text-slate-500 group-hover:text-slate-300"}`,children:t}),e.jsxs("div",{className:"text-[9px] font-mono",style:{color:w?h:"#64748b"},children:[l.toFixed(d<1?1:0),s]})]})]})};class Oe{constructor(l){this.size=l,this.buffer=new Float32Array(l).fill(-90),this.head=0}push(l){this.buffer[this.head]=l,this.head=(this.head+1)%this.size}getAll(){const l=new Float32Array(this.size),r=this.buffer.subarray(this.head),c=this.buffer.subarray(0,this.head);return l.set(r,0),l.set(c,r.length),l}clear(l=-90){this.buffer.fill(l),this.head=0}}const xs=()=>{const[t,l]=a.useState("VISUALIZER"),[r,c]=a.useState(!1),[d,s]=a.useState(!1),h=new URL("../../img/loudness/3_proc.png",import.meta.url).href,[g,v]=a.useState(-20),[w,D]=a.useState(4),[y,f]=a.useState(15),[C,b]=a.useState(150),[p,M]=a.useState(0),[G,z]=a.useState(0),[T,S]=a.useState("DRUMS"),[E,F]=a.useState("SYNTH"),[P,m]=a.useState(!1),[B,K]=a.useState(""),le=a.useRef(null),q=a.useRef(null),Z=a.useRef(null),O=a.useRef(null),oe=a.useRef(null),ge=a.useRef(0),ue=a.useRef({threshold:g,ratio:w,attack:y,release:C,makeup:p,knee:G,signalType:T});a.useEffect(()=>{ue.current={threshold:g,ratio:w,attack:y,release:C,makeup:p,knee:G,signalType:T}},[g,w,y,C,p,G,T]);const he=a.useRef(null),fe=a.useRef(null),re=a.useRef(null),Te=512,V=a.useRef({inputRb:new Oe(Te),outputRb:new Oe(Te),grRb:new Oe(Te),currentGR:0,lastTime:0,totalTime:0}),ae={VISUALIZER:{title:"Compressor View",subtitle:"压缩可视化",desc:"深色波形为 Input，绿色细线为 Output。红色区域向下延伸代表压缩量 (Gain Reduction)。",tip:"观察红线的跳动节奏。如果红线一直沉底不回弹，说明压缩过度或 Release 太慢；如果红线只削掉一点点峰值，说明控制得当。",color:"text-blue-300"},THRESHOLD:{title:"Threshold",subtitle:"阈值 / 起跑线",desc:"压缩器开始工作的电平点。只有超过这个音量的声音才会被“压”下来。",tip:"调节技巧：慢慢拉低阈值，直到 Gain Reduction 表头开始跳动。人声一般压 3-6dB，鼓组可以压更多。",color:"text-cyan-400"},RATIO:{title:"Ratio",subtitle:"压缩比",desc:"超标部分要被压多少？4:1 表示超标 4dB 只输出 1dB。∞:1 就是 Limiter (限制器)。",tip:"人声/吉他常用 2:1 ~ 4:1 (温和)；鼓组/贝斯常用 4:1 ~ 8:1 (有力)；限制峰值用 10:1 以上。",color:"text-indigo-400"},ATTACK:{title:"Attack",subtitle:"启动时间",desc:"发现超标后，多快开始压缩？快 Attack 会切掉瞬态（声音变远/变软），慢 Attack 保留瞬态（更有冲击力）。",tip:"想让鼓声更猛？调慢 Attack (30ms+)。想让声音更稳更靠后？调快 Attack (<10ms)。",color:"text-emerald-400"},RELEASE:{title:"Release",subtitle:"释放时间",desc:"信号回到阈值下后，多快停止压缩？",tip:"根据音乐 BPM 调整。太快会由失真(Distortion)，太慢会产生“抽吸感”(Pumping)——即下一个音头被上一个音的压缩给吞掉了。",color:"text-yellow-400"},MAKEUP:{title:"Makeup / Gain",subtitle:"补偿增益",desc:"压缩会让整体音量变小，需要在这里补回来。",tip:"口诀：压多少，补多少。如果 GR 表最大跳到 -6dB，这里就提升 +6dB，让响度更有竞争力。",color:"text-orange-400"},KNEE:{title:"Knee",subtitle:"拐点软硬",desc:"Soft Knee 会在阈值附近提前缓慢开始压缩，过渡更自然。Hard Knee 则是严格执行。",tip:"人声/总线压缩建议 Soft Knee (12dB+)，鼓组/打击乐建议 Hard Knee (0dB)。",color:"text-purple-400"}}[t],Le=()=>(q.current||(q.current=new(window.AudioContext||window.webkitAudioContext)),q.current),pe=async o=>{var n;const R=(n=o.target.files)==null?void 0:n[0];if(R){L();try{const k=Le(),i=await R.arrayBuffer(),x=await k.decodeAudioData(i);oe.current=x,K(R.name),F("FILE"),V.current.inputRb.clear(),V.current.outputRb.clear(),V.current.grRb.clear()}catch(k){console.error("Error loading audio:",k),alert("无法加载音频文件")}}},Ge=()=>{const o=Le();if(P)L();else{if(!oe.current)return;o.state==="suspended"&&o.resume();const R=o.createBufferSource();R.buffer=oe.current,R.loop=!0;const n=o.createScriptProcessor(2048,1,1);n.onaudioprocess=k=>{const i=k.inputBuffer.getChannelData(0),x=k.outputBuffer.getChannelData(0),N=ue.current,A=V.current,X=o.sampleRate;for(let $=0;$<i.length;$++){const H=i[$],_=Math.abs(H),Y=_>1e-6?20*Math.log10(_):-90;let Q=0;const ee=Y-N.threshold;ee>0&&(Q=-ee*(1-1/N.ratio));const ne=Math.max(.001,N.attack/1e3),ie=Math.max(.001,N.release/1e3),te=1-Math.exp(-1/(X*ne)),ce=1-Math.exp(-1/(X*ie));Q<A.currentGR?A.currentGR+=(Q-A.currentGR)*te:A.currentGR+=(Q-A.currentGR)*ce;const u=A.currentGR+N.makeup,I=Math.pow(10,u/20);x[$]=H*I,$%600===0&&(A.inputRb.push(Y),A.outputRb.push(20*Math.log10(Math.abs(x[$])+1e-6)),A.grRb.push(A.currentGR))}},R.connect(n),n.connect(o.destination),R.start(),ge.current=o.currentTime,Z.current=R,O.current=n,m(!0)}},L=()=>{if(Z.current){try{Z.current.stop()}catch{}Z.current.disconnect()}O.current&&O.current.disconnect(),m(!1)};a.useEffect(()=>()=>{L(),q.current&&q.current.close()},[]);const W=(o,R)=>{let n=-60+Math.random()*6,k=-90;if(R==="DRUMS"){const i=o%2;if(i>=0&&i<.2||i>=1&&i<1.2){const x=i%1*5;k=-6+Math.log10(1-x)*20}else if(i>=.5&&i<.8||i>=1.5&&i<1.8){const x=(i-.5)%1*3.33;k=-8+Math.log10(1-x)*20,n+=Math.random()*12*(1-x)}}else{const i=o%3;i>.2&&i<.6||i>1.2&&i<1.5||i>2&&i<2.5?k=-12+Math.sin(o*20)*3:i>1.8&&i<1.9&&(k=-45)}return Math.max(n,k)};return a.useEffect(()=>{if(r)return;const o=he.current,R=fe.current;if(!o||!R)return;const n=o.getContext("2d",{alpha:!1});if(!n)return;const k=new ResizeObserver(()=>{const x=window.devicePixelRatio||1,N=R.getBoundingClientRect();o.width=N.width*x,o.height=N.height*x});k.observe(R);const i=x=>{const N=V.current,A=ue.current,X=o.width,$=o.height,H=window.devicePixelRatio||1;if(E==="SYNTH"){N.lastTime===0&&(N.lastTime=x);let j=(x-N.lastTime)/1e3;j>.1&&(j=.016),N.lastTime=x,N.totalTime+=j;const U=W(N.totalTime,A.signalType);let se=0;const de=U-A.threshold;de>0&&(se=-de*(1-1/A.ratio));const ze=Math.max(.001,A.attack/1e3),Fe=Math.max(.001,A.release/1e3),Ie=1-Math.exp(-j/ze),Ue=1-Math.exp(-j/Fe);se<N.currentGR?N.currentGR+=(se-N.currentGR)*Ie:N.currentGR+=(se-N.currentGR)*Ue;const Pe=U+N.currentGR+A.makeup;N.inputRb.push(U),N.outputRb.push(Pe),N.grRb.push(N.currentGR)}n.setTransform(1,0,0,1,0,0),n.fillStyle="#0f172a",n.fillRect(0,0,X,$),n.scale(H,H);const _=X/H,Y=$/H,Q=j=>Y*.1+j/-90*(Y*.8);n.lineWidth=1,n.strokeStyle="#334155",n.beginPath(),[-20,-40,-60,-80].forEach(j=>{const U=Q(j);n.moveTo(0,U),n.lineTo(_,U),n.fillStyle="#64748b",n.font="10px monospace",n.fillText(`${j}`,4,U-2)}),n.stroke();const ee=N.inputRb.getAll(),ne=N.outputRb.getAll(),ie=N.grRb.getAll(),te=ee.length,ce=_/te;n.fillStyle="#1e293b",n.beginPath(),n.moveTo(0,Y);for(let j=0;j<te;j++)n.lineTo(j*ce,Q(ee[j]));n.lineTo(_,Y),n.fill();const u=Q(A.threshold);n.strokeStyle="#22d3ee",n.lineWidth=1.5,n.setLineDash([4,4]),n.beginPath(),n.moveTo(0,u),n.lineTo(_,u),n.stroke(),n.setLineDash([]),n.fillStyle="#22d3ee",n.fillText("THR",_-25,u-4),n.strokeStyle="#4ade80",n.lineWidth=2,n.beginPath();for(let j=0;j<te;j++){const U=j*ce,se=Q(ne[j]);j===0?n.moveTo(U,se):n.lineTo(U,se)}n.stroke();const I=Y*.1;n.fillStyle="rgba(239, 68, 68, 0.3)",n.beginPath(),n.moveTo(0,I);for(let j=0;j<te;j++){const U=ie[j],se=Math.abs(U)*(Y*.8/90);n.lineTo(j*ce,I+se)}if(n.lineTo(_,I),n.fill(),E==="FILE"&&P&&oe.current){const j=q.current;if(j){const U=oe.current.duration,de=(j.currentTime-ge.current)%U/U;n.fillStyle="rgba(255, 255, 255, 0.2)",n.fillRect(0,Y-4,_,4),n.fillStyle="#22d3ee",n.fillRect(0,Y-4,_*de,4)}}re.current=requestAnimationFrame(i)};return re.current=requestAnimationFrame(i),()=>{k.disconnect(),re.current&&cancelAnimationFrame(re.current)}},[r,E,P]),e.jsxs("div",{className:"h-full flex flex-col lg:flex-row gap-6 p-4",children:[e.jsxs("div",{className:"flex-1 flex flex-col bg-slate-950 rounded-2xl border border-slate-800 p-6 select-none relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-4 right-4 z-20 flex gap-2",children:e.jsxs("button",{onClick:()=>c(!r),className:"flex items-center gap-2 px-3 py-1.5 bg-slate-800 hover:bg-slate-700 text-white rounded-lg border border-slate-600 text-xs font-bold transition-all shadow-lg",children:[r?e.jsx(Se,{size:14}):e.jsx(Ke,{size:14}),r?"返回交互模式":"查看真实截图"]})}),r?e.jsx("div",{className:"w-full h-full flex items-center justify-center animate-in fade-in zoom-in duration-300",children:d?e.jsxs("div",{className:"flex flex-col items-center justify-center text-slate-500 p-8 border-2 border-dashed border-slate-700 rounded-lg bg-black/20 max-w-md text-center",children:[e.jsx(ke,{size:32,className:"text-red-500 mb-3"}),e.jsx("p",{className:"font-bold text-red-400 mb-2",children:"Image Not Found (404)"}),e.jsxs("div",{className:"text-xs space-y-1 bg-black/40 p-4 rounded border border-slate-800 text-left font-mono text-slate-400",children:[e.jsx("p",{children:"Expected path:"}),e.jsx("p",{className:"text-white",children:"../../img/loudness/3_proc.png"})]})]}):e.jsx("img",{src:h,alt:"FabFilter Pro-C 2 Screenshot",className:"max-w-full max-h-full object-contain rounded-lg shadow-2xl border border-slate-700",onError:()=>s(!0)})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-4 pr-36",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("div",{className:"text-[10px] text-slate-500 font-mono font-bold tracking-wider uppercase",children:"Pro-C 2 Simulator (Compressor)"})}),e.jsxs("div",{className:"flex items-center gap-2 bg-slate-900 border border-slate-700 rounded-lg p-1",children:[e.jsxs("div",{className:"flex bg-slate-800 rounded p-0.5 mr-2",children:[e.jsx("button",{onClick:()=>{F("SYNTH"),L()},className:`px-2 py-1 text-[10px] rounded font-bold transition-colors ${E==="SYNTH"?"bg-cyan-600 text-white":"text-slate-400 hover:text-white"}`,children:"Synth"}),e.jsxs("button",{onClick:()=>{var o;return(o=le.current)==null?void 0:o.click()},className:`px-2 py-1 text-[10px] rounded font-bold transition-colors flex items-center gap-1 ${E==="FILE"?"bg-cyan-600 text-white":"text-slate-400 hover:text-white"}`,children:[e.jsx(et,{size:10})," File"]}),e.jsx("input",{type:"file",ref:le,className:"hidden",accept:"audio/*",onChange:pe})]}),E==="SYNTH"?e.jsxs("div",{className:"flex bg-slate-800 rounded p-0.5",children:[e.jsxs("button",{onClick:()=>S("DRUMS"),className:`px-2 py-1 text-[10px] rounded flex items-center gap-1 transition-colors ${T==="DRUMS"?"bg-slate-600 text-white":"text-slate-400 hover:text-white"}`,children:[e.jsx(We,{size:10})," Drums"]}),e.jsxs("button",{onClick:()=>S("VOCAL"),className:`px-2 py-1 text-[10px] rounded flex items-center gap-1 transition-colors ${T==="VOCAL"?"bg-slate-600 text-white":"text-slate-400 hover:text-white"}`,children:[e.jsx(Re,{size:10})," Vocal"]})]}):e.jsxs("div",{className:"flex items-center gap-2 px-2",children:[e.jsx("span",{className:"text-[10px] text-slate-400 max-w-[100px] truncate",children:B||"No File"}),e.jsx("button",{onClick:Ge,disabled:!B,className:`p-1 rounded-full ${P?"bg-yellow-500 text-black":"bg-green-600 text-white"} disabled:opacity-50`,children:P?e.jsx(tt,{size:12}):e.jsx(Ee,{size:12})})]})]})]}),e.jsxs("div",{ref:fe,className:"flex-1 w-full bg-[#111] rounded-lg border border-slate-700 relative overflow-hidden shadow-inner",onMouseEnter:()=>l("VISUALIZER"),children:[e.jsx("canvas",{ref:he,className:"block w-full h-full"}),E==="FILE"&&!P&&B&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm pointer-events-none",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-700 px-4 py-2 rounded-full text-xs font-bold text-white flex items-center gap-2",children:[e.jsx(Ee,{size:12,className:"fill-white"})," Click Play to Start DSP"]})})]}),e.jsxs("div",{className:"mt-6 h-32 bg-[#1a1a1a] rounded-xl border border-[#333] px-6 py-4 flex items-center justify-between gap-2 lg:gap-6",children:[e.jsx(ye,{label:"Threshold",value:g,min:-60,max:0,step:.5,unit:"dB",onChange:v,color:"#22d3ee",onFocus:()=>l("THRESHOLD")}),e.jsx(ye,{label:"Ratio",value:w,min:1,max:10,step:.1,unit:":1",onChange:D,color:"#818cf8",onFocus:()=>l("RATIO")}),e.jsx("div",{className:"w-px h-12 bg-[#333]"}),e.jsx(ye,{label:"Attack",value:y,min:0,max:100,step:1,unit:"ms",onChange:f,color:"#34d399",onFocus:()=>l("ATTACK")}),e.jsx(ye,{label:"Release",value:C,min:10,max:1e3,step:10,unit:"ms",onChange:b,color:"#facc15",onFocus:()=>l("RELEASE")}),e.jsx("div",{className:"w-px h-12 bg-[#333]"}),e.jsx(ye,{label:"Makeup",value:p,min:0,max:24,step:.5,unit:"dB",onChange:M,color:"#fb923c",onFocus:()=>l("MAKEUP")})]})]})]}),e.jsx("div",{className:"w-full lg:w-96 bg-slate-900 border-l border-slate-800 flex flex-col p-6 lg:p-8 rounded-2xl shadow-xl transition-colors duration-300 border-t lg:border-t-0",children:e.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[e.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-bold w-fit mb-6 bg-slate-800 border ${ae.color.replace("text-","border-")}`,children:[t==="VISUALIZER"?e.jsx(Se,{size:14,className:ae.color}):e.jsx(xe,{size:14,className:ae.color}),e.jsx("span",{className:ae.color,children:ae.subtitle})]}),e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:ae.title}),e.jsx("div",{className:`h-1 w-20 rounded mb-6 ${ae.color.replace("text-","bg-")}`}),e.jsx("p",{className:"text-sm text-slate-300 leading-7 mb-8 text-justify",children:ae.desc}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-5 border border-slate-700",children:[e.jsxs("h4",{className:"text-xs font-bold text-white mb-2 flex items-center gap-2",children:[e.jsx(Ce,{size:14,className:"text-yellow-400"})," 混音师笔记"]}),e.jsx("p",{className:"text-xs text-slate-400 leading-relaxed",children:ae.tip})]})]})})]})},ye=({label:t,value:l,min:r,max:c,step:d,unit:s,color:h,onChange:g,onFocus:v})=>{const[w,D]=a.useState(!1),y=a.useRef(0),f=a.useRef(0),C=m=>{m.preventDefault(),D(!0),y.current=m.clientY,f.current=l,v(),document.body.style.cursor="ns-resize",window.addEventListener("mousemove",b),window.addEventListener("mouseup",p)},b=a.useCallback(m=>{const B=y.current-m.clientY,K=c-r,le=200,q=m.shiftKey?.1:1,Z=B/le*K*q;let O=f.current+Z;d>0&&(O=Math.round(O/d)*d),O=Math.max(r,Math.min(c,O)),g(Number(O.toFixed(d<1?2:0)))},[r,c,d,g]),p=a.useCallback(()=>{D(!1),document.body.style.cursor="default",window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",p)},[b]),M=m=>{let B=0;if((m.key==="ArrowUp"||m.key==="ArrowRight")&&(B=d),(m.key==="ArrowDown"||m.key==="ArrowLeft")&&(B=-d),B!==0){m.preventDefault();const K=Math.max(r,Math.min(c,l+B));g(Number(K.toFixed(d<1?2:0)))}},G=()=>{let m=r+(c-r)/2;t==="Threshold"&&(m=-20),t==="Ratio"&&(m=4),t==="Makeup"&&(m=0),g(m)},z=(l-r)/(c-r),T=-135+z*270,S=24,E=2*Math.PI*S,F=E*.75,P=`${z*F} ${E}`;return e.jsxs("div",{className:"flex flex-col items-center gap-2 group cursor-ns-resize select-none outline-none",onMouseDown:C,onDoubleClick:G,onKeyDown:M,tabIndex:0,role:"slider","aria-label":t,"aria-valuenow":l,"aria-valuemin":r,"aria-valuemax":c,onFocus:v,children:[e.jsxs("div",{className:"relative w-14 h-14",children:[e.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 64 64",className:"overflow-visible",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:`grad-${t}`,x1:"0%",y1:"100%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:h,stopOpacity:"0.5"}),e.jsx("stop",{offset:"100%",stopColor:h,stopOpacity:"1"})]})}),e.jsxs("g",{transform:"rotate(135, 32, 32)",children:[e.jsx("circle",{cx:"32",cy:"32",r:S,fill:"none",stroke:"#333",strokeWidth:"4",strokeDasharray:`${F} ${E}`,strokeLinecap:"round"}),e.jsx("circle",{cx:"32",cy:"32",r:S,fill:"none",stroke:h,strokeWidth:"4",strokeDasharray:P,strokeLinecap:"round",className:"transition-all duration-75 ease-out"})]})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsx("div",{className:`w-10 h-10 rounded-full bg-[#2a2a2a] border border-[#444] shadow-lg flex items-center justify-center transform transition-transform duration-75 ${w?"scale-95 border-white":""}`,style:{transform:`rotate(${T}deg)`},children:e.jsx("div",{className:"w-1 h-3 bg-white mb-5 rounded-full shadow-[0_0_5px_white]"})})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-[10px] font-bold uppercase transition-colors ${w?"text-white":"text-slate-500 group-hover:text-slate-300"}`,children:t}),e.jsxs("div",{className:"text-[9px] font-mono",style:{color:w?h:"#64748b"},children:[l.toFixed(d<1?1:0),s]})]})]})},Fs=({initialTab:t})=>{const[l,r]=a.useState("UNITS");a.useEffect(()=>{t&&["UNITS","STANDARDS","LAB","FLOW","MATH","WORKFLOW","QUALITY","CHEAT_SHEET","ANALYZER","INSIGHT_GUIDE","PROG_GUIDE","PROC_GUIDE"].includes(t)&&r(t)},[t]);const c=[{id:"ANALYZER",label:"在线分析工具 (Tool)",icon:e.jsx(bt,{size:16})},{id:"INSIGHT_GUIDE",label:"读图指南 (Insight)",icon:e.jsx(wt,{size:16})},{id:"PROG_GUIDE",label:"噪声门 (Pro-G)",icon:e.jsx(Re,{size:16})},{id:"PROC_GUIDE",label:"压缩器 (Pro-C)",icon:e.jsx(St,{size:16})},{id:"UNITS",label:"核心概念",icon:e.jsx(Je,{size:16})},{id:"MATH",label:"算法原理",icon:e.jsx(ct,{size:16})},{id:"LAB",label:"实验室",icon:e.jsx(xe,{size:16})},{id:"FLOW",label:"流程图",icon:e.jsx(_e,{size:16})},{id:"STANDARDS",label:"交付标准",icon:e.jsx(st,{size:16})},{id:"WORKFLOW",label:"混音工作流",icon:e.jsx(rt,{size:16})},{id:"QUALITY",label:"质量指标",icon:e.jsx(me,{size:16})},{id:"CHEAT_SHEET",label:"速查表",icon:e.jsx(Ce,{size:16})}];return e.jsx("div",{className:"flex flex-col lg:flex-row h-full overflow-hidden",children:e.jsxs("div",{className:"flex-1 bg-slate-950 relative overflow-hidden border-b lg:border-r border-slate-800 flex flex-col",children:[e.jsx(vt,{tabs:c,activeTab:l,onTabChange:d=>r(d)}),e.jsxs("div",{className:"flex-1 relative overflow-y-auto bg-slate-950 p-6 lg:p-8",children:[l==="ANALYZER"&&e.jsx(mt,{}),l==="INSIGHT_GUIDE"&&e.jsx(cs,{}),l==="PROG_GUIDE"&&e.jsx(ds,{}),l==="PROC_GUIDE"&&e.jsx(xs,{}),l==="UNITS"&&e.jsx(Ht,{}),l==="STANDARDS"&&e.jsx(_t,{}),l==="LAB"&&e.jsx(Wt,{}),l==="FLOW"&&e.jsx(Vt,{}),l==="MATH"&&e.jsx(Jt,{}),l==="WORKFLOW"&&e.jsx(Xt,{}),l==="QUALITY"&&e.jsx(ts,{}),l==="CHEAT_SHEET"&&e.jsx(Qt,{})]})]})})};export{Fs as LoudnessStandardView};
