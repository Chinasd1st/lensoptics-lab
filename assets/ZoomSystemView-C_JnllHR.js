import{r as c,j as e,A as Q,M as Y,T as z}from"./index-CjriULbf.js";import{a as V,T as O}from"./Controls-CqSHD3Ul.js";import{O as i,t as H}from"./optics-BJr8qzqd.js";import{M as q}from"./maximize-2-CBsPZYw8.js";import{A as J}from"./activity-BIDN5iMX.js";import{M as K}from"./monitor-play-B0MZpCdF.js";import{I as ee}from"./info-DhEWPeus.js";import{S as L}from"./sparkles-DAzamjUk.js";import{E as se}from"./eye-Dg9EiyCS.js";import{C as te}from"./calculator-CWt6K4cG.js";import{L as ae}from"./layers-C9Gd2v25.js";const w={ZOOM_F2_STD:{name:"FE 28-70mm F2 GM",nickname:"夜之光 (F2标变)",type:"Zoom",minF:28,maxF:70,minAp:2,maxAp:22,elements:"20片/14组 (3XA, 3Super ED)",weight:"918g",lengthFactor:1.2,minFocus:380,meme:"恒定光圈 F2.0。婚礼摄影师的终极梦想，暗光环境下无需闪光灯也能获得纯净画质。"},ZOOM_STD:{name:"FE 24-70mm F2.8 GM II",nickname:"明日之镜 II",type:"Zoom",minF:24,maxF:70,minAp:2.8,maxAp:22,elements:"15组20枚 (2XA, 3ED)",weight:"695g",lengthFactor:1,minFocus:210,meme:"只有G大师才能打败G大师。画质、体积、对焦的完美平衡。日常/旅游/视频全能王。"},ZOOM_WIDE:{name:"FE 16-35mm F2.8 GM II",nickname:"广角大三元 II",type:"Zoom",minF:16,maxF:35,minAp:2.8,maxAp:22,elements:"12组15枚 (3XA, 1ED非)",weight:"547g (轻量化)",lengthFactor:.9,minFocus:220,meme:"风光摄影师的毕业装备。既轻便画质又顶，星空慧差控制极佳。"},ZOOM_TELE:{name:"FE 70-200mm F2.8 GM OSS II",nickname:"空气切割机 II",type:"Zoom",minF:70,maxF:200,minAp:2.8,maxAp:22,elements:"14组17枚 (1XA, 1ED非)",weight:"1045g",lengthFactor:1.6,minFocus:400,meme:"以前是健身器材，现在是精密仪器。对焦速度快到能抓拍蜂鸟翅膀。"},ZOOM_F2_TELE:{name:"FE 50-150mm F2 GM",nickname:"人像变焦神镜",type:"Zoom",minF:50,maxF:150,minAp:2,maxAp:22,elements:"旗舰级堆料 (XA/ED)",weight:"约1250g",lengthFactor:1.5,minFocus:500,meme:"一支镜头干掉 50/85/135 三支定焦。全程 F2 虚化，糖水片制造机。"},PRIME_50:{name:"FE 50mm F1.2 GM",nickname:"50GM (定焦镜皇)",type:"Prime",minF:50,maxF:50,minAp:1.2,maxAp:16,elements:"10组14枚 (3XA)",weight:"778g",lengthFactor:.9,minFocus:400,meme:'F1.2 全开即锐度爆表。梦幻散景与极致解析力的物理极限，这就是"德味"。'},MACRO_100:{name:"FE 100mm F2.8 Macro GM",nickname:"百微 GM (1.4x)",type:"Prime",minF:100,maxF:100,minAp:2.8,maxAp:32,elements:"双浮动对焦 (XA/ED)",weight:"约730g",lengthFactor:1.1,minFocus:260,meme:"1.4x 原生放大倍率。连昆虫复眼的六边形结构都能数得清清楚楚，微观世界的显微镜。"}},ye=({initialTab:ne})=>{const[b,X]=c.useState("ZOOM_F2_STD"),[m,k]=c.useState(.5),[n,N]=c.useState(2.8),[A,P]=c.useState(!0),[o,M]=c.useState(1e3),[f,T]=c.useState(!1),t=w[b],E=.6,j=750,C=t.lengthFactor*120*E*3,d=j-C;c.useEffect(()=>{n<t.minAp&&N(t.minAp),n>t.maxAp&&N(t.maxAp),t.type==="Prime"&&k(0),o<t.minFocus&&M(t.minFocus)},[b]);const y=t.minF+m*(t.maxF-t.minF),S=t.type==="Prime"?0:60,I=d+40+m*S,v=d+120+m*(S*.5),D=v-15,_=(1-Math.min(o,5e3)/5e3)*(.15*(600/Math.max(o,600))),R=1+(f?_*.05:_),F=c.useMemo(()=>[{x:d,f:150*t.lengthFactor,h:45,name:"XA 前玉",type:"XA"},{x:I,f:-80,h:35,name:"ED 变焦组",type:"ED"},{x:D,f:1/0,h:50/n*10,name:"光圈",type:"APERTURE"},{x:v,f:120*t.lengthFactor,h:40,name:"XA 对焦组",type:"XA"}],[I,v,D,n,t.lengthFactor,d,b]),Z=o*E,h=j-Z,W=c.useMemo(()=>{const s=[],l=[{y:i,color:"#10b981"},{y:i-40,color:"#3b82f6"},{y:i+40,color:"#ef4444"}];for(const a of l){const r=[-.12,-.06,0,.06,.12];for(const x of r){const u=d-h,p=i-a.y,B=Math.atan2(p,u),U=800/(o*t.lengthFactor),$=H({x:h,y:a.y},B+x*U,F,j);$.blocked||s.push({path:$.path,color:a.color})}}return s},[h,F,o,t.lengthFactor,d]),G=c.useMemo(()=>{let a=1;n<2.8&&(a-=(2.8-n)*.03),n>16&&(a-=(n-16)*.05),t.type==="Zoom"&&(a-=Math.abs(m-.5)*.02),a=Math.max(.4,a);const r=80-80*a,x=80-80*(a*.8);return`M 0,${r} Q ${180/2},${r} 180,${x}`},[n,m,t.type]),g=(()=>{const l=y,a=n,r=o,x=l*l/(a*.03)+l,u=x*r/(x+(r-l)),p=x*r/(x-(r-l));return{near:u,far:p>0?p:1/0,depth:p>0?p-u:1/0}})();return e.jsxs("div",{className:"flex flex-col lg:flex-row h-full",children:[e.jsxs("div",{className:"flex-1 bg-slate-950 relative overflow-hidden border-b lg:border-r border-slate-800",children:[e.jsxs("div",{className:"absolute top-4 left-4 z-10 font-mono text-xs text-cyan-500 space-y-2 pointer-events-none",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{size:14}),e.jsxs("span",{children:["EFL: ",y.toFixed(1),"mm"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{size:14}),e.jsxs("span",{children:["IRIS: f/",n.toFixed(1)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{size:14}),e.jsxs("span",{children:["MTF: ",(100-(n>8?(n-8)*5:(4-n)*5)).toFixed(0),"%"]})]}),f&&e.jsxs("div",{className:"flex items-center gap-2 text-purple-400 animate-pulse",children:[e.jsx(K,{size:14}),e.jsx("span",{children:"BREATHING COMP: ON"})]})]}),e.jsxs("div",{className:"absolute top-24 left-4 z-10 space-y-2 pointer-events-none bg-black/60 p-3 rounded-lg border border-white/10 backdrop-blur-sm shadow-xl",children:[e.jsxs("div",{className:"text-[10px] font-bold text-slate-300 mb-1 flex items-center gap-1",children:[e.jsx(ee,{size:12})," 光路图例"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-0.5 bg-green-500 shadow-[0_0_5px_lime]"}),e.jsx("span",{className:"text-[9px] text-green-400",children:"中心成像 (Axial)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-0.5 bg-blue-500 shadow-[0_0_5px_blue]"}),e.jsx("span",{className:"text-[9px] text-blue-400",children:"上边缘 (Upper Marginal)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-0.5 bg-red-500 shadow-[0_0_5px_red]"}),e.jsx("span",{className:"text-[9px] text-red-400",children:"下边缘 (Lower Marginal)"})]}),e.jsx("div",{className:"mt-2 text-[8px] text-slate-500 leading-tight w-32",children:"观察红蓝光线在 CMOS 处的汇聚情况可判断边缘画质。"})]}),e.jsx("div",{className:"absolute bottom-4 right-4 z-10 flex flex-col gap-1 items-end pointer-events-none",children:e.jsxs("div",{className:"flex gap-4 text-[10px] text-slate-500 bg-black/50 p-2 rounded border border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-3 h-3 border border-orange-500 bg-[url(#pattern-xa)]"})," XA 极值非球面"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-3 h-3 border border-green-500 bg-[url(#pattern-ed)]"})," ED 低色散"]})]})}),e.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 800 500",children:[e.jsxs("defs",{children:[e.jsx("pattern",{id:"pattern-xa",patternUnits:"userSpaceOnUse",width:"6",height:"6",patternTransform:"rotate(45)",children:e.jsx("line",{x1:"0",y1:"0",x2:"0",y2:"6",stroke:"#ea580c",strokeWidth:"2"})}),e.jsx("pattern",{id:"pattern-ed",patternUnits:"userSpaceOnUse",width:"6",height:"6",children:e.jsx("line",{x1:"0",y1:"0",x2:"6",y2:"0",stroke:"#16a34a",strokeWidth:"2"})})]}),e.jsx("line",{x1:"0",y1:i,x2:"800",y2:i,stroke:"#334155",strokeDasharray:"4,4"}),e.jsxs("g",{transform:`translate(${j}, ${i})`,children:[e.jsx("line",{x1:"0",y1:"-60",x2:"0",y2:"60",stroke:"#94a3b8",strokeWidth:"4"}),e.jsx("text",{x:"10",y:"0",fill:"#64748b",fontSize:"10",style:{writingMode:"vertical-rl"},children:"CMOS Full Frame"})]}),F.map((s,l)=>s.type==="APERTURE"?e.jsxs("g",{transform:`translate(${s.x}, ${i})`,children:[e.jsx("line",{x1:"0",y1:-s.h-20,x2:"0",y2:-s.h,stroke:"#eab308",strokeWidth:"3"}),e.jsx("line",{x1:"0",y1:s.h+20,x2:"0",y2:s.h,stroke:"#eab308",strokeWidth:"3"})]},l):e.jsxs("g",{transform:`translate(${s.x}, ${i})`,children:[e.jsx("path",{d:s.f>0?`M-5,-${s.h} Q15,0 -5,${s.h} L5,${s.h} Q-15,0 5,-${s.h} Z`:`M-5,-${s.h} Q-15,0 -5,${s.h} L5,${s.h} Q15,0 5,-${s.h} Z`,fill:s.type==="XA"?"url(#pattern-xa)":s.type==="ED"?"url(#pattern-ed)":"rgba(34, 211, 238, 0.15)",stroke:s.type==="XA"?"#ea580c":s.type==="ED"?"#16a34a":s.f>0?"#22d3ee":"#a8a29e",strokeWidth:"1.5"}),e.jsx("text",{x:"-10",y:-s.h-10,fill:s.type==="XA"?"#ea580c":s.type==="ED"?"#16a34a":"#475569",fontSize:"9",fontWeight:"bold",children:s.name}),e.jsx("path",{d:"M-2,-10 L2,0",stroke:"white",strokeWidth:"1",opacity:"0.3"})]},l)),A&&W.map((s,l)=>e.jsx("polyline",{points:s.path.map(a=>`${a.x},${a.y}`).join(" "),fill:"none",stroke:s.color,strokeWidth:"1",opacity:"0.4"},l)),h<d-10&&e.jsxs("g",{transform:`translate(${h}, ${i})`,children:[e.jsx("line",{x1:"0",y1:"-40",x2:"0",y2:"40",stroke:"white",strokeWidth:"2"}),e.jsx("text",{x:"-10",y:"-50",fill:"white",fontSize:"10",children:"Subject"}),e.jsx("path",{d:"M0,-40 L-5,-30 L5,-30 Z",fill:"white"})]}),e.jsx("g",{className:"transition-opacity duration-300",children:(()=>{const s=i+120,l=h<20?20:h,a=j,r=Math.min(Math.max((l+a)/2,100),700);return e.jsxs("g",{children:[e.jsx("line",{x1:l,y1:s,x2:a,y2:s,stroke:"#10b981",strokeWidth:"1"}),e.jsx("line",{x1:a,y1:s-5,x2:a,y2:s+5,stroke:"#10b981",strokeWidth:"2"}),e.jsx("line",{x1:l,y1:s-5,x2:l,y2:s+5,stroke:"#10b981",strokeWidth:"2"}),e.jsx("line",{x1:a,y1:i+70,x2:a,y2:s,stroke:"#10b981",strokeDasharray:"2,2",opacity:"0.3"}),e.jsx("rect",{x:r-40,y:s-10,width:"80",height:"20",fill:"#020617",rx:"4",stroke:"#10b981",strokeWidth:"1"}),e.jsx("text",{x:r,y:s+4,fill:"#10b981",fontSize:"11",textAnchor:"middle",fontFamily:"monospace",children:o<1e4?`${(o/1e3).toFixed(2)}m`:"∞"})]})})()})]})]}),e.jsxs("div",{className:"w-full lg:w-80 bg-slate-900 border-l border-slate-800 flex flex-col overflow-y-auto select-none",children:[e.jsxs("div",{className:"p-6 pb-2 border-b border-slate-800",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-100 flex items-center gap-2",children:[e.jsx(Y,{className:"text-cyan-400",size:20}),"实验室 (Lab)"]}),e.jsx("div",{className:"mt-4",children:e.jsx(V,{label:"镜头预设 (Lens Preset)",value:b,options:Object.keys(w).map(s=>({label:w[s].name,value:s})),onChange:s=>X(s)})}),e.jsxs("div",{className:"mt-4 bg-gradient-to-r from-slate-800 to-slate-900 border border-slate-700 p-3 rounded-lg relative overflow-hidden group",children:[e.jsx("div",{className:"absolute -right-4 -top-4 text-slate-700 opacity-20 transform rotate-12",children:e.jsx(L,{size:80})}),e.jsxs("div",{className:"text-[10px] font-bold text-cyan-400 mb-1 flex items-center gap-1",children:[e.jsx(L,{size:10})," 圈内黑话 (Community Insight)"]}),e.jsxs("div",{className:"text-[10px] text-slate-300 leading-relaxed italic",children:['"',t.meme,'"']})]})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-black rounded-lg border-2 border-slate-700 p-2 relative overflow-hidden aspect-video flex items-center justify-center group shadow-lg",children:[e.jsxs("div",{className:"absolute top-2 left-2 text-[10px] text-green-500 font-mono z-10 flex items-center gap-1",children:[e.jsx(se,{size:10})," REC [STANDBY]"]}),e.jsxs("div",{className:"absolute bottom-2 right-2 text-[10px] text-white font-mono z-10",children:[y.toFixed(0),"mm"]}),e.jsxs("div",{className:"w-full h-full relative transition-transform duration-300 ease-out",style:{transform:`scale(${1+m*1.5}) scale(${R})`,backgroundImage:"linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px)",backgroundSize:"20px 20px"},children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-16 h-16 border border-white/50 rounded-full flex items-center justify-center",children:e.jsx("div",{className:"w-1 h-1 bg-red-500 rounded-full animate-pulse"})})}),e.jsx("div",{className:"absolute top-1/4 left-1/4 w-8 h-20 bg-slate-700/50"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-12 h-12 bg-slate-600/50 rounded-full"})]}),e.jsx("div",{className:"absolute inset-0 pointer-events-none bg-black transition-opacity duration-300",style:{opacity:.8-(32-n)/32*.8}}),e.jsx("div",{className:"absolute inset-4 border border-white/20 pointer-events-none"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs mb-2",children:[e.jsx("span",{className:"text-slate-400",children:"变焦 (Zoom)"}),e.jsxs("span",{className:"text-cyan-400 font-mono",children:[y.toFixed(0),"mm"]})]}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:m,disabled:t.type==="Prime",onChange:s=>k(parseFloat(s.target.value)),className:`w-full h-1 rounded appearance-none ${t.type==="Prime"?"bg-slate-800 cursor-not-allowed":"bg-slate-700 accent-cyan-500"}`})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs mb-2",children:[e.jsx("span",{className:"text-slate-400",children:"对焦 (Distance)"}),e.jsxs("span",{className:"text-emerald-400 font-mono",children:[(o/1e3).toFixed(2),"m"]})]}),e.jsx("input",{type:"range",min:t.minFocus,max:"5000",step:"10",value:o,onChange:s=>M(parseFloat(s.target.value)),className:"w-full accent-emerald-500 h-1 bg-slate-700 appearance-none rounded dir-rtl"}),e.jsxs("div",{className:"mt-4",children:[e.jsx(O,{label:"呼吸补偿 (Breathing Comp.)",checked:f,onChange:T}),e.jsx("div",{className:"text-[10px] text-slate-500 leading-tight",children:f?"启用补偿：视角锁定。通过裁切画面边缘，抵消对焦时的物理焦距变化。":"原生光学：视角随对焦距离改变（呼吸效应）。"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs mb-2",children:[e.jsx("span",{className:"text-slate-400",children:"光圈 (Aperture)"}),e.jsxs("span",{className:"text-yellow-500 font-mono",children:["f/",n.toFixed(1)]})]}),e.jsx("input",{type:"range",min:t.minAp,max:t.maxAp,step:.1,value:n,onChange:s=>N(parseFloat(s.target.value)),className:"w-full accent-yellow-500 h-1 bg-slate-700 appearance-none rounded"}),e.jsxs("div",{className:"flex justify-between h-4 mt-1",children:[n<2&&e.jsxs("span",{className:"text-[10px] text-pink-400 flex items-center gap-1",children:[e.jsx(z,{size:8})," 刀锐奶化 (Creamy)"]}),n>16&&e.jsxs("span",{className:"text-[10px] text-orange-400 flex items-center gap-1 ml-auto",children:[e.jsx(z,{size:8})," 衍射画质崩坏"]})]})]})]}),e.jsxs("div",{className:"bg-slate-800 rounded p-3 border border-slate-700",children:[e.jsxs("h4",{className:"text-xs font-bold text-slate-300 flex items-center gap-2 mb-2",children:[e.jsx(te,{size:12,className:"text-emerald-400"})," 景深计算器 (DoF Calc)"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[e.jsxs("div",{className:"bg-slate-900 p-1 rounded",children:[e.jsx("div",{className:"text-[9px] text-slate-500",children:"前界限"}),e.jsxs("div",{className:"text-[10px] font-mono text-emerald-300",children:[(g.near/1e3).toFixed(2),"m"]})]}),e.jsxs("div",{className:"bg-slate-900 p-1 rounded",children:[e.jsx("div",{className:"text-[9px] text-slate-500",children:"后界限"}),e.jsx("div",{className:"text-[10px] font-mono text-emerald-300",children:g.far===1/0?"∞":(g.far/1e3).toFixed(2)+"m"})]}),e.jsxs("div",{className:"bg-slate-900 p-1 rounded border border-emerald-900/50",children:[e.jsx("div",{className:"text-[9px] text-slate-500",children:"总景深"}),e.jsx("div",{className:"text-[10px] font-mono text-emerald-400 font-bold",children:g.depth===1/0?"∞":(g.depth/1e3).toFixed(2)+"m"})]})]})]}),e.jsxs("div",{className:"bg-slate-800 rounded p-3 border border-slate-700",children:[e.jsxs("h4",{className:"text-xs font-bold text-slate-300 flex items-center gap-2 mb-2",children:[e.jsx(ae,{size:12,className:"text-blue-400"})," 镜头参数 (Specs)"]}),e.jsxs("ul",{className:"text-[10px] space-y-1 text-slate-400",children:[e.jsxs("li",{className:"flex justify-between",children:[e.jsx("span",{children:"别名:"})," ",e.jsx("span",{className:"text-cyan-200",children:t.nickname})]}),e.jsxs("li",{className:"flex justify-between",children:[e.jsx("span",{children:"结构:"})," ",e.jsx("span",{className:"text-slate-200",children:t.elements})]}),e.jsxs("li",{className:"flex justify-between",children:[e.jsx("span",{children:"重量:"})," ",e.jsx("span",{className:"text-slate-200",children:t.weight})]})]})]}),e.jsxs("div",{className:"bg-slate-800 rounded-lg p-3 border border-slate-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-xs font-bold text-slate-300",children:"MTF 模拟 (玄学曲线)"}),e.jsx("span",{className:"text-[9px] text-cyan-400",children:"@ 30 lp/mm"})]}),e.jsx("div",{className:"relative h-12 w-full bg-slate-900 border border-slate-700/50 rounded overflow-hidden",children:e.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 180 80",preserveAspectRatio:"none",children:[e.jsx("path",{d:G,stroke:"#22d3ee",strokeWidth:"2",fill:"none"}),e.jsx("line",{x1:"0",y1:"20",x2:"180",y2:"20",stroke:"#334155",strokeDasharray:"2,2"}),e.jsx("line",{x1:"0",y1:"40",x2:"180",y2:"40",stroke:"#334155",strokeDasharray:"2,2"}),e.jsx("line",{x1:"0",y1:"60",x2:"180",y2:"60",stroke:"#334155",strokeDasharray:"2,2"})]})})]}),e.jsx(O,{label:"显示光路 (Ray Tracing)",checked:A,onChange:P})]})]})]})};export{ye as ZoomSystemView};
