import{c as $,r as d,j as s,m as tr,n as nr,R as U}from"./index-DLsEVmbJ.js";import{U as hn,S as rr}from"./upload-6DY4oJd4.js";import{B as sr}from"./brain-kyESeXgQ.js";import{P as or}from"./play-BUG3DqJg.js";import{C as Qt}from"./circle-check-big-BwP75ji2.js";import{C as Rt}from"./circle-x-CLNHnLYK.js";import{S as ar,A as ir}from"./square-check-big-3wRPcLym.js";import{T as xn}from"./timer-Cy1DGk24.js";import{R as lr}from"./refresh-cw-CqjKI_Po.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],dr=$("arrow-left",cr);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],fr=$("arrow-up",ur);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],xr=$("chart-no-axes-column",hr);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],gr=$("check",pr);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],br=$("circle-alert",mr);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],yr=$("circle-check",vr);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Sr=$("circle-question-mark",wr);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Cr=$("copy",Nr);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=[["path",{d:"m10 15 5 5 5-5",key:"1hpjnr"}],["path",{d:"M4 4h7a4 4 0 0 1 4 4v12",key:"wcbgct"}]],Ar=$("corner-right-down",Dr);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],pn=$("database",Er);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],gn=$("download",jr);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],Ir=$("file-plus",Rr);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],kr=$("file-text",Mr);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Tr=$("grip-vertical",Or);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Pr=$("hash",Lr);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],Ur=$("keyboard",Hr);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],zr=$("link",$r);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Wt=$("plus",Fr);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Vr=$("save",_r);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],Gr=$("shuffle",Br);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Xr=$("trash-2",Yr);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Qr=$("trophy",Kr);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],Jr=$("undo-2",Wr),b=(e,t,n,r,o,a,i)=>({id:e,category:t,type:"SINGLE",difficulty:n,question:r,options:o,correctAnswer:a,explanation:i}),rt=(e,t,n,r,o,a)=>({id:e,category:t,type:"TRUE_FALSE",difficulty:n,question:r,options:["正确 (True)","错误 (False)"],correctAnswer:o?"正确 (True)":"错误 (False)",explanation:a}),je=(e,t,n,r,o,a,i,l,u)=>({id:e,category:t,type:"FILL_BLANK",difficulty:n,question:r,options:[],acceptedAnswers:o,correctAnswer:a,explanation:i,inputPrefix:l,inputSuffix:u}),z=(e,t,n,r,o,a,i)=>({id:e,category:t,type:"MULTI",difficulty:n,question:r,options:o,correctAnswer:a,explanation:i}),Re=(e,t,n,r,o,a,i)=>({id:e,category:t,type:"ORDER",difficulty:n,question:r,options:o,correctAnswer:a,explanation:i}),we=(e,t,n,r,o,a,i)=>({id:e,category:t,type:"INTERACTIVE",difficulty:n,question:r,options:[],correctAnswer:a,interactive:o,explanation:i}),st=(e,t,n,r,o,a)=>({id:e,category:t,type:"MATCHING",difficulty:n,question:r,options:o.map(i=>i[0]),correctAnswer:o.map(i=>i[1]),explanation:a}),ae=[st(801,"Color","MEDIUM","请将以下曲线名称与其核心特性/用途进行配对：",[["Log","画面灰度低，保留最大动态范围，需后期还原"],["Rec.709","高对比度，色彩饱和，所见即所得，宽容度低"],["RAW","未经过白平衡和去马赛克处理的传感器原始数据"],["LUT","一种数学映射表，用于将 Log 转换为 709 或风格化"]],"Log 像是未显影的底片（灰、宽容度高），Rec.709 是冲洗好的照片（对比度高、易丢失细节）。"),st(802,"Optics","EASY","请将焦段与其最常用于的拍摄题材进行配对：",[["14mm - 24mm","冲击力极强的透视，适合建筑与宏大风景"],["35mm - 50mm","接近人眼注意力的视角，适合人文纪实与街拍"],["85mm - 135mm","压缩背景，分离主体，适合特写人像"],["400mm - 600mm","极窄视角，适合野生动物与体育竞技"]],"广角夸张透视，长焦压缩空间。"),st(803,"Sensor","MEDIUM","请将传感器画幅与其对应的裁切系数（Crop Factor）配对：",[["Full Frame (全画幅)","1.0x"],["APS-C (Sony/Nikon)","1.5x"],["Micro 4/3 (M43)","2.0x"],["Medium Format (4433)","0.79x"]],"传感器越小，裁切系数越大，等效焦距越长。中画幅传感器比全画幅大，系数小于1。"),st(804,"Lighting","MEDIUM","在经典人像布光中，请将灯位与其功能目标进行配对：",[["Key Light (主光)","决定主体的曝光基准与光影造型"],["Fill Light (辅光)","控制光比，提亮阴影细节"],["Rim Light (轮廓光)","将深色头发/主体从黑暗背景中分离"],["Background Light (背景光)","照亮环境，消除主体在墙上的投影"]],"主光造型，辅光补气，轮廓光分离，背景光营造空间。"),Re(701,"Exposure","MEDIUM","请按物理通光孔径从大到小排列：",["f/1.2","f/2.8","f/5.6","f/11","f/22"],["f/1.2","f/2.8","f/5.6","f/11","f/22"],"F数值的分母越大，分数越小，孔径越小。f/1.2 是巨大的光孔，f/22 是针孔。"),Re(702,"Formats","MEDIUM","在相同分辨率和帧率下，按视频码率通常从高到低排列：",["ProRes 4444 XQ","ProRes 422 HQ","H.264 (AVC)","H.265 (HEVC)"],["ProRes 4444 XQ","ProRes 422 HQ","H.264 (AVC)","H.265 (HEVC)"],"ProRes 是帧内编码，数据量巨大；H.265 压缩效率最高，同画质下码率最低。"),Re(703,"Color","HARD","按色彩空间的色域覆盖范围，从窄到宽排列：",["Rec.709 / sRGB","DCI-P3","Rec.2020","ACES AP0"],["Rec.709 / sRGB","DCI-P3","Rec.2020","ACES AP0"],"Rec.709 是最基础的高清标准；P3 是电影标准；2020 是超高清标准；ACES AP0 包含人眼可见光。"),we(901,"Lighting","MEDIUM","请将色温滑块调整至传统钨丝灯 (Tungsten) 的标准数值。",{min:2e3,max:1e4,step:100,unit:"K",correctValue:3200,tolerance:200,visual:"COLOR_TEMP"},"3200K","钨丝灯的色温标准为 3200K (偏橙黄)，而正午日光通常定义为 5600K (偏白/蓝)。"),we(902,"Optics","MEDIUM","拍摄环境人像 (Environmental Portrait) 时，既要突出人物又要保留背景环境，请选择最经典的人文焦段。",{min:16,max:200,step:1,unit:"mm",correctValue:35,tolerance:5,visual:"FOCAL_LENGTH"},"35mm","35mm 是经典的人文焦段，被称为“进可攻退可守”。85mm 虽然是人像皇，但视角太窄，容易把环境完全虚化或裁切掉。"),we(903,"Video","HARD","以 60fps 拍摄慢动作视频时，为了维持标准的 180° 快门角（自然动态模糊），快门速度分母应设为多少？",{min:10,max:200,step:1,unit:"",correctValue:120,tolerance:5,visual:"SHUTTER"},"120 (1/120s)","180° 规则公式：快门速度 = 1 / (2 × 帧率)。60fps × 2 = 120。"),we(904,"Sensor","HARD","调整至 Sony FX3 / A7S3 在 S-Log3 模式下的第二基准 ISO (High Base) 数值。",{min:800,max:25600,step:100,unit:"",correctValue:12800,tolerance:0,visual:"ISO"},"12800","双原生 ISO 技术中，12800 是高增益电路的起跳点。在此数值下，信噪比重置，画质比 10000 或 8000 更加纯净。"),we(905,"Audio","MEDIUM","为了切除人声录音中的低频隆隆声 (Rumble) 和喷麦声，高通滤波器 (HPF) 的截止频率通常建议设置在？",{min:20,max:200,step:5,unit:"Hz",correctValue:80,tolerance:10,visual:"AUDIO_HZ"},"75Hz - 90Hz","人声的基频通常在 100Hz 以上。切除 80Hz 以下的频率可以去除空调声、脚步声和部分喷麦噪音，且不影响人声厚度。"),we(906,"Video","MEDIUM","调整快门速度至拍摄百米冲刺等高速运动推荐的起始安全值 (Freeze Motion)。",{min:100,max:2e3,step:100,unit:"",correctValue:1e3,tolerance:200,visual:"SHUTTER"},"1000 (1/1000s)","拍摄高速运动时，为了凝固瞬间动作（如水滴溅起、短跑），快门速度通常需要达到 1/1000s 或更快。"),we(908,"Optics","EASY","调整至公认的“超广角”起始焦距 (全画幅)。",{min:10,max:50,step:1,unit:"mm",correctValue:16,tolerance:4,visual:"FOCAL_LENGTH"},"16mm - 20mm","一般将 24mm 以下称为超广角。16-35mm 是经典的大三元广角变焦焦段。"),b(1,"Optics","EASY","在全画幅相机上使用 50mm 标准镜头，其透视特性最准确的描述是？",["透视关系平实自然，既不夸张也不压缩","完全还原人眼 180 度的视野","产生明显的长焦空间压缩感","产生明显的广角桶状畸变"],"透视关系平实自然，既不夸张也不压缩","50mm 被称为标头是因为其透视关系（物体大小随距离缩小的比例）最接近人眼专注时的感觉，而非视场角（FOV）等于人眼。"),b(2,"Optics","MEDIUM","关于 T-Stop (T值) 与 F-Stop (F值) 的区别，以下说法正确的是？",["T值是考虑了镜片透光率损耗后的实际通光量","F值更适合电影拍摄，因为计算更精确","T值只取决于光圈孔径的几何直径","两者完全通用，数值永远相等"],"T值是考虑了镜片透光率损耗后的实际通光量","F值是几何计算值 (焦距/孔径)。镜头内含多片玻璃，光线会有损耗。T值 = F值 / √透光率，确保了不同镜头切换时曝光绝对一致。"),z(3,"Optics","EASY","想要获得浅景深 (背景虚化) 效果，以下哪些操作是有效的？",["使用大光圈 (如 f/1.8)","使用长焦距 (如 85mm+)","靠近被摄主体 (缩短物距)","提高快门速度","提高 ISO"],["使用大光圈 (如 f/1.8)","使用长焦距 (如 85mm+)","靠近被摄主体 (缩短物距)"],"景深三要素：光圈、焦距、物距。快门和 ISO 仅影响曝光亮度，不影响光学景深。"),b(4,"Optics","HARD","APO (复消色差) 镜头的设计目标主要是为了解决什么光学缺陷？",["轴向色差 (Axial CA)","桶形畸变 (Barrel Distortion)","暗角 (Vignetting)","呼吸效应 (Focus Breathing)"],"轴向色差 (Axial CA)","普通消色差镜头只能将红蓝两色光汇聚一点，APO 镜头能将红、绿、蓝三色光都汇聚在同一点，彻底消除高反差边缘的色散。"),b(6,"Optics","MEDIUM","为什么无反相机 (如 Sony E) 可以通过转接环使用单反镜头 (如 Canon EF)，反之则不行？",["无反法兰距极短，有空间塞入转接环来补齐距离","无反相机传感器更小","单反镜头像场不够大","无反相机电子触点更多"],"无反法兰距极短，有空间塞入转接环来补齐距离","E卡口法兰距 18mm，EF卡口 44mm。中间有 26mm 的差值，正好可以做一个厚度 26mm 的转接环。反之，法兰距不够，不仅没空间，甚至镜头会打到反光板。"),b(8,"Optics","MEDIUM","“场曲 (Field Curvature)”像差会导致什么典型的成像问题？",["当中心合焦清晰时，边缘处于焦外（模糊）","直线在画面中弯曲成曲线","高光部分出现星芒","画面色彩饱和度降低"],"当中心合焦清晰时，边缘处于焦外（模糊）","完美的焦平面应该是平的，但场曲会导致焦平面变成一个曲面（碗状）。拍摄平面物体（如墙壁、报纸）时无法全屏合焦。"),b(9,"Optics","HARD","在星空摄影中，为了减少画面边缘点光源产生的彗差（Coma），以下哪一类镜头设计取向最为关键？",["针对大光圈边缘像差进行优化的光学设计","以消除横向与纵向色差为目标的 APO 设计","追求几何直线还原的低畸变设计","具备 1:1 放大倍率的微距镜头结构","具备像场平坦化（Field Flattener）的镜头","可进行透视校正的移轴镜头"],"针对大光圈边缘像差进行优化的光学设计","彗差主要来源于大光圈下画面边缘光线无法在同一点聚焦，因此是否专门针对边缘像差进行优化（尤其在全开光圈下）才是关键。"),z(21,"Sensor","MEDIUM","在不使用闪光灯的暗光环境下拍摄运动物体，为了防止画面模糊，应该优先调整？",["开大光圈","提高 ISO","降低快门速度","使用三脚架","开启镜头防抖"],["开大光圈","提高 ISO"],"要防止物体运动模糊，必须保证足够快的快门速度。暗光下为了维持快门速度，必须增加进光量（开光圈）或增加增益（提ISO）。三脚架和防抖只能防止手抖，不能防止物体动。"),b(218,"Exposure","HARD","在使用 S-Log3 拍摄时，为什么官方建议“向右曝光 (ETTR)”？",["为了让暗部细节远离底噪区域，提升信噪比","为了让高光过曝，形成胶片感","为了获得更准确的白平衡","为了减少文件体积"],"为了让暗部细节远离底噪区域，提升信噪比","Log 曲线极大地提亮了暗部，如果不增加曝光，暗部有效信号会由于得不到足够的光子而淹没在传感器底噪中，后期还原时会满屏噪点。"),b(22,"Sensor","HARD","关于“ISO 不变性 (ISO Invariance)”传感器，以下描述正确的是？",["前期欠曝拍摄，后期在软件提亮，画质与前期直接使用高ISO拍摄几乎一致","ISO 设置越高，动态范围越高","只能在 ISO 100 下工作","完全没有噪点的传感器"],"前期欠曝拍摄，后期在软件提亮，画质与前期直接使用高ISO拍摄几乎一致","对于 ISO 不变性传感器（如 Sony 大部分背照式），光电转换后的模拟增益在后端数字处理中做是一样的。这允许摄影师为了保护高光而故意欠曝，后期提亮暗部而不崩坏。"),je(23,"Sensor","EASY","APS-C (Sony/Nikon) 的等效系数是？",["1.5","1.5x"],"1.5","Canon 为 1.6x，M43 为 2.0x。","","x"),b(24,"Sensor","MEDIUM","在RAW解码时，拜耳阵列的RGGB排列会影响图像处理流程，因为绿色像素的数量更多。这种设计主要是为了：",["模拟人眼对亮度信息的敏感特性，获得更好的细节过渡","让画面偏绿以获得更自然的色彩","降低传感器的制造成本","减少摩尔纹现象","提升高光区域的动态范围","简化镜头光学设计"],"模拟人眼对亮度信息的敏感特性，获得更好的细节过渡","人眼对绿色波段（约550nm）的亮度最敏感，因此拜耳阵列中绿色占50%（RGGB排列），红蓝各占25%。"),b(25,"Sensor","MEDIUM","信噪比 (SNR) 的提升主要依赖于？",["增加进光量或像素面积","单纯提高 ISO 数值","使用更快的快门速度","提高锐度设置","使用 Log 模式","降低色彩位深"],"增加进光量或像素面积","信噪比 = 信号/噪声。增加信号（光子数量）是提升画质的物理基础。"),b(46,"Video","HARD","在中国或欧洲拍摄 24fps 电影感视频时，为了避免灯光频闪，快门角度应设为？",["172.8°","180°","144°","90°"],"172.8°","中国/欧洲使用 50Hz 交流电，频闪周期是 1/100s。要消除频闪，快门必须是 1/50s 的整数倍。标准 180° 快门对应 1/48s，会导致频闪。需要调整为 172.8° 也就是 1/50s。"),b(120,"Format","MEDIUM","关于 ProRes 422 与 H.265 (HEVC) 在后期剪辑中的性能权衡，描述正确的是？",["ProRes: 剪辑极流畅但文件巨大；H.265: 剪辑卡顿但文件极小","ProRes: 文件小且流畅；H.265: 文件大且卡顿","两者性能完全一致，只是厂商不同","H.265 是无损格式，ProRes 是有损格式"],"ProRes: 剪辑极流畅但文件巨大；H.265: 剪辑卡顿但文件极小","H.265 采用复杂的帧间压缩（Long-GOP），解压极耗 CPU；ProRes 是帧内编码（All-Intra），几乎不耗算力，但代价是硬盘空间。"),b(42,"Video","MEDIUM","4:2:2 采样相比 4:2:0，主要优势体现在什么场景？",["绿幕抠像与重度调色","黑白电影","静态风景","低码率直播"],"绿幕抠像与重度调色","4:2:2 保留了更多的色度信息。在抠像时，边缘的色彩过渡更锐利，不会出现锯齿或灰边。"),z(41,"Video","HARD","以下哪些特性更符合帧内编码（Intra-frame）的工作方式？（多选）",["每一帧可独立解码","剪辑时对计算性能要求较低","压缩效率通常低于帧间编码","强依赖前后帧预测信息","文件体积在同画质下通常较大"],["每一帧可独立解码","剪辑时对计算性能要求较低","压缩效率通常低于帧间编码","文件体积在同画质下通常较大"],"帧内编码不依赖时间预测，因此解码压力小但压缩效率较低。"),rt(44,"Video","MEDIUM","Log 模式下画面对比度和饱和度较低，主要是为了在有限比特深度下记录更多亮暗细节。",!0,"Log 曲线通过重新分配亮度信息，提高动态范围利用效率，而非曝光失误。"),b(45,"Video","MEDIUM","波形图 (Waveform) 的 X 轴代表什么？",["画面水平位置","频率","时间轴","色彩饱和度","光圈值","音频电平"],"画面水平位置","波形图从左到右对应画面的从左到右，显示对应列的亮度分布。"),b(254,"Lighting","EASY","以下哪种布光方式会在主体面部产生最硬（边缘最锐利）的阴影？",["5米外的一颗裸灯泡","带有柔光布的 LED 平板灯","天花板漫反射下来的光","环形补光灯"],"5米外的一颗裸灯泡","光质的软硬取决于光源相对于主体的视面积。光源越小、距离越远，光线越硬。裸灯泡是典型的点光源，产生极硬的阴影。"),b(65,"Lighting","HARD","如果想要让灯光变得更“柔和”，最根本的物理手段是？",["增大光源相对于主体的视面积","降低灯光亮度","加蓝色色片","使用菲涅尔透镜聚焦"],"增大光源相对于主体的视面积","光线的软硬不取决于亮度或色温，只取决于“相对面积”。加柔光箱、柔光布、打反光板，本质上都是把点光源变成巨大的面光源。"),je(62,"Lighting","MEDIUM","根据平方反比定律，光源距离增加一倍，光照强度变为原来的____。",["4"],"1/4","距离加倍 (2x)，光照强度变为平方的倒数(1/2² = 1/4)。","1/",""),b(63,"Lighting","MEDIUM","CRI (显色指数) 主要衡量光源的什么能力？",["还原物体真实颜色的能力","色温的准确度","最大流明输出","光线的柔和度","频闪控制能力","发光效率"],"还原物体真实颜色的能力","CRI (显色指数) 满分 100，越高越接近太阳光光谱。色温准不准看 K 值，光质软硬看面积，与 CRI 无关。"),b(64,"Lighting","EASY","蝴蝶光 (Butterfly Lighting) 的主要特征是？",["鼻子下方有蝴蝶状阴影","面部完全平光","阴影在面部一侧","背光剪影","侧逆光轮廓","背景全白"],"鼻子下方有蝴蝶状阴影","主光位高且正对人脸，常用于女性人像，显脸瘦。"),b(80,"Audio","MEDIUM","在嘈杂的街头采访，最适合使用的麦克风指向性是？",["全向 (Omni)","超心形/枪式 (Shotgun)","8字形 (Figure-8)","立体声 (Stereo)"],"超心形/枪式 (Shotgun)","枪式麦克风利用干涉原理极大地抵消侧面和背面的环境噪音，只拾取前方人声，信噪比最高。"),b(203,"Audio","HARD","平衡传输 (XLR / Balanced) 能够消除底噪的物理原理是？",["利用相位抵消原理，在接收端消除线材感应的共模噪声","使用无氧铜材料降低电阻","电压比非平衡线高 10 倍","线材自带电池进行主动降噪"],"利用相位抵消原理，在接收端消除线材感应的共模噪声","平衡线有冷热两端传输反相信号。噪音同时进入两端（同相）。接收端将冷端再次反相并与热端叠加：信号增强，噪音抵消。"),rt(81,"Audio","HARD","32-bit Float 录音格式即使电平超过 0dB 也可以后期拉回而不爆音。",!0,"拥有超高动态范围 (超过1500dB)，后期可拉回过曝电平。"),b(82,"Audio","EASY","专业电容麦克风需要的幻象电源电压通常是？",["48V","12V","5V","24V","9V","220V"],"48V","XLR 接口标准供电。"),Re(83,"Audio","MEDIUM","按采样率从低到高排列：",["44.1 kHz","48 kHz","96 kHz","192 kHz"],["44.1 kHz","48 kHz","96 kHz","192 kHz"],"CD标准为 44.1k，视频标准通常为 48k。"),z(84,"Audio","MEDIUM","录制人声对白时，前期应尽量避免？",["环境回声/混响","不可控的风噪","过大的底噪","声音过干 (无混响)","麦克风防震架","卡农线屏蔽"],["环境回声/混响","不可控的风噪","过大的底噪"],"后期加混响容易，去混响非常难且会有音质损失。前期录音越干越好。"),je(85,"Audio","HARD","根据奈奎斯特定理，要无损还原信号，采样率必须至少是最高频率的____倍。",["2","2倍","两倍"],"2","奈奎斯特采样定理规定：采样率 > 2倍信号最高频率。","至少 "," 倍"),b(93,"Post","MEDIUM","在色彩管理中，LUT (Look Up Table) 的本质是？",["一个输入值到输出值的数学映射表","一种智能 AI 调色滤镜","一种 RAW 数据解压算法","一种降噪工具"],"一个输入值到输出值的数学映射表","LUT 不懂画面内容，它只是傻瓜式地把“颜色A”替换成“颜色B”。这也是为什么这套 LUT 在这个场景好看，换个场景就色彩断层的原因。"),Re(90,"Post","MEDIUM","请按常见色彩管理流程中的推荐顺序排列以下步骤：",["输入色彩空间转换（IDT）","基础曝光与白平衡校正","风格化处理或 LUT 应用","输出色彩空间转换（ODT）"],["输入色彩空间转换（IDT）","基础曝光与白平衡校正","风格化处理或 LUT 应用","输出色彩空间转换（ODT）"],"先统一输入色彩空间，再进行校正和风格处理，最后转换至目标输出空间。"),b(91,"Post","MEDIUM","矢量示波器 (Vectorscope) 主要用于观察？",["色相和饱和度","亮度分布","RGB通道平衡","音频相位","曝光量","对焦准确度"],"色相和饱和度","角度代表色相，距离圆心的距离代表饱和度。"),z(92,"Post","MEDIUM","判断白平衡是否准确，最直观的示波器是？",["RGB Parade (分量图)","Vectorscope (矢量图)","Histogram (直方图)","Waveform (波形图)","Luma Waveform","Audio Meter"],["RGB Parade (分量图)","Vectorscope (矢量图)"],"RGB Parade 看三通道是否水平对齐（中性灰），Vectorscope 看肤色线偏差。"),b(94,"Post","MEDIUM","在 DaVinci Resolve 中，'Lift' 滚轮主要影响画面的哪个部分？",["暗部 (Shadows)","亮部 (Highlights)","中间调 (Midtones)","所有部分均匀影响","高光 (Specular)","饱和度 (Saturation)"],"暗部 (Shadows)","Lift 主要调整暗部基准，Gamma 调整中间调，Gain 调整亮部。"),b(100,"Mech","EASY","五轴防抖 (IBIS) 中的 'Roll' 轴（旋转）防抖，通常只能由哪种方式实现？",["机身传感器旋转","镜头镜片位移 (OIS)","电子裁切","陀螺仪数据后期增稳"],"机身传感器旋转","镜头内的 OIS 镜片组通常只能上下左右平移（Pitch/Yaw/X/Y），无法旋转。只有机身传感器防抖 (IBIS) 才能通过旋转传感器来修正 Roll 轴抖动。"),b(101,"Misc","EASY","偏振镜 (CPL) 无法消除哪种反光？",["金属表面反光","水面反光","玻璃反光","树叶反光","皮肤油光","塑料反光"],"金属表面反光","金属反光不是偏振光，CPL 对其无效。"),je(102,"Misc","MEDIUM","10-bit 色深能显示约____亿种颜色 (保留一位小数)。",["10.7","10.73"],"10.7","2^10 = 1024 (每通道)。1024^3 ≈ 10.73 亿。","约 "," 亿"),z(103,"Mech","MEDIUM","液压云台相比球形云台的优势在于？",["运镜平滑，适合视频摇摄","提供动态平衡","体积更小更轻便","锁定速度更快","更便宜","更适合竖拍"],["运镜平滑，适合视频摇摄","提供动态平衡"],"液压云台提供恒定阻尼和回弹力，适合视频；球台适合摄影快速构图。"),b(104,"Mech","MEDIUM","无反相机转接单反镜头时，转接环的主要物理作用是？",["补齐法兰距","增加进光量","缩小成像圈","改变焦距","扩大像场","增加光圈"],"补齐法兰距","无反法兰距短，单反长，中间需要空心管子（转接环）来补齐距离，否则无法合焦。"),b(110,"Optics","MEDIUM","T值 (T-Stop) 与 F值 (F-Stop) 的核心区别？",["T值考虑了镜片透光率损耗","F值更适合电影拍摄","T值只取决于光圈孔径大小","没有区别","T值只用于摄影","F值更准确"],"T值考虑了镜片透光率损耗","T值是实际透过镜头的光量，F值是几何计算值。电影镜头用 T 值确保不同镜头间曝光一致。"),z(111,"Optics","HARD","衍射极限 (Diffraction Limit) 意味着什么？",["光圈过小会导致画质变软","最佳光圈通常在 F5.6-F8","F22 光圈画质最锐利","与像素密度无关","大光圈F1.2衍射最严重","传感器尺寸越小衍射越不明显"],["光圈过小会导致画质变软","最佳光圈通常在 F5.6-F8"],"光圈缩得太小（如 F22），光波发生衍射干扰，分辨率下降。"),b(112,"Sensor","MEDIUM","信噪比 (SNR) 越高意味着？",["画面越纯净，噪点越少","噪点越多","信号越弱","文件体积越大","动态范围降低","色彩偏移"],"画面越纯净，噪点越少","有效信号比例高，噪声比例低。"),rt(113,"Video","EASY","使用代理 (Proxy) 剪辑会降低最终导出的画质。",!1,"代理仅用于编辑时的流畅预览，导出渲染时软件会自动切回原始高画质素材。"),b(114,"Optics","HARD","关于变形宽银幕镜头 (Anamorphic) 的光学特征，以下描述正确的是？",["散景呈纵向椭圆，光斑拉丝呈水平方向","散景呈横向椭圆，光斑拉丝呈垂直方向","散景呈正圆形，无拉丝","散景呈六边形，拉丝呈放射状","焦外呈正方形","无眩光"],"散景呈纵向椭圆，光斑拉丝呈水平方向","变形镜组在水平方向压缩画面。还原后，光斑会变成明显的纵向（垂直）椭圆。"),b(122,"Format","MEDIUM","HEIF 格式的色深通常是？",["10-bit","8-bit","16-bit","12-bit","14-bit","32-bit"],"10-bit","比 8-bit JPEG 拥有更好的色彩过渡，且体积更小。"),b(130,"Industry","MEDIUM","ARRI Alexa 著名的色彩科学核心优势是？",["极高的高光滚落和肤色表现","分辨率最高","机身最轻便","ISO 最高","内置 ND 滤镜","菜单设计"],"极高的高光滚落和肤色表现","Alexa 的传感器动态范围和色彩映射让高光过渡非常自然，接近胶片质感。"),je(131,"Industry","HARD","标准 IMAX 胶片的宽度是____mm。",["70","70mm"],"70mm","胶片宽度: 70mm (15孔)。","","mm"),z(132,"Industry","EASY","好莱坞主流的高端数字电影摄影机品牌通常包括？",["ARRI","RED","Panavision","Blackmagic","GoPro","DJI","Nikon","Insta360"],["ARRI","RED","Panavision"],"好莱坞工业标准通常由 ARRI (Alexa系列)、RED (V-Raptor/Monstro) 和 Panavision (DXL2) 主导。"),b(140,"Monitor","MEDIUM","假色 (False Color) 监看工具中，通常用什么颜色代表 18% 中性灰 (肤色基准)？",["绿色或灰色","红色","紫色","黄色","蓝色","橙色"],"绿色或灰色","在 ARRI 或 Sony 标准中，中性灰和肤色通常落在绿色波段附近。"),b(141,"Audio","EASY","幻象电源 (Phantom Power) 是通过哪种线缆传输的？",["XLR (卡农线)","3.5mm TRS","RCA (莲花头)","光纤","HDMI","USB"],"XLR (卡农线)","48V 幻象电源通过平衡 XLR 线缆同时传输信号和电力。"),rt(142,"Optics","EASY","变焦镜头通常比定焦镜头拥有更大的最大光圈。",!1,"定焦镜头结构简单，更容易做成 F1.2/F1.4 等超大光圈；变焦镜头通常做到 F2.8 已是顶级。"),z(143,"Video","MEDIUM","以下哪些因素会导致直播画面出现马赛克？",["上行码率不足","关键帧间隔 (GOP) 过长","网络丢包","色温设置错误","帧率过高","色彩采样过高"],["上行码率不足","关键帧间隔 (GOP) 过长","网络丢包"],"色温只会影响颜色，不会导致马赛克。关键帧间隔过长在画面剧烈变化时会导致模糊。"),b(144,"Lighting","MEDIUM","伦勃朗光 (Rembrandt Lighting) 的标志性特征是？",["暗部脸颊上的倒三角形亮区","面部完全平光","阴影在面部一侧","背光剪影","完全无阴影","蝴蝶型光斑"],"暗部脸颊上的倒三角形亮区","经典的 45 度布光，在背光侧脸颊形成标志性三角光。"),b(145,"Post","HARD","ACES 色彩管理系统的核心目标是？",["统一不同摄影机和显示设备的色彩标准","提高视频分辨率","自动剪辑视频","消除画面噪点","压缩视频体积","提高剪辑速度"],"统一不同摄影机和显示设备的色彩标准","学院色彩编码系统 (Academy Color Encoding System)，旨在解决多机型素材匹配和多平台交付的标准化问题。"),je(146,"Physics","EASY","光在真空中的速度约为每秒____万公里。",["30","30万"],"30万","光速 c ≈ 300,000 km/s。","约 "," 万公里"),Re(147,"Video","MEDIUM","按传感器成像面积从大到小排列：",["IMAX 15/70 胶片","Full Frame (全画幅)","Super 35","Micro 4/3"],["IMAX 15/70 胶片","Full Frame (全画幅)","Super 35","Micro 4/3"],"IMAX 胶片面积巨大，远超全画幅。Super 35 略小于全画幅 (APS-C 级别)。"),b(148,"Mechanics","MEDIUM","无人机航拍视频中，ND 滤镜的主要作用是？",["在明亮环境下保持 180° 快门角","增加画质锐度","改变天空颜色","保护镜头不被撞击","增加飞行时间","防止过热"],"在明亮环境下保持 180° 快门角","为了保持电影感动态模糊，快门不能太快，必须用 ND 压暗光线以维持 1/50s 左右的快门。"),b(149,"Lens","MEDIUM","微距镜头上的 'Focus Limiter' (对焦限制器) 开关的作用是？",["限制对焦搜索范围","限制最大光圈大小","限制最近对焦距离防止碰撞","锁定焦点防止误触","限制焦距","限制 ISO"],"限制对焦搜索范围","微距镜头行程极长，限制范围可以防止在全行程内'拉风箱'。"),b(201,"Optics","HARD","关于“远心镜头 (Telecentric Lens)”的光学特性，描述正确的是？",["主光线与光轴平行","放大倍率随物距剧烈变化","仅用于广角摄影","像场极度弯曲","畸变极大","主要用于人像"],"主光线与光轴平行","远心镜头的设计使得进入镜头的主光线平行于光轴。这意味着即使物体稍微靠近或远离镜头（物距变化），其在成像平面上的放大倍率保持不变。"),b(202,"Video","HARD","在 H.265/HEVC 编码中，'CTU (Coding Tree Unit)' 的最大尺寸通常是多少？",["64x64","16x16","32x32","128x128","256x256","8x8"],"64x64","相比 H.264 的宏块 (Macroblock) 最大 16x16，H.265 引入了 CTU 概念，最大支持 64x64 像素。"),b(204,"Color","HARD","在 ACES 工作流中，IDT (Input Device Transform) 的主要数学作用是？",["原生 RGB 映射至 ACES AP0 并线性化","风格化调色","Log 转 Rec.709","高光压缩","输出至显示器","降噪"],"原生 RGB 映射至 ACES AP0 并线性化","IDT 是进入 ACES 系统的关卡。它利用矩阵变换将不同摄影机传感器特定的原生色彩空间和伽马曲线，统一转换到标准的、线性的 ACES AP0 空间中。"),b(205,"Sensor","HARD","传感器微透镜 (Microlens) 的主要工程目的是？",["提升光子收集效率","消除摩尔纹","滤除红外线","实现全局快门","增加像素数量","改变光谱响应"],"提升光子收集效率","像素之间存在不感光的电路区域。微透镜覆盖在每个像素上方，将原本会打在电路区（无效区）的光线汇聚到感光二极管上，从而显著提升光子收集效率。"),b(206,"Monitor","MEDIUM","为什么有些监视器支持 'De-Log' 但不支持 '3D LUT'？",["De-Log 仅作一维 Gamma 映射","3D LUT 需昂贵面板","De-Log 仅显示黑白","二者无区别","De-Log 增加动态范围","3D LUT 更省电"],"De-Log 仅作一维 Gamma 映射","简单的 De-Log (Assist) 可能只是应用一个 1D LUT 或伽马校正公式，只改变亮度响应。而 3D LUT 需要进行复杂的三维色彩空间插值运算，对芯片算力要求更高。"),b(207,"Optics","HARD","微距摄影中使用'皮腔'大幅延长像距时，'有效光圈'变小的近似公式为？",["F_eff = F_set × (1 + M)","F_eff = F_set / M","F_eff = F_set × f","光圈值不变","F_eff = F_set","F_eff = F_set / 2"],"F_eff = F_set × (1 + M)","当放大倍率 (M) 达到 1:1 时，有效光圈数值会变为设定值的 2 倍（即暗 2 档）。这就是为什么微距拍摄时取景器会变暗。"),b(208,"Video","MEDIUM","SDI 接口相比 HDMI 接口，在物理传输层的一个显著劣势是？",["无 HDCP 握手协议","不支持 4K","无音频传输","传输距离短","带宽低","延迟高"],"无 HDCP 握手协议","SDI 是专业广播接口，设计之初就不包含 HDCP 加密协议。这使得它无法传输受版权保护的消费级内容（如蓝光机输出）。"),b(209,"Lighting","HARD","在评价 LED 光源的色彩还原能力时，TLCI 相比传统 CRI 指标的核心优势是？",["基于摄像机成像而非人眼视觉模型","对高饱和颜色更敏感","只评估绿色通道的准确性","主要用于自然光源评估","数值越高亮度越大","完全取代了 CRI 标准"],"基于摄像机成像而非人眼视觉模型","CRI 基于人眼对 8–15 种标准色样的主观评价，而 TLCI（Television Lighting Consistency Index）模拟的是摄像机传感器 + 广播流程的响应。"),b(210,"Lens","HARD","“后焦距 (Back Focus)”调节的主要作用是？",["校准变焦时的焦点漂移","调整最近对焦","改变光圈","调整焦外虚化","调整色彩","改变焦段"],"校准变焦时的焦点漂移","广播级和电影变焦镜头通常有后焦调节环。如果后焦不准，镜头在变焦过程中焦点会发生漂移（即广角端对焦后，推到长焦端焦点变虚），破坏齐焦特性。"),b(211,"Format","HARD","Apple ProRes 422 与 ProRes 422 HQ 的主要区别在于？",["目标码率不同","色深不同","采样不同","分辨率限制不同","帧率不同","压缩算法不同"],"目标码率不同","两者都是 10-bit 4:2:2 格式。唯一的区别是数据速率（压缩比）。HQ (High Quality) 保留更多高频细节，码率更高。"),b(212,"Audio","HARD","数字音频中的 'Jitter' (抖动) 指的是？",["时域采样时钟波动","音量波动","量化噪声","高频丢失","低频失真","音量过载"],"时域采样时钟波动","在数模转换 (DAC) 过程中，时钟信号的不精确导致采样点的时间间隔不均匀。这会导致高频信号失真，听感上表现为声音模糊、结像不实。"),b(213,"Physics","MEDIUM","同等光圈/视场角下，全画幅比 M43 景深更浅的根本原因是？",["同视角下物理焦距更长","传感器更贵","像素更多","进光量更大","像素密度不同","法兰距不同"],"同视角下物理焦距更长","景深主要由焦距、光圈和物距决定。为了在不同画幅获得相同的构图（视场角），全画幅需要更长的物理焦距，焦距变长直接导致景深变浅。"),b(214,"Video","HARD","矢量示波器 (Vectorscope) 上的 'I 线' (Skin Tone Line) 代表的色相角度大约是？",["123 度","90 度","180 度","45 度","270 度","0 度"],"123 度","无论种族黑白黄，人类皮下血管的血液颜色决定了健康肤色的基准色相是非常一致的。I 线位于矢量图的左上方，约为 11 点钟方向（约 123 度）。"),b(215,"Signal","HARD","双原生 ISO 技术中，高感档位 (High Base) 能够降低噪点的核心机制是？",["切换高增益电路","数字降噪","大电容","像素合并","多帧合成","增加电压"],"切换高增益电路","传感器在高基准 ISO 时，会切换到“高转换增益 (HCG)”模式，减小浮动扩散节点 (FD) 的电容容量。"),b(216,"Timecode","HARD","线性时间码 (LTC) 相比垂直间隔时间码 (VITC) 的主要缺陷是？",["静止或变速时无法读取","数据量大","不记小时","仅支持 24fps","精度低","占用视频线"],"静止或变速时无法读取","LTC 是作为音频信号记录在磁带音轨上的。就像磁带必须走动磁头才能读出声音一样，磁带停止时 LTC 信号消失，无法读取时间码。"),b(217,"Optics","HARD","'像散 (Astigmatism)' 在画面中主要表现为？",["子午与弧矢焦点不重合","中心清晰边缘旋转","高光紫边","直线变曲","色彩分离","暗角严重"],"子午与弧矢焦点不重合","像散是由于镜头在子午面和弧矢面上的焦距不一致造成的。会导致点光源在焦外呈现拉长的椭圆或线状，通常呈现旋转焦外的特征。"),b(219,"Data","HARD","RAID 5 阵列至少需要几块硬盘，且允许同时损坏几块硬盘而不丢失数据？",["最少3盘，坏1盘","最少2盘，坏1盘","最少4盘，坏2盘","最少3盘，坏2盘","最少5盘，坏1盘","最少4盘，坏1盘"],"最少3盘，坏1盘","RAID 5 使用分布式奇偶校验。它需要至少 3 块盘。任意一块盘损坏，都可以通过剩余盘的数据和校验信息算出丢失的数据。"),b(220,"Physics","HARD","在数字成像中，当被摄物体的空间频率超过传感器的奈奎斯特频率时，会产生什么现象？",["摩尔纹 (Moiré) 与伪色","衍射 (Diffraction)","暗角 (Vignetting)","信噪比下降","过锐","模糊"],"摩尔纹 (Moiré) 与伪色","奈奎斯特采样定理指出采样率必须大于信号最高频率的2倍。当纹理密度超过像素密度的一半时，无法正确还原，产生低频干扰条纹（摩尔纹）和伪色。"),b(221,"Color","HARD","在 ACES 工作流中，ACEScct 曲线相比 ACEScc 的主要改进是？",["增加趾部 (Toe) 特性","更大动态范围","更广色域","消除噪点","线性化","去除色彩"],"增加趾部 (Toe) 特性","ACEScc 是纯对数曲线，暗部由黑到极黑的过渡非常生硬。ACEScct 引入了'Toe'特性，让调色师在提升暗部（Lift）时手感更柔和，符合传统操作习惯。"),b(222,"Sensor","HARD","Canon 的 DGO (双增益输出) 技术与 Sony 的双原生 ISO (Dual Native ISO) 核心区别在于？",["单帧双增益合成","软件算法","动态范围更高","果冻效应加倍","DGO 是多帧合成","DGO 适合拍照"],"单帧双增益合成","双原生 ISO 是'二选一'电路（高感或低感）。DGO 则是'全都要'，对每个像素同时进行高增益（读取暗部）和低增益（读取亮部）读取，合成出一张超高动态范围的图像。"),b(223,"Audio","MEDIUM","为什么视频制作的标准采样率是 48kHz 而非音乐行业的 44.1kHz？",["易于与视频帧率整除同步","音质好一倍","记录对白","磁带限制","听感更好","CD 标准"],"易于与视频帧率整除同步","48000 能被 24, 25, 30 整除，方便音画同步时的采样点分割。而 44100 只有在 25fps 下甚至是整数。"),b(224,"Video","HARD","12G-SDI 接口的理论带宽上限足以传输什么规格的信号？",["4K 60p","8K 60p","1080p 240","4K 30p","1080p 60","8K 30p"],"4K 60p","12G-SDI 拥有 12Gbps 带宽，专为 4K 60p 设计。如果要传输 8K 或更高规格，通常需要使用 4 根 12G-SDI 并联 (Quad-Link)。"),b(225,"Optics","HARD","微距摄影中，当放大倍率达到 1:1 时，'有效光圈 (Effective Aperture)' 会发生什么变化？",["进光量减少2档","不变","增加","景深变深","进光量增加","景深变浅"],"进光量减少2档","随着像距大幅延长，光线在镜筒内衰减。1:1 放大倍率下，有效 F 值 = 设定 F 值 * (1 + 1) = 2倍，进光量只有原来的 1/4 (减 2 档)。"),b(226,"Post","HARD","在 8-bit 视频中，'Video Levels' (Legal Range) 的亮度量化范围是？",["16-235","0-255","0-100","64-940","10-250","128-255"],"16-235","广播电视标准保留了 0-15 和 236-255 作为超黑/超白信号的缓冲及同步信号空间。Full Range 才是 0-255。"),b(227,"Lighting","HARD","CRI (显色指数) 中的 R9 数值专门衡量光源对哪种颜色的还原能力？",["饱和红色","亚洲肤色","深蓝","叶绿","天空蓝","草地绿"],"饱和红色","普通 CRI (Ra) 仅计算 R1-R8 的平均值。许多劣质 LED 的 Ra 很高，但 R9 (红) 很低，导致拍出的人像肤色惨白或发绿。"),b(228,"Format","HARD","H.264/H.265 编码中的 'IDR 帧' (Instantaneous Decoder Refresh) 与普通 'I 帧' 的区别是？",["强制清空参考缓冲","画质差","不可搜索","无区别","体积最小","预测帧"],"强制清空参考缓冲","解码器遇到 IDR 帧会清空参考缓冲区。这确保了如果之前的视频流出错，IDR 帧可以立即阻断错误蔓延。"),b(229,"Sensor","HARD","堆栈式传感器 (Stacked CMOS) 相比背照式 (BSI) 最大的性能飞跃在于？",["读出速度","低感画质","色深","高感噪点","像素更高","色彩更好"],"读出速度","堆栈式在像素层后方直接集成了 DRAM 缓存电路，能以极高速度将数据暂存并读出。这是实现无果冻效应、超高速连拍 (如 A1, Z9) 的物理基础。"),b(230,"Optics","MEDIUM","关于 '法兰距 (Flange Distance)'，以下说法正确的是？",["短法兰距转接兼容性强","单反比无反短","决定传感器尺寸","长法兰距画质好","长法兰距更好","与传感器无关"],"短法兰距转接兼容性强","只要加一个厚度等于“法兰距差值”的转接环，短法兰距机身（如 Sony E）就能完美使用长法兰距镜头（如 Canon EF）。"),b(231,"Color","HARD","为什么 Rec.2020 色域的绿点位置被设计得非常'偏'？",["覆盖更多高饱和青绿色","省电","兼容CRT","减少数据","人眼对绿不敏感","制造难度低"],"覆盖更多高饱和青绿色","Rec.709 最大的短板是无法显示高饱和度的青色和绿色（如极光、绿松石）。Rec.2020 大幅扩展了这一区域。"),b(232,"Audio","MEDIUM","当两个频率极接近的声波叠加时，会产生周期性的音量忽大忽小现象，这被称为？",["拍音","梳状滤波","多普勒","相位失真","回声","混响"],"拍音","拍音频率等于两个声波频率之差。例如 440Hz 和 442Hz 叠加，会听到每秒 2 次的音量脉冲。"),b(233,"Video","MEDIUM","在使用 Log 拍摄时，监视器加载 LUT 仅仅是为了？",["仅改变监看画面","永久转换","增加动态范围","减少噪点","录制 Log","提高画质"],"仅改变监看画面","这是'监看 LUT'。它只改变屏幕显示，让画面反差正常、颜色正确，方便构图和曝光判断，但底层的录制文件依然是 Log 灰片。"),b(234,"Post","HARD","在 3D LUT 中，'33点' (33x33x33) 相比 '17点' 的优势是？",["插值精度更高","文件体积小","速度快","分辨率高","色彩更鲜艳","对比度更高"],"插值精度更高","点数越多，色彩空间的采样网格越密，非线性色彩变换（如胶片模拟）时的插值误差越小，色彩过渡越顺滑。"),b(235,"Optics","HARD","移轴镜头（Tilt-Shift）中的 Tilt（倾角）操作，其本质作用最准确的描述是？",["改变焦平面在空间中的方向","校正建筑摄影中的透视变形","扩大整体景深范围","通过裁切改变画面构图","调整镜头的等效焦距","提升画面中心锐度"],"改变焦平面在空间中的方向","Tilt 通过改变焦平面与成像面的几何关系（符合 Scheimpflug 定律），从而控制哪些区域同时合焦。"),b(236,"Sensor","HARD","部分电影机并未采用标准 4K 标称分辨率，其核心设计取舍更接近以下哪一项？",["优先单像素信噪比与动态范围","为了降低数据带宽与存储成本","出于后期流程与交付规格考虑","兼容早期数字中间片工作流","制造工艺尚未成熟"],"优先单像素信噪比与动态范围","在相同传感器尺寸下，较低像素密度可换取更大的单像素面积，从而提升信噪比和动态范围。"),b(237,"Mechanics","HARD","液压云台的 '动平衡 (Counterbalance)' 调节正确的标志是？",["任意角度悬停","阻尼最大","气泡居中","锁定"],"任意角度悬停","动平衡弹簧力抵消了相机的重力力矩。这让摄影师在运镜时无需用力对抗机器重量，起幅落幅极其丝滑，且松手后机器不会坠落。"),b(238,"Video","HARD","矢量示波器 (Vectorscope) 中，代表肤色的 I-Line 实际上对应的是？",["血红素颜色","黄色","黑色素","环境光颜色","衣服颜色"],"血红素颜色","无论人种肤色深浅，皮下毛细血管中血液的颜色是相同的。所以所有人的肤色在矢量图上都应该落在同一条相位线上。"),b(239,"Audio","MEDIUM","心形指向 (Cardioid) 麦克风最容易产生的'近讲效应 (Proximity Effect)'是指？",["低频提升","高频增强","噪音变大","声音变干","高频衰减","底噪增加"],"低频提升","这是指向性麦克风的物理特性。声源越靠近，低频越多。利用这一点可以让人声变得磁性厚重（广播腔）。"),b(240,"Color","HARD","在 Davinci Resolve 中，'Color Space Transform (CST)' 的主要作用是？",["数学映射转换","自动调色","降噪","锐化","添加胶片颗粒"],"数学映射转换","相比 LUT，CST 是基于纯数学公式的转换，不损失精度，不裁切数据，是现代色彩管理流程的核心工具。"),b(241,"Optics","MEDIUM","关于 '呼吸效应 (Focus Breathing)'，以下描述正确的是？",["调焦时视场角变化","光圈变化","变暗","重影","色温变化","曝光变化"],"调焦时视场角变化","在切换焦点时，如果画面边缘忽大忽小，会严重破坏电影的沉浸感。电影镜头通常对此有专门的光学矫正。"),b(242,"Video","HARD","ProRes 4444 XQ 的 Alpha 通道位深是多少？",["16-bit","8-bit","10-bit","1-bit","12-bit","无Alpha"],"16-bit","ProRes 4444 支持高达 16-bit 的 Alpha 通道，这对于需要半透明叠加（如烟雾、玻璃、动态模糊）的特效合成至关重要。"),b(243,"Sensor","HARD","拜耳阵列去马赛克 (Demosaicing) 过程中，最容易产生的伪影是？",["拉链与伪色","马赛克块","模糊","暗角","黑屏","死点"],"拉链与伪色","在处理高频细节（如黑白密线条）时，插值算法容易误判，导致边缘出现拉链状锯齿或错误的杂色（摩尔纹的成因之一）。"),b(244,"Lighting","HARD","钨丝灯 (Tungsten) 在调暗 (Dimming) 时，色温会？",["色温变暖","变冷","不变","闪烁"],"色温变暖","这是黑体辐射的物理特性。电压降低，灯丝温度下降，光谱向红端移动。"),b(245,"Audio","MEDIUM","'幻象电源' 为什么叫 '幻象 (Phantom)'？",["直流电对音频不可见","无线","高压","交流电","高频信号"],"直流电对音频不可见","48V 电压同时加载在 Hot 和 Cold 两端。对于动圈麦克风或变压器来说，两端电势差为 0，没有电流流过线圈。"),b(246,"Optics","HARD","APO (复消色差) 镜头的定义是？",["校正三种波长色差","两种波长","透光100%","校正畸变","增加透光"],"校正三种波长色差","普通消色差 (Achromat) 只能校正两种颜色（通常红蓝）。APO 镜头通过特殊玻璃将中间色（绿）也校正到同一点。"),b(247,"Video","HARD","在使用 '快门开角 (Shutter Angle)' 而非 '快门速度' 时，改变帧率 (如从 24fps 升格到 60fps)，曝光量会？",["单帧曝光时间改变","运动模糊消失","画面变暗"],"单帧曝光时间改变","保持 180° 开角意味着快门时间始终是帧率的 1/2。60fps 时快门是 1/120s，比 24fps 时的 1/48s 进光量少很多。"),b(248,"Post","HARD","在 ACES 工作流中，ODT (Output Device Transform) 的作用是？",["映射至显示设备空间","输入原始数据","调色","降噪","输入转换","色彩分级"],"映射至显示设备空间","ODT 是流程的出口。它负责 Tone Mapping (色调映射)，把拥有巨大动态范围的 ACES 数据'压缩'进有限的屏幕容器中。"),b(249,"Sensor","HARD","Sony A7S3 的 '9.44M 点' EVF 实际像素分辨率大约是？",["QXGA (2048 x 1536)","4K (3840 x 2160)","Full HD (1920 x 1080)","800 x 600","8K","720p"],"QXGA (2048 x 1536)","厂商宣传的 '点 (Dot)' 包含 R,G,B 三个子像素。9,440,000 Dots / 3 ≈ 3,146,666 Pixels。这大约对应 QXGA 分辨率。"),z(251,"Optics","EASY","以下哪些是“定焦镜头 (Prime Lens)”通常具备的优势？",["光圈更大","光学素质更高","体积更小巧","构图更灵活","对焦更慢","价格更贵"],["光圈更大","光学素质更高","体积更小巧"],"定焦结构简单，容易做大光圈和高画质。变焦镜头构图灵活，但定焦通常不具备此优势。"),b(252,"Sensor","MEDIUM","ISO 100 和 ISO 6400 相比，哪一个动态范围更高（假设单原生ISO）？",["ISO 100","ISO 6400","一样高","取决于镜头"],"ISO 100","通常情况下，ISO 越低，信噪比越高，动态范围（宽容度）越大。提高 ISO 会引入噪点，侵蚀暗部动态范围。"),b(253,"Audio","EASY","在室外大风环境录音，最有效的物理降噪配件是？",["防风毛衣","海绵套","降噪插件","指向性麦克风","低切滤波器","限制器"],"防风毛衣","长毛防风罩（毛衣）能有效缓冲风力冲击。海绵套仅适用于室内防喷麦或微风。"),z(255,"Video","EASY","常见的无损音频编码格式包括？",["WAV","FLAC","MP3","AAC","OGG","WMA"],["WAV","FLAC"],"WAV (LPCM) 和 FLAC 是无损格式。MP3 和 AAC 是有损压缩格式。"),b(256,"Post","MEDIUM","白平衡中的“色调 (Tint)”主要是调节哪两种颜色的平衡？",["绿与洋红","黑与白","青与黄","洋红与黄"],"绿与洋红","色温 (Temp) 调节蓝黄平衡，色调 (Tint) 调节绿品（洋红）平衡。"),b(257,"Video","EASY","延时摄影 (Timelapse) 的本质是？",["低帧率拍摄，高帧率播放","高帧率拍摄，低帧率播放","实时记录","慢动作回放","倒放"],"低帧率拍摄，高帧率播放","例如每 5 秒拍一张，最后以 24fps 播放，时间被高度压缩，云彩流动变快。"),b(258,"Optics","EASY","UV 镜的主要现代用途是？",["保护镜头前组镜片","过滤紫外线提升画质","消除反光","增加饱和度","偏振光过滤"],"保护镜头前组镜片","数码传感器对紫外线不敏感，且前置滤镜已集成 UV 截止功能。现代 UV 镜主要起物理保护作用（防刮、防尘）。"),b(259,"Sensor","EASY","“半画幅”通常指哪种传感器规格？",["APS-C","Micro 4/3","1英寸","Super 16"],"APS-C","APS-C 尺寸约为全画幅的一半（面积约 43%），常被称为半画幅。"),z(260,"Camera","MEDIUM","以下哪些操作可以减少照片糊片（模糊）？",["提高快门速度","使用三脚架","开启防抖","缩小光圈","降低 ISO","使用大光圈"],["提高快门速度","使用三脚架","开启防抖"],"糊片通常由抖动或物体运动引起。光圈与景深有关，缩小光圈反而会降低快门速度，增加糊片风险。"),b(261,"Lighting","EASY","色温 6500K 的光线通常接近于？",["阴天或正午的冷白光","日出时的暖黄光","钨丝灯光","蜡烛光"],"阴天或正午的冷白光","6500K (D65) 是标准的冷日光色温。"),b(262,"Video","MEDIUM","常用于绿幕抠像的背景布为什么选绿色？",["人肤色中绿色成分最少","绿色反光率最高","绿色波长穿透力最强","绿色光照需求低"],"人肤色中绿色成分最少","数字传感器对绿色最敏感（拜耳阵列绿色占一半），且人肤色是橙红色调，与绿色反差最大，最容易分离。"),b(263,"Post","EASY","直方图 (Histogram) 最右侧代表画面的？",["纯白 (高光)","纯黑 (暗部)","中间调","饱和度","死黑","Gamma 值"],"纯白 (高光)","直方图从左到右分别代表：黑 -> 灰 -> 白。最右侧有大量像素堆积意味着高光过曝。"),z(264,"Optics","MEDIUM","微距镜头 (Macro) 除了拍微距，还常用于？",["人像摄影","产品静物","体育摄影","建筑摄影","街拍","风光"],["人像摄影","产品静物"],"微距镜头通常解析力极高，且焦段（90mm/100mm）适合人像和静物特写。对焦慢不适合体育，视角窄不适合建筑。"),b(265,"Video","MEDIUM","果冻效应 (Jello Effect) 在哪种拍摄场景下最明显？",["快速摇摄","固定机位拍摄静物","慢动作回放","夜景长曝光","慢动作"],"快速摇摄","卷帘快门逐行扫描的时间差，在画面横向快速移动时，会导致竖直线条倾斜。"),b(266,"Audio","EASY","XLR 接口相比 3.5mm 接口的主要优势是？",["抗干扰","体积更小","更便宜","接口通用性强"],"抗干扰","XLR 是专业音频标准接口，平衡信号能抵消长距离传输的底噪干扰。"),b(267,"Video","MEDIUM","升格拍摄 (Slow Motion) 需要满足的物理条件是？",["记录帧率 > 播放帧率","记录帧率 < 播放帧率","快门速度很慢","光圈很小"],"记录帧率 > 播放帧率","例如以 60fps 拍摄，以 24fps 播放，画面被放慢了 2.5 倍。"),b(268,"Lighting","EASY","柔光箱 (Softbox) 的作用是？",["增大光源面积，柔化阴影","聚焦光线，增加亮度","改变光线颜色","产生硬光","改变色温"],"增大光源面积，柔化阴影","通过柔光布将点光源扩散为面光源。光源相对面积越大，光线越柔和。"),b(269,"Sensor","HARD","堆栈式传感器 (Stacked) 的“堆栈”指的是什么结构？",["像素层与逻辑电路/缓存层垂直堆叠","多块传感器水平拼接","滤镜堆叠","拜耳阵列堆叠"],"像素层与逻辑电路/缓存层垂直堆叠","通过将高速信号处理电路和 DRAM 缓存直接堆叠在感光层背面，极大缩短了数据传输路径，实现极速读出。"),b(270,"Optics","EASY","广角镜头特有的透视变形表现为？",["近大远小夸张，边缘拉伸","空间压缩，背景拉近","画面扁平","压缩","枕形畸变"],"近大远小夸张，边缘拉伸","广角镜头会夸大前景与背景的距离感，且画面边缘的物体会被拉长（如把腿拍长）。"),b(271,"Exposure","EASY","ISO 越高，照片会？",["更亮，但噪点更多","更暗，画质更好","更清晰，无噪点","颜色更鲜艳"],"更亮，但噪点更多","ISO 是电子增益，提高亮度的同时也放大了杂讯信号。"),b(272,"Exposure","EASY","B 门 (Bulb Mode) 的作用是？",["按下快门一直曝光，直到松手","自动曝光","连拍优先模式","闪光灯模式"],"按下快门一直曝光，直到松手","用于超长曝光（如拍摄星轨、烟花），曝光时间由摄影师手动控制。"),b(273,"Color","EASY","白平衡数值越高（如 8000K），画面色调会？",["偏暖（黄/红）","偏冷（蓝）","偏绿","偏紫"],"偏暖（黄/红）","为了中和冷色温的光线（如阴天），相机会增加暖色调。手动设置高K值会让画面变暖。"),b(274,"Optics","EASY","佳能50mm F1.8 镜头通常被称作？",["小痰盂","大三元","小钢炮","饼干头"],"小痰盂","佳能经典的 50mm F1.8 镜头外形酷似痰盂，因此得名，泛指廉价高画质标头。"),b(275,"Sensor","EASY","M43 画幅的传感器面积大约是全画幅的？",["1/4","1/2","1/3","1/1.5"],"1/4","M43 的长宽约为全画幅的一半，面积约为 1/4，等效系数为 2.0x。"),z(276,"Lighting","HARD","【情境题】你在正午的户外拍摄一场婚礼仪式，新人站在没有任何遮挡的草坪中央。此时太阳几乎垂直照射，光线极硬，新人眉骨和眼眶下方形成明显阴影，面部层次失真，而背景的天空与白色装饰亮度极高。你希望在不牺牲背景细节的前提下，使新人面部曝光自然、阴影柔和，整体画面符合婚礼影像的审美要求。以下哪些做法是合理且有效的？",["使用大功率外拍灯进行正面补光，并控制其输出以匹配环境光","使用大型反光板将阳光反射到面部阴影区域","提高快门速度以压暗环境亮度","缩小光圈并降低 ISO 以整体降低曝光","依赖后期拉高暗部来恢复面部细节"],["使用大功率外拍灯进行正面补光，并控制其输出以匹配环境光","使用大型反光板将阳光反射到面部阴影区域"],"在强烈直射光条件下，阴影是由光位与光比造成的，仅调整曝光参数无法改变阴影结构。通过主动补光（闪光灯或反光板）才能有效提亮暗部并平衡画面亮度，其它方法要么无法改变光比，要么会引入画质或风格问题。"),z(277,"Audio","MEDIUM","【情境题】你正在拍摄一部低成本独立短片，场景设定在营业高峰期的咖啡馆内。现场存在持续运转的咖啡机噪声、背景交谈声以及餐具碰撞声。画面以中近景为主，两位演员面对面交谈，无法使用领夹麦克风，也无法额外布置隔音设备。你手中只有一支超心形指向的枪式麦克风，为了尽可能提升对话的清晰度并压制环境噪声，你应该采取哪种收音策略？",["尽量缩短麦克风与演员口部的距离","将环境噪声源避开麦克风的主要拾音方向","将麦克风放置在桌面中央，依靠后期提升对白音量","保持较远距离收音，以获得更自然的环境氛围","提高录音增益，让对白在后期更容易被分离"],["尽量缩短麦克风与演员口部的距离","将环境噪声源避开麦克风的主要拾音方向"],"在复杂环境中，信噪比主要由收音距离和指向性决定。靠近声源并合理利用指向性结构，可以在物理层面减少噪声进入，而单纯提高增益或依赖后期处理往往会同时放大环境噪声。"),b(278,"Video","HARD","【情境题】你需要为一支赛车主题的宣传短片拍摄动态画面。导演要求赛车本身保持清晰锐利，同时希望背景的看台、护栏和地面产生明显的运动模糊，以强化速度感和方向感。拍摄地点为白天户外赛道，光线充足，你可以自由调整相机参数并选择合适的运镜方式。在这种创作目标下，你应当采用哪种拍摄方案？",["使用相对较慢的快门速度，并在拍摄过程中持续跟随赛车运动方向进行平移拍摄","使用极快的快门速度以完全凝固赛车与背景","通过大光圈制造背景虚化来体现速度","固定机位拍摄，让赛车快速穿过画面"],"使用相对较慢的快门速度，并在拍摄过程中持续跟随赛车运动方向进行平移拍摄","通过让镜头与主体保持相对同步运动，可以使主体在慢速快门下保持清晰，而背景因相对运动而产生方向性模糊。这种方法能够在单一画面中同时表现清晰度与速度感。"),b(279,"Optics","HARD","【情境题】你计划在无赤道仪的情况下拍摄银河拱桥，使用的是全画幅相机与超广角镜头。为了保证星点呈现为清晰的点状而不是出现可见拖尾，你需要在曝光时间上做出合理取舍。已知拍摄地点远离光污染，ISO 和光圈已设置在可接受范围内，现在你希望根据常见经验法则来估算安全的最长曝光时间。根据 500 法则，你的快门时间应控制在什么范围内？",["约 35 秒","约 15 秒","约 60 秒","约 5 秒"],"约 35 秒","500 法则是一种经验估算方式，用于在不借助跟踪设备的情况下平衡曝光时间与星点清晰度。将常数除以镜头焦距，可以得到在多数情况下不易出现明显星轨的最大曝光时间。"),z(280,"Post","MEDIUM","【情境题】你作为调色师接手了一组使用 Log 曲线拍摄的室内剧情片素材。画面中同时存在窗外自然光与室内暖色灯具，不同区域色温差异明显。导演反馈人物肤色显得发灰、不通透，并且整体画面缺乏层次感。你将在 DaVinci Resolve 中进行调色，并计划在后续使用风格化 LUT。在正式套用 LUT 之前，以下哪些基础处理步骤是合理且必要的？",["先校正基础曝光和对比度，使画面落入正常显示范围","调整色温与色调，使中性区域不出现明显偏色","直接套用对比度较强的 LUT 来掩盖问题","通过大幅提升饱和度让肤色看起来更健康","优先进行锐化处理以提升清晰度"],["先校正基础曝光和对比度，使画面落入正常显示范围","调整色温与色调，使中性区域不出现明显偏色"],"Log 素材需要先完成基础还原与白平衡校正，否则 LUT 会放大原有偏差。优先完成一级校正有助于建立正确的色彩基础，使后续风格化处理更加可控、稳定。"),b(281,"Camera","EASY","【情境题】你在室内使用三脚架拍摄一张静物照片，环境光稳定，主体完全静止。你发现画面略微偏暗，希望在不改变景深、不明显影响画质、也不引入额外运动模糊的前提下提升曝光。以下哪种调整方式最合理？",["适当延长快门时间","略微提高 ISO 感光度","调整白平衡设置","更换不同焦段镜头"],"适当延长快门时间","在主体与相机都保持静止的情况下，延长快门可以直接增加进光量，同时对画质影响最小，是最优先考虑的曝光调整方式。"),b(282,"Audio","EASY","【情境题】你在安静的室内录制一段人物旁白，使用的是电容麦克风。现场环境安静，但录音电平偏低。为了获得更理想的信噪比并保证声音自然，你最合适的操作是？",["适当提高前级增益并监看电平","在后期阶段统一提升音量","调整麦克风指向模式","增加录音距离以避免失真"],"适当提高前级增益并监看电平","在录制阶段获取合理输入电平，有助于获得更好的信噪比，也能减少后期处理压力，是更稳妥的录音策略。"),z(283,"Lighting","MEDIUM","【情境题】你在室内采访拍摄中使用单人坐姿构图，主光来自窗户侧后方，人物轮廓明显，但面部亮度不足、层次偏弱。你希望在保持自然光观感的前提下改善面部表现。以下哪些做法是合理的？",["在人物正前方放置柔光反光板","轻微调整人物朝向以接收更多窗光","通过曝光补偿整体提亮画面","在后期局部提亮面部区域","增加一盏直射补光灯作为主光"],["在人物正前方放置柔光反光板","轻微调整人物朝向以接收更多窗光"],"通过反射或重新分配现有光源，可以在不破坏自然光氛围的情况下改善面部亮度，其它方式要么影响整体光比，要么改变画面风格。"),z(284,"Post","MEDIUM","【情境题】你在剪辑一条纪实短片，素材来自多台相机，不同机位在曝光与色温上存在差异。你希望在正式精细调色前，让时间线整体观感更加统一、便于叙事判断。以下哪些处理方式是合理的？",["先进行基础曝光与白平衡校正","使用轻度预览 LUT 辅助剪辑判断","在剪辑阶段完成所有风格化调色","完全依赖自动色彩匹配功能","在剪辑结构确定后再统一处理画面"],["先进行基础曝光与白平衡校正","在剪辑结构确定后再统一处理画面"],"基础校正有助于素材在剪辑阶段保持一致性，而完整的风格化调色更适合在剪辑锁定后进行，以提高效率与一致性。"),b(285,"Video","HARD","【情境题】你在拍摄一场室内舞台演出，演员频繁移动，灯光亮度与对比度变化明显。导演希望画面整体曝光稳定，同时尽量保留高光区域的细节。以下哪种拍摄策略更合理？",["使用手动曝光并以高光区域为参考设定参数","使用连续自动曝光以适应亮度变化","适当提高 ISO 以扩大可用亮度范围","保持固定曝光并在后期统一调整亮度"],"使用手动曝光并以高光区域为参考设定参数","在复杂舞台光环境中，自动曝光容易因画面变化产生波动。以高光为基准的手动曝光更有利于画面稳定与动态范围管理。"),z(286,"Optics","HARD","【情境题】你在使用长焦镜头拍摄远处人物特写，背景元素复杂且距离主体较远。你希望背景获得明显的压缩感与虚化效果，同时保持主体清晰自然。以下哪些因素对实现这一视觉效果起关键作用？",["使用较长焦距并拉开主体与背景距离","选择较大光圈以减小景深","靠近主体以增强透视变化","改用广角镜头并后期裁切","通过后期模糊模拟景深效果"],["使用较长焦距并拉开主体与背景距离","选择较大光圈以减小景深"],"背景压缩与虚化主要由焦距、景深和主体与背景之间的空间关系共同决定，光学条件的选择仍然是实现自然效果的关键。")],Zr=({totalQuestions:e,onStart:t,onImport:n,onOpenEditor:r,onDownloadCsv:o,onOpenBuilder:a})=>{const[i,l]=d.useState(10),[u,g]=d.useState("10"),[p,x]=d.useState({easy:30,medium:50,hard:20}),[m,y]=d.useState(0),[E,S]=d.useState(!1),A=d.useRef(null),j=c=>{const f=Math.min(c,e);l(f),g(f.toString()),y(h=>{const v=h+1;return v>=5&&S(!0),v})},C=c=>{g(c);const f=parseInt(c);!isNaN(f)&&f>0&&l(Math.min(f,e))},N=()=>{let c=parseInt(u);(isNaN(c)||c<1)&&(c=5),c>e&&(c=e),g(c.toString()),l(c)},R=(c,f)=>{x(h=>({...h,[c]:f}))},I=c=>{var v;const f=(v=c.target.files)==null?void 0:v[0];if(!f)return;const h=new FileReader;h.onload=w=>{var D;try{const M=JSON.parse((D=w.target)==null?void 0:D.result);if(!M.questionIds||!Array.isArray(M.questionIds)){alert("无效的试卷配置文件 (Missing questionIds)");return}const k=[];let O=0;if(M.questionIds.forEach(L=>{const Y=ae.find(H=>H.id===L);Y?k.push(Y):O++}),k.length===0){alert("导入失败：未找到有效题目。");return}O>0&&alert(`导入成功，但有 ${O} 道题目在当前版本题库中未找到，已自动忽略。`),n(k)}catch(M){console.error(M),alert("JSON 解析失败，请检查文件格式。")}finally{A.current&&(A.current.value="")}},h.readAsText(f)};return s.jsxs("div",{className:"max-w-3xl w-full text-center space-y-8 animate-in fade-in zoom-in duration-500 relative",children:[s.jsxs("div",{className:"absolute top-0 right-0 flex gap-2",children:[s.jsx("input",{type:"file",ref:A,onChange:I,accept:".json",className:"hidden"}),s.jsxs("button",{onClick:()=>{var c;return(c=A.current)==null?void 0:c.click()},className:"flex items-center gap-2 px-3 py-1.5 bg-slate-800 hover:bg-slate-700 text-slate-300 hover:text-white rounded-lg text-xs font-bold transition-all border border-slate-700",title:"导入 JSON 试卷",children:[s.jsx(hn,{size:14})," Import JSON"]}),E&&s.jsxs("button",{onClick:a,className:"flex items-center gap-2 px-3 py-1.5 bg-slate-800 hover:bg-slate-700 text-emerald-400 hover:text-emerald-300 rounded-lg text-xs font-bold transition-all border border-slate-700 animate-in fade-in",title:"手动组卷",children:[s.jsx(Ir,{size:14})," Builder"]}),s.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-3 py-1.5 bg-slate-800 hover:bg-slate-700 text-slate-400 hover:text-white rounded-lg text-xs font-bold transition-all border border-slate-700",title:"导出题库 CSV",children:[s.jsx(gn,{size:14})," Export CSV"]}),s.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-3 py-1.5 bg-slate-800 hover:bg-slate-700 text-cyan-400 hover:text-cyan-300 rounded-lg text-xs font-bold transition-all border border-slate-700",title:"打开编辑器",children:[s.jsx(pn,{size:14})," Editor"]})]}),s.jsxs("div",{className:"w-32 h-32 bg-slate-900 rounded-full flex items-center justify-center mx-auto border-4 border-slate-800 shadow-2xl relative",children:[s.jsx(sr,{size:64,className:"text-cyan-400"}),s.jsx("div",{className:"absolute -top-2 -right-2 bg-yellow-500 text-black text-xs font-bold px-3 py-1 rounded-full border-2 border-slate-900",children:"PRO"})]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-4xl md:text-5xl font-black text-white mb-4 tracking-tight",children:"全能摄影知识挑战"}),s.jsxs("p",{className:"text-slate-400 text-lg max-w-lg mx-auto leading-relaxed",children:["当前题库共有 ",s.jsx("span",{className:"text-white font-bold",children:e})," 道精选题。",s.jsx("br",{}),"包含单选、多选、排序、填空及",s.jsx("span",{className:"text-yellow-400 font-bold",children:"全新连线题"}),"。"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-2xl mx-auto",children:[s.jsxs("div",{className:"bg-slate-900 p-6 rounded-2xl border border-slate-800",children:[s.jsxs("div",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-4 flex items-center justify-center gap-2",children:[s.jsx(rr,{size:12})," 选择题目数量"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex gap-2",children:[5,10,20].map(c=>s.jsx("button",{onClick:()=>j(c),className:`flex-1 py-3 rounded-lg font-bold transition-all ${i===c?"bg-cyan-600 text-white shadow-lg shadow-cyan-900/50":"bg-slate-800 text-slate-400 hover:bg-slate-700"}`,children:c},c))}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-xs text-slate-500 font-bold uppercase",children:"Custom"}),s.jsx("input",{type:"number",min:"1",max:e,value:u,onChange:c=>C(c.target.value),onBlur:N,className:"w-full bg-slate-950 border border-slate-700 rounded-lg py-3 pl-20 pr-16 text-white font-mono font-bold focus:border-cyan-500 focus:outline-none transition-colors"}),s.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-slate-600",children:["/ ",e]})]})]})]}),s.jsxs("div",{className:"bg-slate-900 p-6 rounded-2xl border border-slate-800",children:[s.jsxs("div",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-4 flex items-center justify-center gap-2",children:[s.jsx(Gr,{size:12})," 难度分布 (%)"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-xs font-bold text-emerald-400 w-12 text-right",children:"EASY"}),s.jsx("input",{type:"range",min:"0",max:"100",step:"10",value:p.easy,onChange:c=>R("easy",parseInt(c.target.value)),className:"flex-1 accent-emerald-500 h-1.5 bg-slate-700 rounded-full appearance-none"}),s.jsxs("span",{className:"text-xs font-mono w-8 text-right",children:[p.easy,"%"]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-xs font-bold text-cyan-400 w-12 text-right",children:"MED"}),s.jsx("input",{type:"range",min:"0",max:"100",step:"10",value:p.medium,onChange:c=>R("medium",parseInt(c.target.value)),className:"flex-1 accent-cyan-500 h-1.5 bg-slate-700 rounded-full appearance-none"}),s.jsxs("span",{className:"text-xs font-mono w-8 text-right",children:[p.medium,"%"]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-xs font-bold text-red-400 w-12 text-right",children:"HARD"}),s.jsx("input",{type:"range",min:"0",max:"100",step:"10",value:p.hard,onChange:c=>R("hard",parseInt(c.target.value)),className:"flex-1 accent-red-500 h-1.5 bg-slate-700 rounded-full appearance-none"}),s.jsxs("span",{className:"text-xs font-mono w-8 text-right",children:[p.hard,"%"]})]}),s.jsx("div",{className:"text-[10px] text-slate-500 text-right italic",children:"*系统会尽量接近所选比例"})]})]})]}),s.jsxs("button",{onClick:()=>t(i,p),className:"group relative inline-flex items-center justify-center px-12 py-5 font-bold text-white transition-all duration-200 bg-gradient-to-r from-cyan-600 to-blue-600 rounded-full focus:outline-none hover:scale-105 shadow-[0_0_30px_rgba(8,145,178,0.4)] text-xl mt-4",children:[s.jsx(or,{className:"mr-2 fill-current"})," 开始挑战"]})]})},ot=[{border:"border-cyan-500",bg:"bg-cyan-950/60",text:"text-cyan-200",badge:"bg-cyan-500 text-black"},{border:"border-purple-500",bg:"bg-purple-950/60",text:"text-purple-200",badge:"bg-purple-500 text-white"},{border:"border-emerald-500",bg:"bg-emerald-950/60",text:"text-emerald-200",badge:"bg-emerald-500 text-black"},{border:"border-orange-500",bg:"bg-orange-950/60",text:"text-orange-200",badge:"bg-orange-500 text-black"},{border:"border-pink-500",bg:"bg-pink-950/60",text:"text-pink-200",badge:"bg-pink-500 text-white"}],Ct=e=>{const t=[...e];for(let n=t.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[t[n],t[r]]=[t[r],t[n]]}return t},qr=({question:e,isRevealed:t,onSubmit:n})=>{const[r,o]=d.useState([]),[a,i]=d.useState(null),[l,u]=d.useState([]),[g,p]=d.useState([]),[x,m]=d.useState({}),[y,E]=d.useState(null),[S,A]=d.useState(""),[j,C]=d.useState(0);d.useEffect(()=>{if(e.type==="SINGLE"||e.type==="MULTI"||e.type==="TRUE_FALSE")o(Ct([...e.options]));else if(e.type==="MATCHING")o(Ct([...e.correctAnswer]));else if(e.type==="ORDER")p(Ct([...e.options]));else if(e.type==="INTERACTIVE"&&e.interactive){const{min:c,max:f}=e.interactive;let h=c+(f-c)/2;Math.abs(h-e.interactive.correctValue)<(f-c)*.1&&(h=c),C(Math.floor(h))}i(null),u([]),m({}),E(null),A("")},[e]);const N=()=>{var w;if(t)return;let c=0,f="WRONG";const h=10;let v=!1;if(e.type==="SINGLE"||e.type==="TRUE_FALSE"){if(a&&(v=!0),v){const D=a===e.correctAnswer;c=D?h:0,f=D?"CORRECT":"WRONG"}}else if(e.type==="MULTI"){if(l.length>0&&(v=!0),v){const D=l.map(L=>r[L]),M=e.correctAnswer,k=D.filter(L=>!M.includes(L)),O=D.filter(L=>M.includes(L));k.length>0?(c=0,f="WRONG"):O.length===M.length?(c=h,f="CORRECT"):O.length>0&&(c=Math.floor(O.length/M.length*h),f="PARTIAL")}}else if(e.type==="ORDER"){v=!0;const D=e.correctAnswer,M=JSON.stringify(g)===JSON.stringify(D);c=M?h:0,f=M?"CORRECT":"WRONG"}else if(e.type==="MATCHING"){if(Object.keys(x).length===e.options.length&&(v=!0),v){let D=0;const M=e.options.length,k=e.correctAnswer;Object.keys(x).forEach(O=>{const L=Number(O),Y=x[L];r[Y]===k[L]&&D++}),D===M?(c=h,f="CORRECT"):D>0&&(c=Math.floor(D/M*h),f="PARTIAL")}}else if(e.type==="FILL_BLANK"){if(S.trim().length>0&&(v=!0),v){const D=S.trim().toLowerCase(),k=(((w=e.acceptedAnswers)==null?void 0:w.map(O=>O.toLowerCase()))||[]).includes(D);c=k?h:0,f=k?"CORRECT":"WRONG"}}else if(e.type==="INTERACTIVE"&&e.interactive){v=!0;const M=Math.abs(j-e.interactive.correctValue)<=e.interactive.tolerance;c=M?h:0,f=M?"CORRECT":"WRONG"}v&&n(c,f)};d.useEffect(()=>{if(t)return;const c=f=>{const h=f.key;if(h==="Enter"&&(f.preventDefault(),N()),/^[1-9]$/.test(h)){const v=parseInt(h)-1;e.type==="SINGLE"||e.type==="TRUE_FALSE"?v<r.length&&i(r[v]):e.type==="MULTI"&&v<r.length&&u(w=>w.includes(v)?w.filter(D=>D!==v):[...w,v])}};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[t,e,r,a,l,x,g,S,j]);const R=(c,f)=>{if(!t){if(c==="LEFT")if(x[f]!==void 0){const h={...x};delete h[f],m(h),E(f)}else E(f);else if(y!==null){const h=Object.keys(x).find(w=>x[Number(w)]===f),v={...x};h&&delete v[Number(h)],v[y]=f,m(v),E(null)}}},I=(c,f)=>{if(t)return;const h=[...g],v=c+f;v<0||v>=h.length||([h[c],h[v]]=[h[v],h[c]],p(h))};if(e.type==="SINGLE"||e.type==="TRUE_FALSE")return s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:`grid gap-3 ${e.type==="TRUE_FALSE"?"grid-cols-2":"grid-cols-1 md:grid-cols-2"}`,children:r.map((c,f)=>{const h=c===e.correctAnswer,v=a===c;let w="bg-slate-800 border-slate-700 hover:bg-slate-700 text-slate-300";return t?h?w="bg-emerald-900/40 border-emerald-500 text-white":v&&!h?w="bg-red-900/40 border-red-500 text-red-200 opacity-80":w="bg-slate-900 border-slate-800 text-slate-600 opacity-40":v&&(w="bg-cyan-900/40 border-cyan-500 text-white shadow-[0_0_15px_rgba(6,182,212,0.2)]"),s.jsxs("button",{onClick:()=>!t&&i(c),disabled:t,className:`p-4 rounded-xl border-2 text-left font-bold transition-all flex items-center justify-between group relative overflow-hidden ${w}`,children:[s.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[s.jsx("span",{className:`w-6 h-6 rounded flex items-center justify-center text-xs font-mono border ${v?"border-cyan-400 text-cyan-400":"border-slate-600 text-slate-500"}`,children:f+1}),s.jsx("span",{children:c})]}),t&&h&&s.jsx(Qt,{className:"text-emerald-500 relative z-10",size:20}),t&&v&&!h&&s.jsx(Rt,{className:"text-red-500 relative z-10",size:20})]},f)})}),!t&&a&&s.jsxs("button",{onClick:N,className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-xl transition-all shadow-lg flex items-center justify-center gap-2 animate-in fade-in slide-in-from-bottom-2",children:["确认提交 (Confirm) ",s.jsx("span",{className:"text-[10px] bg-black/20 px-1.5 rounded opacity-70",children:"Enter"})]})]});if(e.type==="MULTI")return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"text-xs text-slate-400 font-bold mb-2 flex items-center gap-2",children:[s.jsx(ar,{size:14,className:"text-cyan-400"})," 选择所有正确选项 (错选不得分)"]}),s.jsx("div",{className:"grid gap-3 grid-cols-1 md:grid-cols-2",children:r.map((c,f)=>{const h=l.includes(f),v=e.correctAnswer.includes(c);let w="bg-slate-800 border-slate-700 text-slate-400 hover:bg-slate-700";return h&&!t&&(w="bg-cyan-900/30 border-cyan-500 text-white"),t&&(h&&v?w="bg-emerald-900/40 border-emerald-500 text-white":h&&!v?w="bg-red-900/40 border-red-500 text-red-200":!h&&v?w="bg-yellow-900/30 border-yellow-500 text-yellow-200":w="bg-slate-900 border-slate-800 opacity-30"),s.jsxs("button",{onClick:()=>!t&&u(D=>D.includes(f)?D.filter(M=>M!==f):[...D,f]),disabled:t,className:`p-4 rounded-xl border-2 text-left font-bold transition-all flex items-center gap-3 ${w}`,children:[s.jsx("div",{className:`w-6 h-6 rounded flex items-center justify-center text-xs font-mono border shrink-0 ${h?"border-cyan-400 text-cyan-400":"border-slate-600 text-slate-500"}`,children:f+1}),s.jsx("div",{className:"flex-1 leading-tight",children:c}),t&&v&&!h&&s.jsx(br,{size:16,className:"text-yellow-500"}),t&&v&&h&&s.jsx(Qt,{size:16,className:"text-emerald-500"}),t&&h&&!v&&s.jsx(Rt,{size:16,className:"text-red-500"})]},f)})}),s.jsxs("button",{onClick:N,disabled:t||l.length===0,className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold rounded-xl transition-all shadow-lg flex items-center justify-center gap-2",children:["提交答案 (Submit) ",!t&&s.jsx("span",{className:"text-[10px] bg-black/20 px-1.5 rounded opacity-70",children:"Enter"})]})]});if(e.type==="MATCHING")return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-xs text-slate-400 font-bold flex items-center gap-2",children:[s.jsx(zr,{size:14,className:"text-cyan-400"})," 配对模式：点击左侧选中，再点击右侧目标。"]}),s.jsxs("div",{className:"flex flex-row gap-2 md:gap-8",children:[s.jsx("div",{className:"flex-1 space-y-2",children:e.options.map((c,f)=>{const h=x[f]!==void 0,v=y===f,w=h?ot[f%ot.length]:null;return s.jsxs("button",{onClick:()=>R("LEFT",f),disabled:t,className:`w-full p-2 md:p-3 rounded-xl border-2 text-left text-xs transition-all relative flex items-center gap-2 ${v?"border-white bg-slate-700 text-white shadow-lg scale-105 z-10":h?`${w==null?void 0:w.border} ${w==null?void 0:w.bg} ${w==null?void 0:w.text}`:"border-slate-700 bg-slate-800 text-slate-400 hover:bg-slate-700"}`,children:[s.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center text-[10px] font-bold shrink-0 ${h?w==null?void 0:w.badge:"bg-slate-600 text-slate-300"}`,children:String.fromCharCode(65+f)}),s.jsx("span",{className:"leading-tight",children:c})]},f)})}),s.jsx("div",{className:"flex-1 space-y-2",children:r.map((c,f)=>{const h=Object.keys(x).find(M=>x[Number(M)]===f),v=h!==void 0,w=v?ot[Number(h)%ot.length]:null;let D="";if(t&&v){const M=e.correctAnswer[Number(h)];D=c===M?"ring-2 ring-emerald-500 ring-offset-2 ring-offset-slate-900":"ring-2 ring-red-500 ring-offset-2 ring-offset-slate-900 opacity-50 grayscale"}return s.jsxs("button",{onClick:()=>R("RIGHT",f),disabled:t,className:`w-full p-2 md:p-3 rounded-xl border-2 text-left text-xs transition-all flex items-center gap-2 justify-between ${t?D:""} ${v?`${w==null?void 0:w.border} ${w==null?void 0:w.bg} ${w==null?void 0:w.text}`:"border-slate-700 bg-slate-800 text-slate-400 hover:bg-slate-700"}`,children:[s.jsx("span",{className:"leading-tight flex-1",children:c}),v?s.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center text-[10px] font-bold shrink-0 ${w==null?void 0:w.badge}`,children:String.fromCharCode(65+Number(h))}):s.jsx("div",{className:"w-5 h-5 rounded border border-slate-600 bg-slate-900/50"})]},f)})})]}),s.jsx("button",{onClick:N,disabled:t||Object.keys(x).length!==e.options.length,className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold rounded-xl transition-all shadow-lg flex items-center justify-center gap-2",children:"提交连线 (Submit)"}),t&&s.jsxs("div",{className:"text-xs p-3 bg-slate-900 rounded border border-slate-800 grid gap-2",children:[s.jsx("strong",{className:"text-emerald-400 border-b border-slate-700 pb-1 block",children:"正确配对："}),e.options.map((c,f)=>s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{className:"text-slate-400 font-bold mr-2",children:[String.fromCharCode(65+f),". ",c]}),s.jsx("span",{className:"text-slate-600",children:"→"}),s.jsx("span",{className:"text-white text-right",children:e.correctAnswer[f]})]},f))]})]});if(e.type==="ORDER")return s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"space-y-2",children:g.map((c,f)=>s.jsxs("div",{className:`p-3 rounded-xl border-2 bg-slate-800 border-slate-700 flex items-center gap-4 transition-all ${t?JSON.stringify(g)===JSON.stringify(e.correctAnswer)?"border-emerald-500":"border-red-500":""}`,children:[s.jsxs("div",{className:"text-slate-500 font-mono font-bold w-6",children:["#",f+1]}),s.jsx("div",{className:"flex-1 font-bold text-white text-sm",children:c}),!t&&s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("button",{onClick:()=>I(f,-1),disabled:f===0,className:"p-1 hover:bg-slate-700 rounded text-slate-400 hover:text-white disabled:opacity-20",children:s.jsx(fr,{size:16})}),s.jsx("button",{onClick:()=>I(f,1),disabled:f===g.length-1,className:"p-1 hover:bg-slate-700 rounded text-slate-400 hover:text-white disabled:opacity-20",children:s.jsx(ir,{size:16})})]})]},c))}),s.jsxs("button",{onClick:N,disabled:t,className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 disabled:opacity-50 text-white font-bold rounded-xl transition-all shadow-lg flex items-center justify-center gap-2",children:["确认顺序 (Confirm) ",!t&&s.jsx("span",{className:"text-[10px] bg-black/20 px-1.5 rounded opacity-70",children:"Enter"})]}),t&&s.jsxs("div",{className:"text-xs text-slate-400 p-2 bg-slate-900 rounded border border-slate-800",children:[s.jsx("strong",{className:"text-emerald-400",children:"正确顺序："})," ",e.correctAnswer.join(" → ")]})]});if(e.type==="FILL_BLANK")return s.jsxs("div",{className:"space-y-4",children:[s.jsx("input",{type:"text",value:S,onChange:c=>A(c.target.value),disabled:t,placeholder:"输入答案...",className:`w-full bg-slate-900 border-2 rounded-xl p-4 text-lg text-white outline-none transition-all placeholder-slate-600 ${t?"border-slate-700":"border-slate-700 focus:border-cyan-500"}`,autoFocus:!0}),s.jsxs("button",{onClick:N,disabled:t||!S.trim(),className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 disabled:opacity-50 text-white font-bold rounded-xl transition-all shadow-lg flex items-center justify-center gap-2",children:["提交 (Submit) ",!t&&s.jsx("span",{className:"text-[10px] bg-black/20 px-1.5 rounded opacity-70",children:"Enter"})]}),t&&s.jsxs("div",{className:"p-3 bg-slate-800 border border-slate-700 rounded text-sm",children:[s.jsx("span",{className:"font-bold text-slate-400",children:"参考答案："})," ",s.jsx("span",{className:"text-white",children:e.correctAnswer})]})]});if(e.type==="INTERACTIVE"&&e.interactive){const c=e.interactive,h=Math.abs(j-c.correctValue)<=c.tolerance;let v="bg-slate-700";return c.visual==="COLOR_TEMP"&&(j<4e3?v="bg-orange-500":j>7e3?v="bg-blue-500":v="bg-white"),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-6 bg-slate-900 rounded-xl border border-slate-800 p-4",children:[s.jsxs("div",{className:`w-20 h-20 rounded-full shadow-[0_0_30px_currentColor] transition-colors duration-300 ${v} ${c.visual==="COLOR_TEMP"?"text-transparent":"text-slate-900"} flex items-center justify-center shrink-0`,children:[c.visual==="SHUTTER"&&s.jsx(xn,{size:24,className:"text-white"}),c.visual==="FOCAL_LENGTH"&&s.jsxs("div",{className:"text-white font-bold text-xs",children:[j,"mm"]}),c.visual==="ISO"&&s.jsx("div",{className:"text-white font-bold text-xs",children:"ISO"}),c.visual==="AUDIO_HZ"&&s.jsx("div",{className:"text-white font-bold text-[10px]",children:"AUDIO"})]}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-end",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-xs font-bold text-slate-400 block",children:"调整数值"}),s.jsxs("span",{className:"text-[10px] text-slate-500",children:["允许误差: ±",c.tolerance," ",c.unit]})]}),s.jsxs("span",{className:`text-xl font-mono font-bold ${t?h?"text-emerald-400":"text-red-400":"text-cyan-400"}`,children:[j," ",s.jsx("span",{className:"text-sm text-slate-500",children:c.unit})]})]}),s.jsx("input",{type:"range",min:c.min,max:c.max,step:c.step,value:j,onChange:w=>C(Number(w.target.value)),disabled:t,className:"w-full h-2 bg-slate-700 rounded-full appearance-none cursor-pointer accent-cyan-500 disabled:opacity-50 disabled:cursor-not-allowed"}),s.jsxs("div",{className:"flex justify-between text-[9px] text-slate-600 font-mono",children:[s.jsx("span",{children:c.min}),s.jsx("span",{children:c.max})]})]})]}),s.jsxs("button",{onClick:N,disabled:t,className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 disabled:opacity-50 text-white font-bold rounded-xl transition-all shadow-lg flex items-center justify-center gap-2",children:["确认数值 (Confirm) ",!t&&s.jsx("span",{className:"text-[10px] bg-black/20 px-1.5 rounded opacity-70",children:"Enter"})]}),t&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"p-3 bg-slate-800 border border-slate-700 rounded text-sm flex justify-between items-center",children:[s.jsx("span",{className:"text-slate-400",children:"正确数值："}),s.jsxs("span",{className:"font-mono font-bold text-emerald-400",children:[c.correctValue," ",c.unit]})]}),!h&&s.jsxs("div",{className:"p-3 bg-yellow-900/20 border border-yellow-500/30 rounded text-xs text-yellow-200",children:[s.jsx("strong",{children:"提示："})," 您的选择偏",j>c.correctValue?"高":"低","了 ",Math.abs(j-c.correctValue)," ",c.unit,"。"]})]})]})}return null},es=({questions:e,onFinish:t})=>{const[n,r]=d.useState(0),[o,a]=d.useState(0),[i,l]=d.useState([]),[u,g]=d.useState(45),[p,x]=d.useState(!1),[m,y]=d.useState(0),E=d.useRef(null),S=e[n];d.useEffect(()=>{x(!1),y(0),g(45)},[n]),d.useEffect(()=>(!p&&u>0&&(E.current=window.setInterval(()=>{g(C=>C<=1?(A(0,"WRONG"),0):C-1)},1e3)),()=>{E.current&&clearInterval(E.current)}),[p,u]),d.useEffect(()=>{const C=N=>{N.key==="Enter"&&p&&(N.preventDefault(),j())};return window.addEventListener("keydown",C),()=>window.removeEventListener("keydown",C)},[p,n]);const A=(C,N)=>{x(!0),y(C),a(R=>R+C),l(R=>[...R,N])},j=()=>{n<e.length-1?r(C=>C+1):t(o,i)};return s.jsxs("div",{className:"w-full h-full flex flex-col relative overflow-hidden",children:[s.jsxs("div",{className:"w-full max-w-3xl mx-auto pt-4 pb-4 px-4 shrink-0 z-10 bg-slate-950/80 backdrop-blur-sm sticky top-0",children:[s.jsxs("div",{className:"flex justify-between items-end mb-2",children:[s.jsxs("div",{className:"text-sm font-bold text-slate-400",children:["Question ",s.jsx("span",{className:"text-white text-xl",children:n+1}),s.jsxs("span",{className:"text-slate-600",children:["/",e.length]})]}),s.jsxs("div",{className:`flex items-center gap-2 font-mono text-xl font-bold ${u<10?"text-red-500 animate-pulse":"text-slate-200"}`,children:[s.jsx(xn,{size:20})," ",u,"s"]})]}),s.jsx("div",{className:"flex w-full gap-[2px] h-1.5 rounded-full overflow-hidden",children:e.map((C,N)=>{const R=i[N];let I="bg-slate-800";return N===n?I="bg-white animate-pulse":R==="CORRECT"?I="bg-emerald-500":R==="PARTIAL"?I="bg-yellow-500":R==="WRONG"&&(I="bg-red-500"),s.jsx("div",{className:`flex-1 transition-all duration-300 rounded-sm ${I}`},N)})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar w-full",children:s.jsx("div",{className:"min-h-full flex flex-col justify-center items-center p-4 pb-20",children:s.jsxs("div",{className:"w-full max-w-3xl animate-in slide-in-from-right-8 duration-300",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx("span",{className:"inline-block px-3 py-1 text-[10px] font-bold tracking-wider text-cyan-400 uppercase bg-cyan-900/20 rounded-full border border-cyan-900/50",children:S.category}),s.jsx("span",{className:`inline-block px-3 py-1 text-[10px] font-bold tracking-wider uppercase rounded-full border ${S.difficulty==="EASY"?"text-emerald-400 bg-emerald-900/20 border-emerald-900/50":S.difficulty==="MEDIUM"?"text-cyan-400 bg-cyan-900/20 border-cyan-900/50":"text-red-400 bg-red-900/20 border-red-900/50"}`,children:S.difficulty}),s.jsx("span",{className:"inline-block px-3 py-1 text-[10px] font-bold tracking-wider text-purple-400 uppercase bg-purple-900/20 rounded-full border border-purple-900/50",children:S.type})]}),s.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white leading-tight",children:S.question})]}),s.jsx("div",{className:"mb-6",children:s.jsx(qr,{question:S,isRevealed:p,onSubmit:A})}),p&&s.jsxs("div",{className:"bg-slate-800/80 border border-slate-600 p-4 rounded-xl animate-in fade-in slide-in-from-bottom-4 backdrop-blur-md",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3 border-b border-slate-700 pb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:`text-lg font-bold ${m===10?"text-emerald-400":m>0?"text-yellow-400":"text-red-400"}`,children:[m>0?`+${m}`:"0"," 分"]}),m>0&&m<10&&s.jsx("span",{className:"text-[10px] bg-yellow-900/30 text-yellow-200 px-1.5 py-0.5 rounded border border-yellow-500/20",children:"部分得分"})]}),s.jsxs("div",{className:"text-[10px] text-slate-500 flex items-center gap-1",children:[s.jsx(Ur,{size:12})," Press Enter for Next"]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Sr,{className:"text-cyan-400 shrink-0 mt-0.5",size:16}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-white text-xs mb-1",children:"技术解析"}),s.jsx("p",{className:"text-xs text-slate-300 leading-relaxed",children:S.explanation})]})]}),s.jsxs("button",{onClick:j,className:"w-full mt-4 py-3 bg-white hover:bg-slate-200 text-black font-bold rounded-lg transition-colors flex items-center justify-center gap-2 shadow-lg text-sm",children:[n===e.length-1?"查看成绩":"下一题"," ",s.jsx(tr,{size:16})]})]})]},n)})})]})},ts=e=>e===100?{title:"光影宗师 (Legend)",color:"text-yellow-400",desc:"无懈可击！您就是行走的摄影百科全书。"}:e>=90?{title:"资深专家 (Master)",color:"text-red-400",desc:"极其扎实的理论功底，距离封神仅一步之遥。"}:e>=80?{title:"职业摄影师 (Pro)",color:"text-purple-400",desc:"非常专业，这些知识对您来说已经是肌肉记忆。"}:e>=60?{title:"摄影发烧友 (Enthusiast)",color:"text-emerald-400",desc:"基础不错！继续积累经验，进阶指日可待。"}:e>=40?{title:"入门学徒 (Apprentice)",color:"text-blue-400",desc:"还在学习路上。建议多复习基础光学和曝光原理。"}:{title:"摄影萌新 (Newbie)",color:"text-slate-400",desc:"万丈高楼平地起，建议先从核心概念学起。"},ns=({score:e,totalQuestions:t,correctCount:n,maxScore:r,onRestart:o,questions:a,history:i})=>{const l=Math.round(e/r*100),u=ts(l),g=d.useMemo(()=>{const p={EASY:{total:0,correct:0},MEDIUM:{total:0,correct:0},HARD:{total:0,correct:0}};return a.forEach((x,m)=>{const y=x.difficulty;p[y].total++,i[m]==="CORRECT"&&p[y].correct++}),p},[a,i]);return s.jsxs("div",{className:"max-w-2xl w-full text-center space-y-8 animate-in fade-in zoom-in duration-500 bg-slate-900 p-8 rounded-3xl border border-slate-800 shadow-2xl relative overflow-hidden",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Qr,{size:80,className:`mx-auto ${u.color}`}),s.jsxs("div",{className:"mt-4",children:[s.jsx("div",{className:`text-xs font-bold uppercase tracking-widest mb-2 ${u.color}`,children:u.title}),s.jsxs("div",{className:"text-6xl font-black text-white tracking-tighter",children:[l,s.jsx("span",{className:"text-2xl",children:"%"})]})]}),s.jsxs("p",{className:"text-slate-400 text-sm mt-4 italic",children:['"',u.desc,'"']})]}),s.jsxs("div",{className:"bg-slate-950 p-6 rounded-xl border border-slate-800",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4 justify-center text-xs font-bold text-slate-500 uppercase tracking-widest",children:[s.jsx(xr,{size:14})," 能力雷达 (Accuracy by Difficulty)"]}),s.jsx("div",{className:"grid grid-cols-3 gap-4",children:["EASY","MEDIUM","HARD"].map(p=>{const x=g[p],m=x.total>0?Math.round(x.correct/x.total*100):0,y=p==="EASY"?"text-emerald-400":p==="MEDIUM"?"text-cyan-400":"text-red-400",E=p==="EASY"?"bg-emerald-500":p==="MEDIUM"?"bg-cyan-500":"bg-red-500";return s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("div",{className:`text-[10px] font-bold ${y}`,children:p}),s.jsxs("div",{className:"h-24 w-full bg-slate-800 rounded-lg relative flex flex-col justify-end overflow-hidden",children:[s.jsx("div",{className:`w-full transition-all duration-1000 ${E}`,style:{height:`${m}%`,opacity:.6}}),s.jsxs("div",{className:"absolute inset-0 flex items-center justify-center text-xs font-bold text-white shadow-black drop-shadow-md",children:[m,"%"]})]}),s.jsxs("div",{className:"text-[10px] text-slate-500",children:[x.correct,"/",x.total]})]},p)})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[s.jsxs("div",{className:"bg-slate-950 p-4 rounded-xl border border-slate-800",children:[s.jsxs("div",{className:"text-xl font-bold text-white",children:[e," ",s.jsxs("span",{className:"text-xs text-slate-500 font-normal",children:["/ ",r]})]}),s.jsx("div",{className:"text-[10px] text-slate-500 uppercase",children:"总得分"})]}),s.jsxs("div",{className:"bg-slate-950 p-4 rounded-xl border border-slate-800",children:[s.jsxs("div",{className:"text-xl font-bold text-white",children:[n," ",s.jsxs("span",{className:"text-xs text-slate-500 font-normal",children:["/ ",t]})]}),s.jsx("div",{className:"text-[10px] text-slate-500 uppercase",children:"全对题数"})]})]}),s.jsxs("button",{onClick:o,className:"w-full py-4 bg-slate-800 hover:bg-slate-700 text-white font-bold rounded-xl transition-all flex items-center justify-center gap-2 group border border-slate-600 hover:border-slate-500",children:[s.jsx(lr,{size:18,className:"group-hover:rotate-180 transition-transform duration-500"})," 重新挑战"]})]})},rs=({onClose:e})=>{const[t,n]=d.useState(""),[r,o]=d.useState(""),[a,i]=d.useState(!1);d.useEffect(()=>{const m=l();n(m),o(g(m))},[]);const l=()=>{const m=["ID","Category","Type","Difficulty","Question","Options (Split by |)","CorrectAnswer (Split by |)","Explanation"],y=ae.map(E=>{const S=C=>`"${C.replace(/"/g,'""')}"`,A=E.options.join("|"),j=Array.isArray(E.correctAnswer)?E.correctAnswer.join("|"):E.correctAnswer;return[E.id,S(E.category),E.type,E.difficulty,S(E.question),S(A),S(String(j)),S(E.explanation)].join(",")});return[m.join(","),...y].join(`
`)},u=m=>{const y=[];let E="",S=!1;for(let A=0;A<m.length;A++){const j=m[A];j==='"'?S&&m[A+1]==='"'?(E+='"',A++):S=!S:j===","&&!S?(y.push(E),E=""):E+=j}return y.push(E),y},g=m=>{const y=m.trim().split(`
`);return y.length<2?"// Invalid CSV":`export const QUIZ_DATABASE: QuizQuestion[] = [
${y.slice(1).map(S=>{if(!S.trim())return"";const A=u(S);if(A.length<8)return`// Error parsing line: ${S.substring(0,20)}...`;const[j,C,N,R,I,c,f,h]=A,v=`[${c.split("|").map(w=>`"${w}"`).join(", ")}]`;if(N==="SINGLE")return`  q(${j}, "${C}", "${R}", "${I}", ${v}, "${f}", "${h}"),`;if(N==="TRUE_FALSE"){const w=f.includes("True")||f.includes("正确")?"true":"false";return`  tf(${j}, "${C}", "${R}", "${I}", ${w}, "${h}"),`}else if(N==="MULTI"){const w=`[${f.split("|").map(D=>`"${D}"`).join(", ")}]`;return`  mq(${j}, "${C}", "${R}", "${I}", ${v}, ${w}, "${h}"),`}else if(N==="ORDER"){const w=`[${f.split("|").map(D=>`"${D}"`).join(", ")}]`;return`  oq(${j}, "${C}", "${R}", "${I}", ${v}, ${w}, "${h}"),`}else if(N==="FILL_BLANK"){const w=`[${f.split("|").map(D=>`"${D}"`).join(", ")}]`;return`  fb(${j}, "${C}", "${R}", "${I}", ${w}, "${f.split("|")[0]}", "${h}"),`}else if(N==="MATCHING"){const w=c.split("|"),D=f.split("|"),M=w.map((k,O)=>`["${k}", "${D[O]||""}"]`).join(`,
    `);return`  matchQ(${j}, "${C}", "${R}", "${I}", [
    ${M}
  ], "${h}"),`}else if(N==="INTERACTIVE")return`// Interactive questions need manual config reconstruction. ID: ${j}`;return`// Unsupported type in converter: ${N}`}).filter(S=>S).join(`
`)}
];`},p=m=>{n(m),o(g(m))},x=()=>{navigator.clipboard.writeText(r),i(!0),setTimeout(()=>i(!1),2e3)};return s.jsx("div",{className:"fixed inset-0 z-50 bg-black/90 backdrop-blur-sm flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-5xl h-[80vh] bg-slate-900 rounded-2xl border border-slate-700 flex flex-col shadow-2xl animate-in fade-in zoom-in duration-300",children:[s.jsxs("div",{className:"p-4 border-b border-slate-800 flex justify-between items-center bg-slate-800/50 rounded-t-2xl",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(pn,{className:"text-cyan-400",size:20}),s.jsx("h3",{className:"font-bold text-white",children:"题库数据编辑器 (Database Editor)"})]}),s.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-700 rounded-full transition-colors text-slate-400 hover:text-white",children:s.jsx(Rt,{size:24})})]}),s.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col lg:flex-row",children:[s.jsxs("div",{className:"flex-1 flex flex-col p-4 border-b lg:border-b-0 lg:border-r border-slate-800",children:[s.jsxs("div",{className:"mb-2 text-xs font-bold text-slate-400 flex justify-between",children:[s.jsx("span",{children:"CSV Source (Excel Compatible)"}),s.jsx("span",{className:"text-[10px] text-slate-600",children:"Delimiter: Comma | Arrays: Pipe (|)"})]}),s.jsx("textarea",{className:"flex-1 bg-slate-950 border border-slate-800 rounded-lg p-4 font-mono text-xs text-slate-300 focus:border-cyan-500 outline-none resize-none",value:t,onChange:m=>p(m.target.value),placeholder:"Paste CSV here..."})]}),s.jsxs("div",{className:"flex-1 flex flex-col p-4 bg-slate-900/50",children:[s.jsxs("div",{className:"mb-2 text-xs font-bold text-slate-400 flex justify-between items-center",children:[s.jsx("span",{children:"TypeScript Code (Copy to Source)"}),a&&s.jsxs("span",{className:"text-emerald-400 text-[10px] flex items-center gap-1",children:[s.jsx(gr,{size:12})," Copied!"]})]}),s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("textarea",{readOnly:!0,className:"w-full h-full bg-slate-950 border border-slate-800 rounded-lg p-4 font-mono text-xs text-green-400 focus:border-emerald-500 outline-none resize-none",value:r}),s.jsxs("button",{onClick:x,className:"absolute bottom-4 right-4 bg-emerald-600 hover:bg-emerald-500 text-white px-4 py-2 rounded-lg text-xs font-bold shadow-lg flex items-center gap-2 transition-all",children:[s.jsx(Cr,{size:14})," Copy Code"]})]})]})]})]})})};var _e=nr();function ss(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.useMemo(()=>r=>{t.forEach(o=>o(r))},t)}const pt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Me(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Ot(e){return"nodeType"in e}function G(e){var t,n;return e?Me(e)?e:Ot(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Tt(e){const{Document:t}=G(e);return e instanceof t}function Qe(e){return Me(e)?!1:e instanceof G(e).HTMLElement}function mn(e){return e instanceof G(e).SVGElement}function ke(e){return e?Me(e)?e.document:Ot(e)?Tt(e)?e:Qe(e)||mn(e)?e.ownerDocument:document:document:document}const te=pt?d.useLayoutEffect:d.useEffect;function gt(e){const t=d.useRef(e);return te(()=>{t.current=e}),d.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}function os(){const e=d.useRef(null),t=d.useCallback((r,o)=>{e.current=setInterval(r,o)},[]),n=d.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Ye(e,t){t===void 0&&(t=[e]);const n=d.useRef(e);return te(()=>{n.current!==e&&(n.current=e)},t),n}function We(e,t){const n=d.useRef();return d.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function ct(e){const t=gt(e),n=d.useRef(null),r=d.useCallback(o=>{o!==n.current&&(t==null||t(o,n.current)),n.current=o},[]);return[n,r]}function dt(e){const t=d.useRef();return d.useEffect(()=>{t.current=e},[e]),t.current}let Dt={};function Je(e,t){return d.useMemo(()=>{if(t)return t;const n=Dt[e]==null?0:Dt[e]+1;return Dt[e]=n,e+"-"+n},[e,t])}function bn(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce((a,i)=>{const l=Object.entries(i);for(const[u,g]of l){const p=a[u];p!=null&&(a[u]=p+e*g)}return a},{...t})}}const Ie=bn(1),Xe=bn(-1);function as(e){return"clientX"in e&&"clientY"in e}function mt(e){if(!e)return!1;const{KeyboardEvent:t}=G(e.target);return t&&e instanceof t}function is(e){if(!e)return!1;const{TouchEvent:t}=G(e.target);return t&&e instanceof t}function ut(e){if(is(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return as(e)?{x:e.clientX,y:e.clientY}:null}const ve=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[ve.Translate.toString(e),ve.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),Jt="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function ls(e){return e.matches(Jt)?e:e.querySelector(Jt)}const cs={display:"none"};function ds(e){let{id:t,value:n}=e;return U.createElement("div",{id:t,style:cs},n)}function us(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return U.createElement("div",{id:t,style:o,role:"status","aria-live":r,"aria-atomic":!0},n)}function fs(){const[e,t]=d.useState("");return{announce:d.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const vn=d.createContext(null);function hs(e){const t=d.useContext(vn);d.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function xs(){const[e]=d.useState(()=>new Set),t=d.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[d.useCallback(r=>{let{type:o,event:a}=r;e.forEach(i=>{var l;return(l=i[o])==null?void 0:l.call(i,a)})},[e]),t]}const ps={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},gs={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function ms(e){let{announcements:t=gs,container:n,hiddenTextDescribedById:r,screenReaderInstructions:o=ps}=e;const{announce:a,announcement:i}=fs(),l=Je("DndLiveRegion"),[u,g]=d.useState(!1);if(d.useEffect(()=>{g(!0)},[]),hs(d.useMemo(()=>({onDragStart(x){let{active:m}=x;a(t.onDragStart({active:m}))},onDragMove(x){let{active:m,over:y}=x;t.onDragMove&&a(t.onDragMove({active:m,over:y}))},onDragOver(x){let{active:m,over:y}=x;a(t.onDragOver({active:m,over:y}))},onDragEnd(x){let{active:m,over:y}=x;a(t.onDragEnd({active:m,over:y}))},onDragCancel(x){let{active:m,over:y}=x;a(t.onDragCancel({active:m,over:y}))}}),[a,t])),!u)return null;const p=U.createElement(U.Fragment,null,U.createElement(ds,{id:r,value:o.draggable}),U.createElement(us,{id:l,announcement:i}));return n?_e.createPortal(p,n):p}var F;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(F||(F={}));function ft(){}function Zt(e,t){return d.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function bs(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const ne=Object.freeze({x:0,y:0});function yn(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function vs(e,t){const n=ut(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function wn(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function ys(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function qt(e){let{left:t,top:n,height:r,width:o}=e;return[{x:t,y:n},{x:t+o,y:n},{x:t,y:n+r},{x:t+o,y:n+r}]}function Sn(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function en(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const ws=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=en(t,t.left,t.top),a=[];for(const i of r){const{id:l}=i,u=n.get(l);if(u){const g=yn(en(u),o);a.push({id:l,data:{droppableContainer:i,value:g}})}}return a.sort(wn)},Ss=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=qt(t),a=[];for(const i of r){const{id:l}=i,u=n.get(l);if(u){const g=qt(u),p=o.reduce((m,y,E)=>m+yn(g[E],y),0),x=Number((p/4).toFixed(4));a.push({id:l,data:{droppableContainer:i,value:x}})}}return a.sort(wn)};function Ns(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height),i=o-r,l=a-n;if(r<o&&n<a){const u=t.width*t.height,g=e.width*e.height,p=i*l,x=p/(u+g-p);return Number(x.toFixed(4))}return 0}const Cs=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=[];for(const a of r){const{id:i}=a,l=n.get(i);if(l){const u=Ns(l,t);u>0&&o.push({id:i,data:{droppableContainer:a,value:u}})}}return o.sort(ys)};function Ds(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Nn(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ne}function As(e){return function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return o.reduce((i,l)=>({...i,top:i.top+e*l.y,bottom:i.bottom+e*l.y,left:i.left+e*l.x,right:i.right+e*l.x}),{...n})}}const Es=As(1);function Cn(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function js(e,t,n){const r=Cn(t);if(!r)return e;const{scaleX:o,scaleY:a,x:i,y:l}=r,u=e.left-i-(1-o)*parseFloat(n),g=e.top-l-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),p=o?e.width/o:e.width,x=a?e.height/a:e.height;return{width:p,height:x,top:g,right:u+p,bottom:g+x,left:u}}const Rs={ignoreTransform:!1};function Oe(e,t){t===void 0&&(t=Rs);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:g,transformOrigin:p}=G(e).getComputedStyle(e);g&&(n=js(n,g,p))}const{top:r,left:o,width:a,height:i,bottom:l,right:u}=n;return{top:r,left:o,width:a,height:i,bottom:l,right:u}}function tn(e){return Oe(e,{ignoreTransform:!0})}function Is(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Ms(e,t){return t===void 0&&(t=G(e).getComputedStyle(e)),t.position==="fixed"}function ks(e,t){t===void 0&&(t=G(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const a=t[o];return typeof a=="string"?n.test(a):!1})}function bt(e,t){const n=[];function r(o){if(t!=null&&n.length>=t||!o)return n;if(Tt(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!Qe(o)||mn(o)||n.includes(o))return n;const a=G(e).getComputedStyle(o);return o!==e&&ks(o,a)&&n.push(o),Ms(o,a)?n:r(o.parentNode)}return e?r(e):n}function Dn(e){const[t]=bt(e,1);return t??null}function At(e){return!pt||!e?null:Me(e)?e:Ot(e)?Tt(e)||e===ke(e).scrollingElement?window:Qe(e)?e:null:null}function An(e){return Me(e)?e.scrollX:e.scrollLeft}function En(e){return Me(e)?e.scrollY:e.scrollTop}function It(e){return{x:An(e),y:En(e)}}var _;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(_||(_={}));function jn(e){return!pt||!e?!1:e===document.scrollingElement}function Rn(e){const t={x:0,y:0},n=jn(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},o=e.scrollTop<=t.y,a=e.scrollLeft<=t.x,i=e.scrollTop>=r.y,l=e.scrollLeft>=r.x;return{isTop:o,isLeft:a,isBottom:i,isRight:l,maxScroll:r,minScroll:t}}const Os={x:.2,y:.2};function Ts(e,t,n,r,o){let{top:a,left:i,right:l,bottom:u}=n;r===void 0&&(r=10),o===void 0&&(o=Os);const{isTop:g,isBottom:p,isLeft:x,isRight:m}=Rn(e),y={x:0,y:0},E={x:0,y:0},S={height:t.height*o.y,width:t.width*o.x};return!g&&a<=t.top+S.height?(y.y=_.Backward,E.y=r*Math.abs((t.top+S.height-a)/S.height)):!p&&u>=t.bottom-S.height&&(y.y=_.Forward,E.y=r*Math.abs((t.bottom-S.height-u)/S.height)),!m&&l>=t.right-S.width?(y.x=_.Forward,E.x=r*Math.abs((t.right-S.width-l)/S.width)):!x&&i<=t.left+S.width&&(y.x=_.Backward,E.x=r*Math.abs((t.left+S.width-i)/S.width)),{direction:y,speed:E}}function Ls(e){if(e===document.scrollingElement){const{innerWidth:a,innerHeight:i}=window;return{top:0,left:0,right:a,bottom:i,width:a,height:i}}const{top:t,left:n,right:r,bottom:o}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function In(e){return e.reduce((t,n)=>Ie(t,It(n)),ne)}function Ps(e){return e.reduce((t,n)=>t+An(n),0)}function Hs(e){return e.reduce((t,n)=>t+En(n),0)}function Mn(e,t){if(t===void 0&&(t=Oe),!e)return;const{top:n,left:r,bottom:o,right:a}=t(e);Dn(e)&&(o<=0||a<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Us=[["x",["left","right"],Ps],["y",["top","bottom"],Hs]];class Lt{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=bt(n),o=In(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[a,i,l]of Us)for(const u of i)Object.defineProperty(this,u,{get:()=>{const g=l(r),p=o[a]-g;return this.rect[u]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Ve{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var o;(o=this.target)==null||o.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function $s(e){const{EventTarget:t}=G(e);return e instanceof t?e:ke(e)}function Et(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var ee;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(ee||(ee={}));function nn(e){e.preventDefault()}function zs(e){e.stopPropagation()}var T;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(T||(T={}));const kn={start:[T.Space,T.Enter],cancel:[T.Esc],end:[T.Space,T.Enter,T.Tab]},Fs=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case T.Right:return{...n,x:n.x+25};case T.Left:return{...n,x:n.x-25};case T.Down:return{...n,y:n.y+25};case T.Up:return{...n,y:n.y-25}}};class Pt{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Ve(ke(n)),this.windowListeners=new Ve(G(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ee.Resize,this.handleCancel),this.windowListeners.add(ee.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ee.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&Mn(r),n(ne)}handleKeyDown(t){if(mt(t)){const{active:n,context:r,options:o}=this.props,{keyboardCodes:a=kn,coordinateGetter:i=Fs,scrollBehavior:l="smooth"}=o,{code:u}=t;if(a.end.includes(u)){this.handleEnd(t);return}if(a.cancel.includes(u)){this.handleCancel(t);return}const{collisionRect:g}=r.current,p=g?{x:g.left,y:g.top}:ne;this.referenceCoordinates||(this.referenceCoordinates=p);const x=i(t,{active:n,context:r.current,currentCoordinates:p});if(x){const m=Xe(x,p),y={x:0,y:0},{scrollableAncestors:E}=r.current;for(const S of E){const A=t.code,{isTop:j,isRight:C,isLeft:N,isBottom:R,maxScroll:I,minScroll:c}=Rn(S),f=Ls(S),h={x:Math.min(A===T.Right?f.right-f.width/2:f.right,Math.max(A===T.Right?f.left:f.left+f.width/2,x.x)),y:Math.min(A===T.Down?f.bottom-f.height/2:f.bottom,Math.max(A===T.Down?f.top:f.top+f.height/2,x.y))},v=A===T.Right&&!C||A===T.Left&&!N,w=A===T.Down&&!R||A===T.Up&&!j;if(v&&h.x!==x.x){const D=S.scrollLeft+m.x,M=A===T.Right&&D<=I.x||A===T.Left&&D>=c.x;if(M&&!m.y){S.scrollTo({left:D,behavior:l});return}M?y.x=S.scrollLeft-D:y.x=A===T.Right?S.scrollLeft-I.x:S.scrollLeft-c.x,y.x&&S.scrollBy({left:-y.x,behavior:l});break}else if(w&&h.y!==x.y){const D=S.scrollTop+m.y,M=A===T.Down&&D<=I.y||A===T.Up&&D>=c.y;if(M&&!m.x){S.scrollTo({top:D,behavior:l});return}M?y.y=S.scrollTop-D:y.y=A===T.Down?S.scrollTop-I.y:S.scrollTop-c.y,y.y&&S.scrollBy({top:-y.y,behavior:l});break}}this.handleMove(t,Ie(Xe(x,this.referenceCoordinates),y))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Pt.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=kn,onActivation:o}=t,{active:a}=n;const{code:i}=e.nativeEvent;if(r.start.includes(i)){const l=a.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),o==null||o({event:e.nativeEvent}),!0)}return!1}}];function rn(e){return!!(e&&"distance"in e)}function sn(e){return!!(e&&"delay"in e)}class Ht{constructor(t,n,r){var o;r===void 0&&(r=$s(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:a}=t,{target:i}=a;this.props=t,this.events=n,this.document=ke(i),this.documentListeners=new Ve(this.document),this.listeners=new Ve(r),this.windowListeners=new Ve(G(i)),this.initialCoordinates=(o=ut(a))!=null?o:ne,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(ee.Resize,this.handleCancel),this.windowListeners.add(ee.DragStart,nn),this.windowListeners.add(ee.VisibilityChange,this.handleCancel),this.windowListeners.add(ee.ContextMenu,nn),this.documentListeners.add(ee.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(sn(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(rn(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:o}=this.props;o(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(ee.Click,zs,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ee.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:o,props:a}=this,{onMove:i,options:{activationConstraint:l}}=a;if(!o)return;const u=(n=ut(t))!=null?n:ne,g=Xe(o,u);if(!r&&l){if(rn(l)){if(l.tolerance!=null&&Et(g,l.tolerance))return this.handleCancel();if(Et(g,l.distance))return this.handleStart()}if(sn(l)&&Et(g,l.tolerance))return this.handleCancel();this.handlePending(l,g);return}t.cancelable&&t.preventDefault(),i(u)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===T.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const _s={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Ut extends Ht{constructor(t){const{event:n}=t,r=ke(n.target);super(t,_s,r)}}Ut.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const Vs={move:{name:"mousemove"},end:{name:"mouseup"}};var Mt;(function(e){e[e.RightClick=2]="RightClick"})(Mt||(Mt={}));class Bs extends Ht{constructor(t){super(t,Vs,ke(t.event.target))}}Bs.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Mt.RightClick?!1:(r==null||r({event:n}),!0)}}];const jt={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Gs extends Ht{constructor(t){super(t,jt)}static setup(){return window.addEventListener(jt.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(jt.move.name,t)};function t(){}}}Gs.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:o}=n;return o.length>1?!1:(r==null||r({event:n}),!0)}}];var Be;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Be||(Be={}));var ht;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(ht||(ht={}));function Ys(e){let{acceleration:t,activator:n=Be.Pointer,canScroll:r,draggingRect:o,enabled:a,interval:i=5,order:l=ht.TreeOrder,pointerCoordinates:u,scrollableAncestors:g,scrollableAncestorRects:p,delta:x,threshold:m}=e;const y=Ks({delta:x,disabled:!a}),[E,S]=os(),A=d.useRef({x:0,y:0}),j=d.useRef({x:0,y:0}),C=d.useMemo(()=>{switch(n){case Be.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case Be.DraggableRect:return o}},[n,o,u]),N=d.useRef(null),R=d.useCallback(()=>{const c=N.current;if(!c)return;const f=A.current.x*j.current.x,h=A.current.y*j.current.y;c.scrollBy(f,h)},[]),I=d.useMemo(()=>l===ht.TreeOrder?[...g].reverse():g,[l,g]);d.useEffect(()=>{if(!a||!g.length||!C){S();return}for(const c of I){if((r==null?void 0:r(c))===!1)continue;const f=g.indexOf(c),h=p[f];if(!h)continue;const{direction:v,speed:w}=Ts(c,h,C,t,m);for(const D of["x","y"])y[D][v[D]]||(w[D]=0,v[D]=0);if(w.x>0||w.y>0){S(),N.current=c,E(R,i),A.current=w,j.current=v;return}}A.current={x:0,y:0},j.current={x:0,y:0},S()},[t,R,r,S,a,i,JSON.stringify(C),JSON.stringify(y),E,g,I,p,JSON.stringify(m)])}const Xs={x:{[_.Backward]:!1,[_.Forward]:!1},y:{[_.Backward]:!1,[_.Forward]:!1}};function Ks(e){let{delta:t,disabled:n}=e;const r=dt(t);return We(o=>{if(n||!r||!o)return Xs;const a={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[_.Backward]:o.x[_.Backward]||a.x===-1,[_.Forward]:o.x[_.Forward]||a.x===1},y:{[_.Backward]:o.y[_.Backward]||a.y===-1,[_.Forward]:o.y[_.Forward]||a.y===1}}},[n,t,r])}function Qs(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return We(o=>{var a;return t==null?null:(a=r??o)!=null?a:null},[r,t])}function Ws(e,t){return d.useMemo(()=>e.reduce((n,r)=>{const{sensor:o}=r,a=o.activators.map(i=>({eventName:i.eventName,handler:t(i.handler,r)}));return[...n,...a]},[]),[e,t])}var Ke;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Ke||(Ke={}));var kt;(function(e){e.Optimized="optimized"})(kt||(kt={}));const on=new Map;function Js(e,t){let{dragging:n,dependencies:r,config:o}=t;const[a,i]=d.useState(null),{frequency:l,measure:u,strategy:g}=o,p=d.useRef(e),x=A(),m=Ye(x),y=d.useCallback(function(j){j===void 0&&(j=[]),!m.current&&i(C=>C===null?j:C.concat(j.filter(N=>!C.includes(N))))},[m]),E=d.useRef(null),S=We(j=>{if(x&&!n)return on;if(!j||j===on||p.current!==e||a!=null){const C=new Map;for(let N of e){if(!N)continue;if(a&&a.length>0&&!a.includes(N.id)&&N.rect.current){C.set(N.id,N.rect.current);continue}const R=N.node.current,I=R?new Lt(u(R),R):null;N.rect.current=I,I&&C.set(N.id,I)}return C}return j},[e,a,n,x,u]);return d.useEffect(()=>{p.current=e},[e]),d.useEffect(()=>{x||y()},[n,x]),d.useEffect(()=>{a&&a.length>0&&i(null)},[JSON.stringify(a)]),d.useEffect(()=>{x||typeof l!="number"||E.current!==null||(E.current=setTimeout(()=>{y(),E.current=null},l))},[l,x,y,...r]),{droppableRects:S,measureDroppableContainers:y,measuringScheduled:a!=null};function A(){switch(g){case Ke.Always:return!1;case Ke.BeforeDragging:return n;default:return!n}}}function $t(e,t){return We(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Zs(e,t){return $t(e,t)}function qs(e){let{callback:t,disabled:n}=e;const r=gt(t),o=d.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(r)},[r,n]);return d.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function vt(e){let{callback:t,disabled:n}=e;const r=gt(t),o=d.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(r)},[n]);return d.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function eo(e){return new Lt(Oe(e),e)}function an(e,t,n){t===void 0&&(t=eo);const[r,o]=d.useState(null);function a(){o(u=>{if(!e)return null;if(e.isConnected===!1){var g;return(g=u??n)!=null?g:null}const p=t(e);return JSON.stringify(u)===JSON.stringify(p)?u:p})}const i=qs({callback(u){if(e)for(const g of u){const{type:p,target:x}=g;if(p==="childList"&&x instanceof HTMLElement&&x.contains(e)){a();break}}}}),l=vt({callback:a});return te(()=>{a(),e?(l==null||l.observe(e),i==null||i.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),i==null||i.disconnect())},[e]),r}function to(e){const t=$t(e);return Nn(e,t)}const ln=[];function no(e){const t=d.useRef(e),n=We(r=>e?r&&r!==ln&&e&&t.current&&e.parentNode===t.current.parentNode?r:bt(e):ln,[e]);return d.useEffect(()=>{t.current=e},[e]),n}function ro(e){const[t,n]=d.useState(null),r=d.useRef(e),o=d.useCallback(a=>{const i=At(a.target);i&&n(l=>l?(l.set(i,It(i)),new Map(l)):null)},[]);return d.useEffect(()=>{const a=r.current;if(e!==a){i(a);const l=e.map(u=>{const g=At(u);return g?(g.addEventListener("scroll",o,{passive:!0}),[g,It(g)]):null}).filter(u=>u!=null);n(l.length?new Map(l):null),r.current=e}return()=>{i(e),i(a)};function i(l){l.forEach(u=>{const g=At(u);g==null||g.removeEventListener("scroll",o)})}},[o,e]),d.useMemo(()=>e.length?t?Array.from(t.values()).reduce((a,i)=>Ie(a,i),ne):In(e):ne,[e,t])}function cn(e,t){t===void 0&&(t=[]);const n=d.useRef(null);return d.useEffect(()=>{n.current=null},t),d.useEffect(()=>{const r=e!==ne;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?Xe(e,n.current):ne}function so(e){d.useEffect(()=>{if(!pt)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function oo(e,t){return d.useMemo(()=>e.reduce((n,r)=>{let{eventName:o,handler:a}=r;return n[o]=i=>{a(i,t)},n},{}),[e,t])}function On(e){return d.useMemo(()=>e?Is(e):null,[e])}const dn=[];function ao(e,t){t===void 0&&(t=Oe);const[n]=e,r=On(n?G(n):null),[o,a]=d.useState(dn);function i(){a(()=>e.length?e.map(u=>jn(u)?r:new Lt(t(u),u)):dn)}const l=vt({callback:i});return te(()=>{l==null||l.disconnect(),i(),e.forEach(u=>l==null?void 0:l.observe(u))},[e]),o}function Tn(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Qe(t)?t:e}function io(e){let{measure:t}=e;const[n,r]=d.useState(null),o=d.useCallback(g=>{for(const{target:p}of g)if(Qe(p)){r(x=>{const m=t(p);return x?{...x,width:m.width,height:m.height}:m});break}},[t]),a=vt({callback:o}),i=d.useCallback(g=>{const p=Tn(g);a==null||a.disconnect(),p&&(a==null||a.observe(p)),r(p?t(p):null)},[t,a]),[l,u]=ct(i);return d.useMemo(()=>({nodeRef:l,rect:n,setRef:u}),[n,l,u])}const lo=[{sensor:Ut,options:{}},{sensor:Pt,options:{}}],co={current:{}},lt={draggable:{measure:tn},droppable:{measure:tn,strategy:Ke.WhileDragging,frequency:kt.Optimized},dragOverlay:{measure:Oe}};class Ge extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const uo={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ge,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ft},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:lt,measureDroppableContainers:ft,windowRect:null,measuringScheduled:!1},Ln={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ft,draggableNodes:new Map,over:null,measureDroppableContainers:ft},Ze=d.createContext(Ln),Pn=d.createContext(uo);function fo(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ge}}}function ho(e,t){switch(t.type){case F.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case F.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case F.DragEnd:case F.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case F.RegisterDroppable:{const{element:n}=t,{id:r}=n,o=new Ge(e.droppable.containers);return o.set(r,n),{...e,droppable:{...e.droppable,containers:o}}}case F.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const i=new Ge(e.droppable.containers);return i.set(n,{...a,disabled:o}),{...e,droppable:{...e.droppable,containers:i}}}case F.UnregisterDroppable:{const{id:n,key:r}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const a=new Ge(e.droppable.containers);return a.delete(n),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function xo(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:o}=d.useContext(Ze),a=dt(r),i=dt(n==null?void 0:n.id);return d.useEffect(()=>{if(!t&&!r&&a&&i!=null){if(!mt(a)||document.activeElement===a.target)return;const l=o.get(i);if(!l)return;const{activatorNode:u,node:g}=l;if(!u.current&&!g.current)return;requestAnimationFrame(()=>{for(const p of[u.current,g.current]){if(!p)continue;const x=ls(p);if(x){x.focus();break}}})}},[r,t,o,i,a]),null}function Hn(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((o,a)=>a({transform:o,...r}),n):n}function po(e){return d.useMemo(()=>({draggable:{...lt.draggable,...e==null?void 0:e.draggable},droppable:{...lt.droppable,...e==null?void 0:e.droppable},dragOverlay:{...lt.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function go(e){let{activeNode:t,measure:n,initialRect:r,config:o=!0}=e;const a=d.useRef(!1),{x:i,y:l}=typeof o=="boolean"?{x:o,y:o}:o;te(()=>{if(!i&&!l||!t){a.current=!1;return}if(a.current||!r)return;const g=t==null?void 0:t.node.current;if(!g||g.isConnected===!1)return;const p=n(g),x=Nn(p,r);if(i||(x.x=0),l||(x.y=0),a.current=!0,Math.abs(x.x)>0||Math.abs(x.y)>0){const m=Dn(g);m&&m.scrollBy({top:x.y,left:x.x})}},[t,i,l,r,n])}const yt=d.createContext({...ne,scaleX:1,scaleY:1});var be;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(be||(be={}));const mo=d.memo(function(t){var n,r,o,a;let{id:i,accessibility:l,autoScroll:u=!0,children:g,sensors:p=lo,collisionDetection:x=Cs,measuring:m,modifiers:y,...E}=t;const S=d.useReducer(ho,void 0,fo),[A,j]=S,[C,N]=xs(),[R,I]=d.useState(be.Uninitialized),c=R===be.Initialized,{draggable:{active:f,nodes:h,translate:v},droppable:{containers:w}}=A,D=f!=null?h.get(f):null,M=d.useRef({initial:null,translated:null}),k=d.useMemo(()=>{var B;return f!=null?{id:f,data:(B=D==null?void 0:D.data)!=null?B:co,rect:M}:null},[f,D]),O=d.useRef(null),[L,Y]=d.useState(null),[H,ie]=d.useState(null),J=Ye(E,Object.values(E)),Te=Je("DndDescribedBy",i),qe=d.useMemo(()=>w.getEnabled(),[w]),X=po(m),{droppableRects:le,measureDroppableContainers:ye,measuringScheduled:Le}=Js(qe,{dragging:c,dependencies:[v.x,v.y],config:X.droppable}),Z=Qs(h,f),et=d.useMemo(()=>H?ut(H):null,[H]),fe=er(),ce=Zs(Z,X.draggable.measure);go({activeNode:f!=null?h.get(f):null,config:fe.layoutShiftCompensation,initialRect:ce,measure:X.draggable.measure});const P=an(Z,X.draggable.measure,ce),Pe=an(Z?Z.parentElement:null),re=d.useRef({activatorEvent:null,active:null,activeNode:Z,collisionRect:null,collisions:null,droppableRects:le,draggableNodes:h,draggingNode:null,draggingNodeRect:null,droppableContainers:w,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Se=w.getNodeFor((n=re.current.over)==null?void 0:n.id),de=io({measure:X.dragOverlay.measure}),Ne=(r=de.nodeRef.current)!=null?r:Z,Ce=c?(o=de.rect)!=null?o:P:null,Ft=!!(de.nodeRef.current&&de.rect),_t=to(Ft?null:P),wt=On(Ne?G(Ne):null),he=no(c?Se??Z:null),tt=ao(he),nt=Hn(y,{transform:{x:v.x-_t.x,y:v.y-_t.y,scaleX:1,scaleY:1},activatorEvent:H,active:k,activeNodeRect:P,containerNodeRect:Pe,draggingNodeRect:Ce,over:re.current.over,overlayNodeRect:de.rect,scrollableAncestors:he,scrollableAncestorRects:tt,windowRect:wt}),Vt=et?Ie(et,v):null,Bt=ro(he),Xn=cn(Bt),Kn=cn(Bt,[P]),De=Ie(nt,Xn),Ae=Ce?Es(Ce,nt):null,He=k&&Ae?x({active:k,collisionRect:Ae,droppableRects:le,droppableContainers:qe,pointerCoordinates:Vt}):null,Gt=Sn(He,"id"),[xe,Yt]=d.useState(null),Qn=Ft?nt:Ie(nt,Kn),Wn=Ds(Qn,(a=xe==null?void 0:xe.rect)!=null?a:null,P),St=d.useRef(null),Xt=d.useCallback((B,K)=>{let{sensor:Q,options:pe}=K;if(O.current==null)return;const q=h.get(O.current);if(!q)return;const W=B.nativeEvent,se=new Q({active:O.current,activeNode:q,event:W,options:pe,context:re,onAbort(V){if(!h.get(V))return;const{onDragAbort:oe}=J.current,ue={id:V};oe==null||oe(ue),C({type:"onDragAbort",event:ue})},onPending(V,ge,oe,ue){if(!h.get(V))return;const{onDragPending:$e}=J.current,me={id:V,constraint:ge,initialCoordinates:oe,offset:ue};$e==null||$e(me),C({type:"onDragPending",event:me})},onStart(V){const ge=O.current;if(ge==null)return;const oe=h.get(ge);if(!oe)return;const{onDragStart:ue}=J.current,Ue={activatorEvent:W,active:{id:ge,data:oe.data,rect:M}};_e.unstable_batchedUpdates(()=>{ue==null||ue(Ue),I(be.Initializing),j({type:F.DragStart,initialCoordinates:V,active:ge}),C({type:"onDragStart",event:Ue}),Y(St.current),ie(W)})},onMove(V){j({type:F.DragMove,coordinates:V})},onEnd:Ee(F.DragEnd),onCancel:Ee(F.DragCancel)});St.current=se;function Ee(V){return async function(){const{active:oe,collisions:ue,over:Ue,scrollAdjustedTranslate:$e}=re.current;let me=null;if(oe&&$e){const{cancelDrop:ze}=J.current;me={activatorEvent:W,active:oe,collisions:ue,delta:$e,over:Ue},V===F.DragEnd&&typeof ze=="function"&&await Promise.resolve(ze(me))&&(V=F.DragCancel)}O.current=null,_e.unstable_batchedUpdates(()=>{j({type:V}),I(be.Uninitialized),Yt(null),Y(null),ie(null),St.current=null;const ze=V===F.DragEnd?"onDragEnd":"onDragCancel";if(me){const Nt=J.current[ze];Nt==null||Nt(me),C({type:ze,event:me})}})}}},[h]),Jn=d.useCallback((B,K)=>(Q,pe)=>{const q=Q.nativeEvent,W=h.get(pe);if(O.current!==null||!W||q.dndKit||q.defaultPrevented)return;const se={active:W};B(Q,K.options,se)===!0&&(q.dndKit={capturedBy:K.sensor},O.current=pe,Xt(Q,K))},[h,Xt]),Kt=Ws(p,Jn);so(p),te(()=>{P&&R===be.Initializing&&I(be.Initialized)},[P,R]),d.useEffect(()=>{const{onDragMove:B}=J.current,{active:K,activatorEvent:Q,collisions:pe,over:q}=re.current;if(!K||!Q)return;const W={active:K,activatorEvent:Q,collisions:pe,delta:{x:De.x,y:De.y},over:q};_e.unstable_batchedUpdates(()=>{B==null||B(W),C({type:"onDragMove",event:W})})},[De.x,De.y]),d.useEffect(()=>{const{active:B,activatorEvent:K,collisions:Q,droppableContainers:pe,scrollAdjustedTranslate:q}=re.current;if(!B||O.current==null||!K||!q)return;const{onDragOver:W}=J.current,se=pe.get(Gt),Ee=se&&se.rect.current?{id:se.id,rect:se.rect.current,data:se.data,disabled:se.disabled}:null,V={active:B,activatorEvent:K,collisions:Q,delta:{x:q.x,y:q.y},over:Ee};_e.unstable_batchedUpdates(()=>{Yt(Ee),W==null||W(V),C({type:"onDragOver",event:V})})},[Gt]),te(()=>{re.current={activatorEvent:H,active:k,activeNode:Z,collisionRect:Ae,collisions:He,droppableRects:le,draggableNodes:h,draggingNode:Ne,draggingNodeRect:Ce,droppableContainers:w,over:xe,scrollableAncestors:he,scrollAdjustedTranslate:De},M.current={initial:Ce,translated:Ae}},[k,Z,He,Ae,h,Ne,Ce,le,w,xe,he,De]),Ys({...fe,delta:v,draggingRect:Ae,pointerCoordinates:Vt,scrollableAncestors:he,scrollableAncestorRects:tt});const Zn=d.useMemo(()=>({active:k,activeNode:Z,activeNodeRect:P,activatorEvent:H,collisions:He,containerNodeRect:Pe,dragOverlay:de,draggableNodes:h,droppableContainers:w,droppableRects:le,over:xe,measureDroppableContainers:ye,scrollableAncestors:he,scrollableAncestorRects:tt,measuringConfiguration:X,measuringScheduled:Le,windowRect:wt}),[k,Z,P,H,He,Pe,de,h,w,le,xe,ye,he,tt,X,Le,wt]),qn=d.useMemo(()=>({activatorEvent:H,activators:Kt,active:k,activeNodeRect:P,ariaDescribedById:{draggable:Te},dispatch:j,draggableNodes:h,over:xe,measureDroppableContainers:ye}),[H,Kt,k,P,j,Te,h,xe,ye]);return U.createElement(vn.Provider,{value:N},U.createElement(Ze.Provider,{value:qn},U.createElement(Pn.Provider,{value:Zn},U.createElement(yt.Provider,{value:Wn},g)),U.createElement(xo,{disabled:(l==null?void 0:l.restoreFocus)===!1})),U.createElement(ms,{...l,hiddenTextDescribedById:Te}));function er(){const B=(L==null?void 0:L.autoScrollEnabled)===!1,K=typeof u=="object"?u.enabled===!1:u===!1,Q=c&&!B&&!K;return typeof u=="object"?{...u,enabled:Q}:{enabled:Q}}}),bo=d.createContext(null),un="button",vo="Draggable";function Un(e){let{id:t,data:n,disabled:r=!1,attributes:o}=e;const a=Je(vo),{activators:i,activatorEvent:l,active:u,activeNodeRect:g,ariaDescribedById:p,draggableNodes:x,over:m}=d.useContext(Ze),{role:y=un,roleDescription:E="draggable",tabIndex:S=0}=o??{},A=(u==null?void 0:u.id)===t,j=d.useContext(A?yt:bo),[C,N]=ct(),[R,I]=ct(),c=oo(i,t),f=Ye(n);te(()=>(x.set(t,{id:t,key:a,node:C,activatorNode:R,data:f}),()=>{const v=x.get(t);v&&v.key===a&&x.delete(t)}),[x,t]);const h=d.useMemo(()=>({role:y,tabIndex:S,"aria-disabled":r,"aria-pressed":A&&y===un?!0:void 0,"aria-roledescription":E,"aria-describedby":p.draggable}),[r,y,S,A,E,p.draggable]);return{active:u,activatorEvent:l,activeNodeRect:g,attributes:h,isDragging:A,listeners:r?void 0:c,node:C,over:m,setNodeRef:N,setActivatorNodeRef:I,transform:j}}function $n(){return d.useContext(Pn)}const yo="Droppable",wo={timeout:25};function zn(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:o}=e;const a=Je(yo),{active:i,dispatch:l,over:u,measureDroppableContainers:g}=d.useContext(Ze),p=d.useRef({disabled:n}),x=d.useRef(!1),m=d.useRef(null),y=d.useRef(null),{disabled:E,updateMeasurementsFor:S,timeout:A}={...wo,...o},j=Ye(S??r),C=d.useCallback(()=>{if(!x.current){x.current=!0;return}y.current!=null&&clearTimeout(y.current),y.current=setTimeout(()=>{g(Array.isArray(j.current)?j.current:[j.current]),y.current=null},A)},[A]),N=vt({callback:C,disabled:E||!i}),R=d.useCallback((h,v)=>{N&&(v&&(N.unobserve(v),x.current=!1),h&&N.observe(h))},[N]),[I,c]=ct(R),f=Ye(t);return d.useEffect(()=>{!N||!I.current||(N.disconnect(),x.current=!1,N.observe(I.current))},[I,N]),d.useEffect(()=>(l({type:F.RegisterDroppable,element:{id:r,key:a,disabled:n,node:I,rect:m,data:f}}),()=>l({type:F.UnregisterDroppable,key:a,id:r})),[r]),d.useEffect(()=>{n!==p.current.disabled&&(l({type:F.SetDroppableDisabled,id:r,key:a,disabled:n}),p.current.disabled=n)},[r,a,n,l]),{active:i,rect:m,isOver:(u==null?void 0:u.id)===r,node:I,over:u,setNodeRef:c}}function So(e){let{animation:t,children:n}=e;const[r,o]=d.useState(null),[a,i]=d.useState(null),l=dt(n);return!n&&!r&&l&&o(l),te(()=>{if(!a)return;const u=r==null?void 0:r.key,g=r==null?void 0:r.props.id;if(u==null||g==null){o(null);return}Promise.resolve(t(g,a)).then(()=>{o(null)})},[t,r,a]),U.createElement(U.Fragment,null,n,r?d.cloneElement(r,{ref:i}):null)}const No={x:0,y:0,scaleX:1,scaleY:1};function Co(e){let{children:t}=e;return U.createElement(Ze.Provider,{value:Ln},U.createElement(yt.Provider,{value:No},t))}const Do={position:"fixed",touchAction:"none"},Ao=e=>mt(e)?"transform 250ms ease":void 0,Eo=d.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:o,children:a,className:i,rect:l,style:u,transform:g,transition:p=Ao}=e;if(!l)return null;const x=o?g:{...g,scaleX:1,scaleY:1},m={...Do,width:l.width,height:l.height,top:l.top,left:l.left,transform:ve.Transform.toString(x),transformOrigin:o&&r?vs(r,l):void 0,transition:typeof p=="function"?p(r):p,...u};return U.createElement(n,{className:i,style:m,ref:t},a)}),jo=e=>t=>{let{active:n,dragOverlay:r}=t;const o={},{styles:a,className:i}=e;if(a!=null&&a.active)for(const[l,u]of Object.entries(a.active))u!==void 0&&(o[l]=n.node.style.getPropertyValue(l),n.node.style.setProperty(l,u));if(a!=null&&a.dragOverlay)for(const[l,u]of Object.entries(a.dragOverlay))u!==void 0&&r.node.style.setProperty(l,u);return i!=null&&i.active&&n.node.classList.add(i.active),i!=null&&i.dragOverlay&&r.node.classList.add(i.dragOverlay),function(){for(const[u,g]of Object.entries(o))n.node.style.setProperty(u,g);i!=null&&i.active&&n.node.classList.remove(i.active)}},Ro=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:ve.Transform.toString(t)},{transform:ve.Transform.toString(n)}]},Io={duration:250,easing:"ease",keyframes:Ro,sideEffects:jo({styles:{active:{opacity:"0"}}})};function Mo(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:o}=e;return gt((a,i)=>{if(t===null)return;const l=n.get(a);if(!l)return;const u=l.node.current;if(!u)return;const g=Tn(i);if(!g)return;const{transform:p}=G(i).getComputedStyle(i),x=Cn(p);if(!x)return;const m=typeof t=="function"?t:ko(t);return Mn(u,o.draggable.measure),m({active:{id:a,data:l.data,node:u,rect:o.draggable.measure(u)},draggableNodes:n,dragOverlay:{node:i,rect:o.dragOverlay.measure(g)},droppableContainers:r,measuringConfiguration:o,transform:x})})}function ko(e){const{duration:t,easing:n,sideEffects:r,keyframes:o}={...Io,...e};return a=>{let{active:i,dragOverlay:l,transform:u,...g}=a;if(!t)return;const p={x:l.rect.left-i.rect.left,y:l.rect.top-i.rect.top},x={scaleX:u.scaleX!==1?i.rect.width*u.scaleX/l.rect.width:1,scaleY:u.scaleY!==1?i.rect.height*u.scaleY/l.rect.height:1},m={x:u.x-p.x,y:u.y-p.y,...x},y=o({...g,active:i,dragOverlay:l,transform:{initial:u,final:m}}),[E]=y,S=y[y.length-1];if(JSON.stringify(E)===JSON.stringify(S))return;const A=r==null?void 0:r({active:i,dragOverlay:l,...g}),j=l.node.animate(y,{duration:t,easing:n,fill:"forwards"});return new Promise(C=>{j.onfinish=()=>{A==null||A(),C()}})}}let fn=0;function Oo(e){return d.useMemo(()=>{if(e!=null)return fn++,fn},[e])}const To=U.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:o,transition:a,modifiers:i,wrapperElement:l="div",className:u,zIndex:g=999}=e;const{activatorEvent:p,active:x,activeNodeRect:m,containerNodeRect:y,draggableNodes:E,droppableContainers:S,dragOverlay:A,over:j,measuringConfiguration:C,scrollableAncestors:N,scrollableAncestorRects:R,windowRect:I}=$n(),c=d.useContext(yt),f=Oo(x==null?void 0:x.id),h=Hn(i,{activatorEvent:p,active:x,activeNodeRect:m,containerNodeRect:y,draggingNodeRect:A.rect,over:j,overlayNodeRect:A.rect,scrollableAncestors:N,scrollableAncestorRects:R,transform:c,windowRect:I}),v=$t(m),w=Mo({config:r,draggableNodes:E,droppableContainers:S,measuringConfiguration:C}),D=v?A.setRef:void 0;return U.createElement(Co,null,U.createElement(So,{animation:w},x&&f?U.createElement(Eo,{key:f,id:x.id,ref:D,as:l,activatorEvent:p,adjustScale:t,className:u,transition:a,rect:v,style:{zIndex:g,...o},transform:h},n):null))});function zt(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function Lo(e,t){return e.reduce((n,r,o)=>{const a=t.get(r);return a&&(n[o]=a),n},Array(e.length))}function at(e){return e!==null&&e>=0}function Po(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Ho(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Fn=e=>{let{rects:t,activeIndex:n,overIndex:r,index:o}=e;const a=zt(t,r,n),i=t[o],l=a[o];return!l||!i?null:{x:l.left-i.left,y:l.top-i.top,scaleX:l.width/i.width,scaleY:l.height/i.height}},it={scaleX:1,scaleY:1},Uo=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:o,rects:a,overIndex:i}=e;const l=(t=a[n])!=null?t:r;if(!l)return null;if(o===n){const g=a[i];return g?{x:0,y:n<i?g.top+g.height-(l.top+l.height):g.top-l.top,...it}:null}const u=$o(a,o,n);return o>n&&o<=i?{x:0,y:-l.height-u,...it}:o<n&&o>=i?{x:0,y:l.height+u,...it}:{x:0,y:0,...it}};function $o(e,t,n){const r=e[t],o=e[t-1],a=e[t+1];return r?n<t?o?r.top-(o.top+o.height):a?a.top-(r.top+r.height):0:a?a.top-(r.top+r.height):o?r.top-(o.top+o.height):0:0}const _n="Sortable",Vn=U.createContext({activeIndex:-1,containerId:_n,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Fn,disabled:{draggable:!1,droppable:!1}});function zo(e){let{children:t,id:n,items:r,strategy:o=Fn,disabled:a=!1}=e;const{active:i,dragOverlay:l,droppableRects:u,over:g,measureDroppableContainers:p}=$n(),x=Je(_n,n),m=l.rect!==null,y=d.useMemo(()=>r.map(c=>typeof c=="object"&&"id"in c?c.id:c),[r]),E=i!=null,S=i?y.indexOf(i.id):-1,A=g?y.indexOf(g.id):-1,j=d.useRef(y),C=!Po(y,j.current),N=A!==-1&&S===-1||C,R=Ho(a);te(()=>{C&&E&&p(y)},[C,y,E,p]),d.useEffect(()=>{j.current=y},[y]);const I=d.useMemo(()=>({activeIndex:S,containerId:x,disabled:R,disableTransforms:N,items:y,overIndex:A,useDragOverlay:m,sortedRects:Lo(y,u),strategy:o}),[S,x,R.draggable,R.droppable,N,y,A,u,m,o]);return U.createElement(Vn.Provider,{value:I},t)}const Fo=e=>{let{id:t,items:n,activeIndex:r,overIndex:o}=e;return zt(n,r,o).indexOf(t)},_o=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:o,items:a,newIndex:i,previousItems:l,previousContainerId:u,transition:g}=e;return!g||!r||l!==a&&o===i?!1:n?!0:i!==o&&t===u},Vo={duration:200,easing:"ease"},Bn="transform",Bo=ve.Transition.toString({property:Bn,duration:0,easing:"linear"}),Go={roleDescription:"sortable"};function Yo(e){let{disabled:t,index:n,node:r,rect:o}=e;const[a,i]=d.useState(null),l=d.useRef(n);return te(()=>{if(!t&&n!==l.current&&r.current){const u=o.current;if(u){const g=Oe(r.current,{ignoreTransform:!0}),p={x:u.left-g.left,y:u.top-g.top,scaleX:u.width/g.width,scaleY:u.height/g.height};(p.x||p.y)&&i(p)}}n!==l.current&&(l.current=n)},[t,n,r,o]),d.useEffect(()=>{a&&i(null)},[a]),a}function Xo(e){let{animateLayoutChanges:t=_o,attributes:n,disabled:r,data:o,getNewIndex:a=Fo,id:i,strategy:l,resizeObserverConfig:u,transition:g=Vo}=e;const{items:p,containerId:x,activeIndex:m,disabled:y,disableTransforms:E,sortedRects:S,overIndex:A,useDragOverlay:j,strategy:C}=d.useContext(Vn),N=Ko(r,y),R=p.indexOf(i),I=d.useMemo(()=>({sortable:{containerId:x,index:R,items:p},...o}),[x,o,R,p]),c=d.useMemo(()=>p.slice(p.indexOf(i)),[p,i]),{rect:f,node:h,isOver:v,setNodeRef:w}=zn({id:i,data:I,disabled:N.droppable,resizeObserverConfig:{updateMeasurementsFor:c,...u}}),{active:D,activatorEvent:M,activeNodeRect:k,attributes:O,setNodeRef:L,listeners:Y,isDragging:H,over:ie,setActivatorNodeRef:J,transform:Te}=Un({id:i,data:I,attributes:{...Go,...n},disabled:N.draggable}),qe=ss(w,L),X=!!D,le=X&&!E&&at(m)&&at(A),ye=!j&&H,Le=ye&&le?Te:null,et=le?Le??(l??C)({rects:S,activeNodeRect:k,activeIndex:m,overIndex:A,index:R}):null,fe=at(m)&&at(A)?a({id:i,items:p,activeIndex:m,overIndex:A}):R,ce=D==null?void 0:D.id,P=d.useRef({activeId:ce,items:p,newIndex:fe,containerId:x}),Pe=p!==P.current.items,re=t({active:D,containerId:x,isDragging:H,isSorting:X,id:i,index:R,items:p,newIndex:P.current.newIndex,previousItems:P.current.items,previousContainerId:P.current.containerId,transition:g,wasDragging:P.current.activeId!=null}),Se=Yo({disabled:!re,index:R,node:h,rect:f});return d.useEffect(()=>{X&&P.current.newIndex!==fe&&(P.current.newIndex=fe),x!==P.current.containerId&&(P.current.containerId=x),p!==P.current.items&&(P.current.items=p)},[X,fe,x,p]),d.useEffect(()=>{if(ce===P.current.activeId)return;if(ce!=null&&P.current.activeId==null){P.current.activeId=ce;return}const Ne=setTimeout(()=>{P.current.activeId=ce},50);return()=>clearTimeout(Ne)},[ce]),{active:D,activeIndex:m,attributes:O,data:I,rect:f,index:R,newIndex:fe,items:p,isOver:v,isSorting:X,isDragging:H,listeners:Y,node:h,overIndex:A,over:ie,setNodeRef:qe,setActivatorNodeRef:J,setDroppableNodeRef:w,setDraggableNodeRef:L,transform:Se??et,transition:de()};function de(){if(Se||Pe&&P.current.newIndex===R)return Bo;if(!(ye&&!mt(M)||!g)&&(X||re))return ve.Transition.toString({...g,property:Bn})}}function Ko(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}function xt(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const Qo=[T.Down,T.Right,T.Up,T.Left],Wo=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:o,droppableContainers:a,over:i,scrollableAncestors:l}}=t;if(Qo.includes(e.code)){if(e.preventDefault(),!n||!r)return;const u=[];a.getEnabled().forEach(x=>{if(!x||x!=null&&x.disabled)return;const m=o.get(x.id);if(m)switch(e.code){case T.Down:r.top<m.top&&u.push(x);break;case T.Up:r.top>m.top&&u.push(x);break;case T.Left:r.left>m.left&&u.push(x);break;case T.Right:r.left<m.left&&u.push(x);break}});const g=Ss({collisionRect:r,droppableRects:o,droppableContainers:u});let p=Sn(g,"id");if(p===(i==null?void 0:i.id)&&g.length>1&&(p=g[1].id),p!=null){const x=a.get(n.id),m=a.get(p),y=m?o.get(m.id):null,E=m==null?void 0:m.node.current;if(E&&y&&x&&m){const A=bt(E).some((c,f)=>l[f]!==c),j=Gn(x,m),C=Jo(x,m),N=A||!j?{x:0,y:0}:{x:C?r.width-y.width:0,y:C?r.height-y.height:0},R={x:y.left,y:y.top};return N.x&&N.y?R:Xe(R,N)}}}};function Gn(e,t){return!xt(e)||!xt(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function Jo(e,t){return!xt(e)||!xt(t)||!Gn(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const Zo={EASY:"border-emerald-500/50 bg-emerald-100/50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-100",MEDIUM:"border-cyan-500/50 bg-cyan-100/50 dark:bg-cyan-900/20 text-cyan-700 dark:text-cyan-100",HARD:"border-red-500/50 bg-red-100/50 dark:bg-red-900/20 text-red-700 dark:text-red-100"},qo={EASY:"bg-emerald-500 dark:bg-emerald-600",MEDIUM:"bg-cyan-500 dark:bg-cyan-600",HARD:"bg-red-500 dark:bg-red-600"},ea=({question:e,isUsed:t})=>{const{attributes:n,listeners:r,setNodeRef:o,isDragging:a}=Un({id:`source-${e.id}`,data:{type:"SOURCE",question:e},disabled:t}),i=Zo[e.difficulty];return s.jsxs("div",{ref:o,...r,...n,className:`
        group relative p-3 rounded-xl border-2 transition-all select-none
        ${t?"bg-slate-100 dark:bg-slate-900 border-slate-200 dark:border-slate-800 opacity-60":"bg-white dark:bg-slate-800 border-transparent hover:border-slate-300 dark:hover:border-slate-600 hover:shadow-lg cursor-grab active:cursor-grabbing"}
        ${a?"opacity-30":""}
      `,children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("span",{className:`text-[9px] px-1.5 py-0.5 rounded font-bold border ${i}`,children:e.difficulty}),s.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded font-bold bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300",children:e.type})]}),s.jsxs("span",{className:"text-[9px] font-mono text-slate-400 flex items-center gap-0.5",children:[s.jsx(Pr,{size:9}),e.id]})]}),s.jsx("div",{className:`text-xs font-medium line-clamp-2 ${t?"text-slate-500":"text-slate-700 dark:text-slate-200 group-hover:text-slate-900 dark:group-hover:text-white"}`,children:e.question}),t&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/40 dark:bg-slate-950/40 backdrop-blur-[0.5px] rounded-xl cursor-not-allowed",children:s.jsxs("span",{className:"text-emerald-600 dark:text-emerald-500 text-[10px] font-bold flex items-center gap-1 bg-white/90 dark:bg-slate-900/90 px-2 py-1 rounded-full shadow-sm border border-emerald-500/20",children:[s.jsx(yr,{size:10})," 已添加"]})})]})},ta=({item:e,index:t,onRemove:n,activeDragType:r,activeOverId:o})=>{const{attributes:a,listeners:i,setNodeRef:l,transform:u,transition:g,isDragging:p}=Xo({id:e.id,data:{type:"PAPER",index:t,item:e}}),x={transform:ve.Translate.toString(u),transition:g,opacity:p?.3:1,position:"relative",zIndex:p?999:"auto"},m=r==="SOURCE"&&o===e.id;return s.jsxs("div",{ref:l,style:x,className:`bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg p-3 flex gap-3 items-start group shadow-sm hover:shadow-md transition-all relative ${m?"mt-6":""}`,children:[m&&s.jsxs("div",{className:"absolute -top-4 left-0 right-0 h-0.5 flex items-center justify-center pointer-events-none",children:[s.jsx("div",{className:"w-full h-full bg-cyan-500 shadow-[0_0_8px_cyan]"}),s.jsxs("div",{className:"absolute bg-cyan-600 text-white text-[9px] px-2 py-0.5 rounded-full font-bold shadow-lg animate-bounce flex items-center gap-1",children:[s.jsx(Ar,{size:10})," 插入此处 (Insert Here)"]})]}),s.jsx("div",{...a,...i,className:"text-slate-400 cursor-move hover:text-slate-600 dark:hover:text-slate-300 mt-1 touch-none",children:s.jsx(Tr,{size:16})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[s.jsx("span",{className:`w-2 h-2 rounded-full ${qo[e.question.difficulty]}`}),s.jsxs("span",{className:"text-[10px] text-slate-500 font-mono font-bold",children:["Q",t+1,"."]}),s.jsxs("span",{className:"text-[10px] text-slate-400 font-mono",children:["#",e.question.id]}),s.jsx("span",{className:"text-[10px] text-slate-500 bg-slate-100 dark:bg-slate-800 px-1.5 rounded border border-slate-200 dark:border-slate-700",children:e.question.type})]}),s.jsx("div",{className:"text-sm text-slate-800 dark:text-slate-200 font-bold mb-2",children:e.question.question}),e.question.options&&e.question.options.length>0&&s.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:e.question.options.map((y,E)=>s.jsxs("div",{className:"text-[10px] text-slate-600 dark:text-slate-400 bg-slate-50 dark:bg-slate-800 px-2 py-1 rounded border border-slate-200 dark:border-slate-700 font-mono truncate",children:[String.fromCharCode(65+E),". ",y]},E))})]}),s.jsx("button",{onClick:()=>n(t),className:"p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"移除",children:s.jsx(Xr,{size:16})})]})},Yn=U.memo(({items:e,itemIds:t,onRemove:n,activeDragType:r,activeOverId:o})=>{const{setNodeRef:a,isOver:i}=zn({id:"paper-container-footer"});return s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-2 custom-scrollbar min-h-[200px] pb-20 transition-colors duration-200",children:[s.jsxs(zo,{items:t,strategy:Uo,children:[e.length===0&&s.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400 pointer-events-none opacity-50",children:[s.jsx("div",{className:"w-20 h-20 border-2 border-dashed border-slate-300 dark:border-slate-700 rounded-2xl flex items-center justify-center mb-4",children:s.jsx(Wt,{size:32})}),s.jsx("p",{className:"text-sm font-bold",children:"试卷是空的"}),s.jsx("p",{className:"text-xs mt-1",children:"从左侧拖拽题目到此处"})]}),e.map((l,u)=>s.jsx(ta,{item:l,index:u,onRemove:n,activeDragType:r,activeOverId:o},l.id)),r==="SOURCE"&&s.jsx("div",{ref:a,className:`
              mt-2 border-2 border-dashed rounded-xl h-16 flex items-center justify-center transition-all duration-300
              ${i?"border-cyan-500 bg-cyan-100/10 text-cyan-500 scale-100 opacity-100":"border-slate-300 dark:border-slate-700 text-slate-400 scale-95 opacity-50"}
           `,children:s.jsxs("span",{className:"text-sm font-bold flex items-center gap-2 animate-pulse",children:[s.jsx(Wt,{size:16})," ",i?"松手添加 (Drop to Add)":"拖拽至此 (Drag Here)"]})})]}),s.jsx("div",{className:"h-10 w-full"})]})});Yn.displayName="PaperContainer";const na=({type:e,data:t})=>e==="SOURCE"?s.jsx("div",{className:"opacity-90 rotate-3 scale-105 cursor-grabbing w-[320px]",children:s.jsxs("div",{className:"p-3 rounded-xl border-2 bg-slate-800 border-cyan-500 shadow-2xl cursor-grabbing",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-[10px] font-bold text-cyan-400",children:"添加新题目"}),s.jsxs("span",{className:"text-[10px] text-slate-400 font-mono",children:["#",t.question.id]})]}),s.jsx("div",{className:"text-xs font-medium text-white",children:t.question.question})]})}):s.jsx("div",{className:"opacity-90 rotate-2 scale-105 cursor-grabbing w-full max-w-xl",children:s.jsx("div",{className:"bg-slate-900 border border-cyan-500 rounded-lg p-3 shadow-2xl cursor-grabbing",children:s.jsx("div",{className:"text-sm text-white font-bold",children:t.item.question.question})})}),ra=({onBack:e})=>{const[t]=d.useState([...ae]),[n,r]=d.useState([]),[o,a]=d.useState(null),[i,l]=d.useState(null),[u,g]=d.useState(null),p=d.useRef(null),x=bs(Zt(Ut,{activationConstraint:{distance:5}}),Zt(Pt,{coordinateGetter:Wo})),m=d.useMemo(()=>new Set(n.map(c=>c.question.id)),[n]),y=d.useMemo(()=>n.map(c=>c.id),[n]),E=n.length*10,S=c=>{var v;const{active:f}=c,h=(v=f.data.current)==null?void 0:v.type;h==="SOURCE"?a({type:"SOURCE",data:f.data.current}):h==="PAPER"&&a({type:"PAPER",data:f.data.current})},A=c=>{const{over:f}=c;l(f?String(f.id):null)},j=c=>{var v,w;const{active:f,over:h}=c;if(a(null),l(null),!!h)if(((v=f.data.current)==null?void 0:v.type)==="SOURCE"){const D=f.data.current.question,M={id:`paper-item-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,question:D};if(h.id==="paper-container-footer")r(k=>[...k,M]);else{const k=n.findIndex(O=>O.id===h.id);k!==-1&&r(O=>{const L=[...O];return L.splice(k,0,M),L})}}else((w=f.data.current)==null?void 0:w.type)==="PAPER"&&f.id!==h.id&&r(D=>{const M=D.findIndex(O=>O.id===f.id),k=D.findIndex(O=>O.id===h.id);return zt(D,M,k)})},C=c=>{const f=n[c];r(v=>v.filter((w,D)=>D!==c));const h=Date.now().toString();g({id:h,msg:`Q${c+1} 已移除`,item:f,idx:c}),setTimeout(()=>{g(v=>v&&v.id===h?null:v)},4e3)},N=()=>{u&&u.item&&(r(c=>{const f=[...c],h=Math.min(u.idx,f.length);return f.splice(h,0,u.item),f}),g(null))},R=()=>{if(n.length===0){alert("试卷为空，无法导出");return}const c={title:"CineTech Quiz Paper",version:"1.0",createdAt:new Date().toISOString(),questionIds:n.map(v=>v.question.id)},f="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(c,null,2)),h=document.createElement("a");h.setAttribute("href",f),h.setAttribute("download",`quiz_export_${new Date().getTime()}.json`),document.body.appendChild(h),h.click(),h.remove()},I=c=>{var v;const f=(v=c.target.files)==null?void 0:v[0];if(!f)return;const h=new FileReader;h.onload=w=>{var D;try{const M=JSON.parse((D=w.target)==null?void 0:D.result);if(!M.questionIds||!Array.isArray(M.questionIds)){alert("无效的试卷配置文件 (Missing questionIds)");return}const k=[];let O=0;M.questionIds.forEach(L=>{const Y=ae.find(H=>H.id===L);Y?k.push({id:`imported-${Date.now()}-${Math.random()}`,question:Y}):O++}),r(k),O>0&&alert(`导入成功，但有 ${O} 道题目在当前题库中未找到。`)}catch(M){console.error(M),alert("JSON 解析失败，请检查文件格式。")}finally{p.current&&(p.current.value="")}},h.readAsText(f)};return s.jsx(mo,{sensors:x,collisionDetection:ws,onDragStart:S,onDragOver:A,onDragEnd:j,children:s.jsxs("div",{className:"fixed inset-0 z-50 bg-white dark:bg-slate-950 flex flex-col animate-in fade-in zoom-in duration-300",children:[u&&s.jsxs("div",{className:"absolute top-20 right-8 z-[100] bg-slate-900 border border-slate-700 px-4 py-3 rounded-xl shadow-2xl flex items-center gap-4 animate-in slide-in-from-right-10 fade-in duration-300",children:[s.jsx("span",{className:"text-sm text-slate-300",children:u.msg}),s.jsxs("button",{onClick:N,className:"flex items-center gap-1 text-cyan-400 hover:text-cyan-300 font-bold text-sm bg-cyan-900/30 px-2 py-1 rounded transition-colors",children:[s.jsx(Jr,{size:14})," 撤销 (Undo)"]})]}),s.jsxs("div",{className:"h-16 border-b border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 flex items-center justify-between px-6 shrink-0 shadow-sm z-10",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white transition-colors",children:s.jsx(dr,{size:20})}),s.jsxs("div",{children:[s.jsxs("h2",{className:"text-lg font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[s.jsx(kr,{className:"text-cyan-600 dark:text-cyan-400",size:20})," 试卷编辑器 (Quiz Builder)"]}),s.jsxs("div",{className:"text-[10px] text-slate-500",children:["题目数: ",s.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 font-mono font-bold mr-3",children:n.length}),"总分: ",s.jsx("span",{className:"text-emerald-600 dark:text-emerald-400 font-mono font-bold",children:E})]})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"file",ref:p,onChange:I,accept:".json",className:"hidden"}),s.jsxs("button",{onClick:()=>{var c;return(c=p.current)==null?void 0:c.click()},className:"flex items-center gap-2 px-3 py-2 bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-lg text-xs font-bold border border-slate-200 dark:border-slate-700 transition-all",children:[s.jsx(hn,{size:14})," 导入配置"]}),s.jsxs("button",{onClick:R,className:"flex items-center gap-2 px-3 py-2 bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 text-emerald-600 dark:text-emerald-400 rounded-lg text-xs font-bold border border-slate-200 dark:border-slate-700 transition-all",children:[s.jsx(gn,{size:14})," 导出配置"]}),s.jsxs("button",{onClick:()=>{alert(`试卷已保存！共 ${n.length} 题，总分 ${E}。`)},className:"flex items-center gap-2 px-4 py-2 bg-cyan-600 hover:bg-cyan-500 text-white rounded-lg text-xs font-bold shadow-lg shadow-cyan-900/20 transition-all ml-2",children:[s.jsx(Vr,{size:14})," 保存并使用"]})]})]}),s.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[s.jsxs("div",{className:"w-1/3 min-w-[320px] border-r border-slate-200 dark:border-slate-800 flex flex-col bg-slate-50 dark:bg-slate-900/50",children:[s.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 sticky top-0 z-10",children:[s.jsx("div",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-1",children:"题库列表 (Source)"}),s.jsx("div",{className:"text-[10px] text-slate-400",children:"拖拽题目添加到右侧试卷"})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 custom-scrollbar",children:t.map(c=>s.jsx(ea,{question:c,isUsed:m.has(c.id)},c.id))})]}),s.jsxs("div",{className:"flex-1 flex flex-col bg-slate-100 dark:bg-slate-950 relative",children:[s.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 flex justify-between items-center shadow-sm z-10",children:[s.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"试卷预览 (Preview)"}),s.jsxs("div",{className:"text-[10px] text-slate-500 flex gap-4",children:[s.jsxs("span",{children:["Easy: ",s.jsx("span",{className:"text-emerald-500 font-mono",children:n.filter(c=>c.question.difficulty==="EASY").length})]}),s.jsxs("span",{children:["Med: ",s.jsx("span",{className:"text-cyan-500 font-mono",children:n.filter(c=>c.question.difficulty==="MEDIUM").length})]}),s.jsxs("span",{children:["Hard: ",s.jsx("span",{className:"text-red-500 font-mono",children:n.filter(c=>c.question.difficulty==="HARD").length})]})]})]}),s.jsx(Yn,{items:n,itemIds:y,onRemove:C,activeDragType:(o==null?void 0:o.type)||null,activeOverId:i})]})]}),s.jsx(To,{dropAnimation:null,children:o?s.jsx(na,{type:o.type,data:o.data}):null})]})})},Fe=e=>{const t=[...e];for(let n=t.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[t[n],t[r]]=[t[r],t[n]]}return t},ha=()=>{const[e,t]=d.useState("INTRO"),[n,r]=d.useState(!1),[o,a]=d.useState([]),[i,l]=d.useState(0),[u,g]=d.useState(0),[p,x]=d.useState([]),m=10,y=ae.length,E=(C,N)=>{const R=N.easy+N.medium+N.hard,I=N.easy/R,c=N.medium/R;let f=Math.round(C*I),h=Math.round(C*c),v=C-f-h;const w=Fe(ae.filter(H=>H.difficulty==="EASY")),D=Fe(ae.filter(H=>H.difficulty==="MEDIUM")),M=Fe(ae.filter(H=>H.difficulty==="HARD"));let k=[];const O=(H,ie)=>{const J=H.slice(0,ie);return k=[...k,...J],Math.max(0,ie-J.length)};let L=O(M,v);if(h+=L,L=O(D,h),f+=L,L=O(w,f),L>0){const H=Fe(ae.filter(ie=>!k.includes(ie)));k=[...k,...H.slice(0,L)]}if(k.length===0){alert("错误：题库为空，无法开始游戏。请检查数据源。");return}const Y=Fe(k).slice(0,C);a(Y),l(0),g(0),x([]),t("PLAYING")},S=C=>{a(C),l(0),g(0),x([]),t("PLAYING")},A=(C,N)=>{l(C),g(N.filter(R=>R==="CORRECT").length),x(N),t("SUMMARY")},j=()=>{const C=["ID","Category","Type","Difficulty","Question","Options","Correct Answer","Explanation"],N=ae.map(h=>{const v=M=>`"${M.replace(/"/g,'""')}"`,w=h.options.join(" | "),D=Array.isArray(h.correctAnswer)?h.correctAnswer.join(" | "):h.correctAnswer;return[h.id,h.category,h.type,h.difficulty,v(h.question),v(w),v(D),v(h.explanation)].join(",")}),R="\uFEFF"+[C.join(","),...N].join(`
`),I=new Blob([R],{type:"text/csv;charset=utf-8;"}),c=URL.createObjectURL(I),f=document.createElement("a");f.href=c,f.setAttribute("download","quiz_database_export.csv"),document.body.appendChild(f),f.click(),document.body.removeChild(f)};return e==="BUILDER"?s.jsx(ra,{onBack:()=>t("INTRO")}):s.jsxs("div",{className:"h-full bg-slate-950 flex items-center justify-center p-4 lg:p-8 overflow-y-auto",children:[n&&s.jsx(rs,{onClose:()=>r(!1)}),e==="INTRO"&&s.jsx(Zr,{totalQuestions:y,onStart:E,onImport:S,onOpenEditor:()=>r(!0),onDownloadCsv:j,onOpenBuilder:()=>t("BUILDER")}),e==="PLAYING"&&s.jsx(es,{questions:o,onFinish:A}),e==="SUMMARY"&&s.jsx(ns,{score:i,totalQuestions:o.length,correctCount:u,maxScore:o.length*m,onRestart:()=>t("INTRO"),questions:o,history:p})]})};export{ha as KnowledgeQuizView};
